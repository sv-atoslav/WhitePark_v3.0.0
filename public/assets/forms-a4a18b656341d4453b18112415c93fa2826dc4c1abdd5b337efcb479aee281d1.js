!function(t){function e(t,e,r){var o=t[0],s=/er/.test(r)?_indeterminate:/bl/.test(r)?f:h,a=r==_update?{checked:o[h],disabled:o[f],indeterminate:"true"==t.attr(_indeterminate)||"false"==t.attr(_determinate)}:o[s];if(/^(ch|di|in)/.test(r)&&!a)n(t,s);else if(/^(un|en|de)/.test(r)&&a)i(t,s);else if(r==_update)for(var l in a)a[l]?n(t,l,!0):i(t,l,!0);else e&&"toggle"!=r||(e||t[_callback]("ifClicked"),a?o[_type]!==u&&i(t,s):n(t,s))}function n(e,n,r){var p=e[0],m=e.parent(),g=n==h,v=n==_indeterminate,y=n==f,b=v?_determinate:g?d:"enabled",w=o(e,b+s(p[_type])),x=o(e,n+s(p[_type]));if(!0!==p[n]){if(!r&&n==h&&p[_type]==u&&p.name){var k=e.closest("form"),_='input[name="'+p.name+'"]',_=k.length?k.find(_):t(_);_.each(function(){this!==p&&t(this).data(l)&&i(t(this),n)})}v?(p[n]=!0,p[h]&&i(e,h,"force")):(r||(p[n]=!0),g&&p[_indeterminate]&&i(e,_indeterminate,!1)),a(e,g,n,r)}p[f]&&o(e,_cursor,!0)&&m.find("."+c).css(_cursor,"default"),m[_add](x||o(e,n)||""),m.attr("role")&&!v&&m.attr("aria-"+(y?f:h),"true"),m[_remove](w||o(e,b)||"")}function i(t,e,n){var i=t[0],r=t.parent(),l=e==h,u=e==_indeterminate,p=e==f,m=u?_determinate:l?d:"enabled",g=o(t,m+s(i[_type])),v=o(t,e+s(i[_type]));!1!==i[e]&&(!u&&n&&"force"!=n||(i[e]=!1),a(t,l,m,n)),!i[f]&&o(t,_cursor,!0)&&r.find("."+c).css(_cursor,"pointer"),r[_remove](v||o(t,e)||""),r.attr("role")&&!u&&r.attr("aria-"+(p?f:h),"false"),r[_add](g||o(t,m)||"")}function r(e,n){e.data(l)&&(e.parent().html(e.attr("style",e.data(l).s||"")),n&&e[_callback](n),e.off(".i").unwrap(),t(_label+'[for="'+e[0].id+'"]').add(e.closest(_label)).off(".i"))}function o(t,e,n){if(t.data(l))return t.data(l).o[e+(n?"":"Class")]}function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t,e,n,i){i||(e&&t[_callback]("ifToggled"),t[_callback]("ifChanged")[_callback]("if"+s(n)))}var l="iCheck",c=l+"-helper",u="radio",h="checked",d="un"+h,f="disabled";_determinate="determinate",_indeterminate="in"+_determinate,_update="update",_type="type",_click="click",_touch="touchbegin.i touchend.i",_add="addClass",_remove="removeClass",_callback="trigger",_label="label",_cursor="cursor",_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent),t.fn[l]=function(o,s){var a='input[type="checkbox"], input[type="'+u+'"]',d=t(),p=function(e){e.each(function(){var e=t(this);d=e.is(a)?d.add(e):d.add(e.find(a))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(o))return o=o.toLowerCase(),p(this),d.each(function(){var n=t(this);"destroy"==o?r(n,"ifDestroyed"):e(n,!0,o),t.isFunction(s)&&s()});if("object"!=typeof o&&o)return this;var m=t.extend({checkedClass:h,disabledClass:f,indeterminateClass:_indeterminate,labelHover:!0},o),g=m.handle,v=m.hoverClass||"hover",y=m.focusClass||"focus",b=m.activeClass||"active",w=!!m.labelHover,x=m.labelHoverClass||"hover",k=0|(""+m.increaseArea).replace("%","");return"checkbox"!=g&&g!=u||(a='input[type="'+g+'"]'),-50>k&&(k=-50),p(this),d.each(function(){var o=t(this);r(o);var s=this,a=s.id,d=-k+"%",p=100+2*k+"%",p={position:"absolute",top:d,left:d,display:"block",width:p,height:p,margin:0,padding:0,background:"#fff",border:0,opacity:0},d=_mobile?{position:"absolute",visibility:"hidden"}:k?p:{position:"absolute",opacity:0},g="checkbox"==s[_type]?m.checkboxClass||"icheckbox":m.radioClass||"i"+u,_=t(_label+'[for="'+a+'"]').add(o.closest(_label)),C=!!m.aria,S=l+"-"+Math.random().toString(36).substr(2,6),D='<div class="'+g+'" '+(C?'role="'+s[_type]+'" ':"");C&&_.each(function(){D+='aria-labelledby="',this.id?D+=this.id:(this.id=S,D+=S),D+='"'}),D=o.wrap(D+"/>")[_callback]("ifCreated").parent().append(m.insert),p=t('<ins class="'+c+'"/>').css(p).appendTo(D),o.data(l,{o:m,s:o.attr("style")}).css(d),m.inheritClass&&D[_add](s.className||""),m.inheritID&&a&&D.attr("id",l+"-"+a),"static"==D.css("position")&&D.css("position","relative"),e(o,!0,_update),_.length&&_.on(_click+".i mouseover.i mouseout.i "+_touch,function(n){var i=n[_type],r=t(this);if(!s[f]){if(i==_click){if(t(n.target).is("a"))return;e(o,!1,!0)}else w&&(/ut|nd/.test(i)?(D[_remove](v),r[_remove](x)):(D[_add](v),r[_add](x)));if(!_mobile)return!1;n.stopPropagation()}}),o.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(t){var e=t[_type];return t=t.keyCode,e!=_click&&("keydown"==e&&32==t?(s[_type]==u&&s[h]||(s[h]?i(o,h):n(o,h)),!1):void("keyup"==e&&s[_type]==u?!s[h]&&n(o,h):/us|ur/.test(e)&&D["blur"==e?_remove:_add](y)))}),p.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(t){var n=t[_type],i=/wn|up/.test(n)?b:v;if(!s[f]){if(n==_click?e(o,!1,!0):(/wn|er|in/.test(n)?D[_add](i):D[_remove](i+" "+b),_.length&&w&&i==v&&_[/ut|nd/.test(n)?_remove:_add](x)),!_mobile)return!1;t.stopPropagation()}})})}}(window.jQuery||window.Zepto),function(t,e){function n(t,e){p(t).push(e)}function i(i,r,o){var s=i.children(r.headerTag),a=i.children(r.bodyTag);s.length>a.length?B(Z,"contents"):s.length<a.length&&B(Z,"titles");var l=r.startIndex;if(o.stepCount=s.length,r.saveState&&t.cookie){var c=t.cookie(q+g(i)),u=parseInt(c,0);!isNaN(u)&&u<o.stepCount&&(l=u)}o.currentIndex=l,s.each(function(r){var o=t(this),s=a.eq(r),l=s.data("mode"),c=null==l?Q.html:v(Q,/^\s*$/.test(l)||isNaN(l)?l:parseInt(l,0)),u=c===Q.html||s.data("url")===e?"":s.data("url"),h=c!==Q.html&&"1"===s.data("loaded"),d=t.extend({},et,{title:o.html(),content:c===Q.html?s.html():"",contentUrl:u,contentMode:c,contentLoaded:h});n(i,d)})}function r(t){t.triggerHandler("canceled")}function o(t,e){return t.currentIndex-e}function s(e,n){var i=l(e);e.unbind(i).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(i),e.removeClass(n.clearFixCssClass+" vertical");var r=e.find(".content > *");r.removeData("loaded").removeData("mode").removeData("url"),r.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),e.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var o=t('<{0} class="{1}"></{0}>'.format(e.get(0).tagName,e.attr("class"))),s=e._id();return null!=s&&""!==s&&o._id(s),o.html(e.find(".content").html()),e.after(o),e.remove(),o}function a(t,e){var n=t.find(".steps li").eq(e.currentIndex);t.triggerHandler("finishing",[e.currentIndex])?(n.addClass("done").removeClass("error"),t.triggerHandler("finished",[e.currentIndex])):n.addClass("error")}function l(t){var e=t.data("eventNamespace");return null==e&&(e="."+g(t),t.data("eventNamespace",e)),e}function c(t,e){var n=g(t);return t.find("#"+n+V+e)}function u(t,e){var n=g(t);return t.find("#"+n+G+e)}function h(t,e){var n=g(t);return t.find("#"+n+K+e)}function d(t){return t.data("options")}function f(t){return t.data("state")}function p(t){return t.data("steps")}function m(t,e){var n=p(t);return(0>e||e>=n.length)&&B(X),n[e]}function g(t){var e=t.data("uid");return null==e&&(e=t._id(),null==e&&(e="steps-uid-".concat(U),t._id(e)),U++,t.data("uid",e)),e}function v(t,n){if(Y("enumType",t),Y("keyOrValue",n),"string"==typeof n){var i=t[n];return i===e&&B("The enum key '{0}' does not exist.",n),i}if("number"==typeof n){for(var r in t)if(t[r]===n)return n;B("Invalid enum value '{0}'.",n)}else B("Invalid key or value type.")}function y(t,e,n){return M(t,e,n,x(n,1))}function b(t,e,n){return M(t,e,n,o(n,1))}function w(t,e,n,i){if((0>i||i>=n.stepCount)&&B(X),!(e.forceMoveForward&&i<n.currentIndex)){var r=n.currentIndex;return t.triggerHandler("stepChanging",[n.currentIndex,i])?(n.currentIndex=i,R(t,e,n),E(t,e,n,r),L(t,e,n),D(t,e,n),j(t,e,n,i,r,function(){t.triggerHandler("stepChanged",[i,r])})):t.find(".steps li").eq(r).addClass("error"),!0}}function x(t,e){return t.currentIndex+e}function k(e){var n=t.extend(!0,{},nt,e);return this.each(function(){var e=t(this),r={currentIndex:n.startIndex,currentStep:null,stepCount:0,transitionElement:null};e.data("options",n),e.data("state",r),e.data("steps",[]),i(e,n,r),O(e,n,r),$(e,n),n.autoFocus&&0===U&&c(e,n.startIndex).focus(),e.triggerHandler("init",[n.startIndex])})}function _(e,n,i,r,o){(0>r||r>i.stepCount)&&B(X),o=t.extend({},et,o),C(e,r,o),i.currentIndex!==i.stepCount&&i.currentIndex>=r&&(i.currentIndex++,R(e,n,i)),i.stepCount++;var s=e.find(".content"),a=t("<{0}>{1}</{0}>".format(n.headerTag,o.title)),l=t("<{0}></{0}>".format(n.bodyTag));return(null==o.contentMode||o.contentMode===Q.html)&&l.html(o.content),0===r?s.prepend(l).prepend(a):u(e,r-1).after(l).after(a),P(e,i,l,r),z(e,n,i,a,r),A(e,n,i,r),r===i.currentIndex&&E(e,n,i),L(e,n,i),e}function C(t,e,n){p(t).splice(e,0,n)}function S(e){var n=t(this),i=d(n),r=f(n);if(i.suppressPaginationOnFocus&&n.find(":focus").is(":input"))return e.preventDefault(),!1;var o={left:37,right:39};e.keyCode===o.left?(e.preventDefault(),b(n,i,r)):e.keyCode===o.right&&(e.preventDefault(),y(n,i,r))}function D(e,n,i){if(i.stepCount>0){var r=i.currentIndex,o=m(e,r);if(!n.enableContentCache||!o.contentLoaded)switch(v(Q,o.contentMode)){case Q.iframe:e.find(".content > .body").eq(i.currentIndex).empty().html('<iframe src="'+o.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case Q.async:var s=u(e,r)._aria("busy","true").empty().append(H(n.loadingTemplate,{text:n.labels.loading}));t.ajax({url:o.contentUrl,cache:!1}).done(function(t){s.empty().html(t)._aria("busy","false").data("loaded","1"),e.triggerHandler("contentLoaded",[r])})}}}function M(t,e,n,i){var r=n.currentIndex;if(i>=0&&i<n.stepCount&&!(e.forceMoveForward&&i<n.currentIndex)){var o=c(t,i),s=o.parent(),a=s.hasClass("disabled");return s._enableAria(),o.click(),r!==n.currentIndex||!a||(s._enableAria(!1),!1)}return!1}function T(e){e.preventDefault();var n=t(this),i=n.parent().parent().parent().parent(),o=d(i),s=f(i),l=n.attr("href");switch(l.substring(l.lastIndexOf("#")+1)){case"cancel":r(i);break;case"finish":a(i,s);break;case"next":y(i,o,s);break;case"previous":b(i,o,s)}}function L(t,e,n){if(e.enablePagination){var i=t.find(".actions a[href$='#finish']").parent(),r=t.find(".actions a[href$='#next']").parent();if(!e.forceMoveForward){t.find(".actions a[href$='#previous']").parent()._enableAria(n.currentIndex>0)}e.enableFinishButton&&e.showFinishButtonAlways?(i._enableAria(n.stepCount>0),r._enableAria(n.stepCount>1&&n.stepCount>n.currentIndex+1)):(i._showAria(e.enableFinishButton&&n.stepCount===n.currentIndex+1),r._showAria(0===n.stepCount||n.stepCount>n.currentIndex+1)._enableAria(n.stepCount>n.currentIndex+1||!e.enableFinishButton))}}function E(e,n,i,r){var o=c(e,i.currentIndex),s=t('<span class="current-info audible">'+n.labels.current+" </span>"),a=e.find(".content > .title");if(null!=r){var l=c(e,r);l.parent().addClass("done").removeClass("error")._selectAria(!1),a.eq(r).removeClass("current").next(".body").removeClass("current"),s=l.find(".current-info"),o.focus()}o.prepend(s).parent()._selectAria().removeClass("done")._enableAria(),a.eq(i.currentIndex).addClass("current").next(".body").addClass("current")}function A(t,e,n,i){for(var r=g(t),o=i;o<n.stepCount;o++){var s=r+V+o,a=r+G+o,l=r+K+o,c=t.find(".title").eq(o)._id(l);t.find(".steps a").eq(o)._id(s)._aria("controls",a).attr("href","#"+l).html(H(e.titleTemplate,{index:o+1,title:c.html()})),t.find(".body").eq(o)._id(a)._aria("labelledby",l)}}function $(t,e){var n=l(t);t.bind("canceled"+n,e.onCanceled),t.bind("contentLoaded"+n,e.onContentLoaded),t.bind("finishing"+n,e.onFinishing),t.bind("finished"+n,e.onFinished),t.bind("init"+n,e.onInit),t.bind("stepChanging"+n,e.onStepChanging),t.bind("stepChanged"+n,e.onStepChanged),e.enableKeyNavigation&&t.bind("keyup"+n,S),t.find(".actions a").bind("click"+n,T)}function I(t,e,n,i){return!(0>i||i>=n.stepCount||n.currentIndex===i)&&(N(t,i),n.currentIndex>i&&(n.currentIndex--,R(t,e,n)),n.stepCount--,h(t,i).remove(),u(t,i).remove(),c(t,i).parent().remove(),0===i&&t.find(".steps li").first().addClass("first"),i===n.stepCount&&t.find(".steps li").eq(i).addClass("last"),A(t,e,n,i),L(t,e,n),!0)}function N(t,e){p(t).splice(e,1)}function O(e,n,i){var r='<{0} class="{1}">{2}</{0}>',o=v(J,n.stepsOrientation),s=o===J.vertical?" vertical":"",a=t(r.format(n.contentContainerTag,"content "+n.clearFixCssClass,e.html())),l=t(r.format(n.stepsContainerTag,"steps "+n.clearFixCssClass,'<ul role="tablist"></ul>')),c=a.children(n.headerTag),u=a.children(n.bodyTag);e.attr("role","application").empty().append(l).append(a).addClass(n.cssClass+" "+n.clearFixCssClass+s),u.each(function(n){P(e,i,t(this),n)}),c.each(function(r){z(e,n,i,t(this),r)}),E(e,n,i),F(e,n,i)}function P(t,e,n,i){var r=g(t),o=r+G+i,s=r+K+i;n._id(o).attr("role","tabpanel")._aria("labelledby",s).addClass("body")._showAria(e.currentIndex===i)}function F(t,e,n){if(e.enablePagination){var i='<li><a href="#{0}" role="menuitem">{1}</a></li>',r="";e.forceMoveForward||(r+=i.format("previous",e.labels.previous)),r+=i.format("next",e.labels.next),e.enableFinishButton&&(r+=i.format("finish",e.labels.finish)),e.enableCancelButton&&(r+=i.format("cancel",e.labels.cancel)),t.append('<{0} class="actions {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>'.format(e.actionContainerTag,e.clearFixCssClass,e.labels.pagination,r)),L(t,e,n),D(t,e,n)}}function H(t,n){for(var i=t.match(/#([a-z]*)#/gi),r=0;r<i.length;r++){var o=i[r],s=o.substring(1,o.length-1);n[s]===e&&B("The key '{0}' does not exist in the substitute collection!",s),t=t.replace(o,n[s])}return t}function z(e,n,i,r,o){var s=g(e),a=s+V+o,c=s+G+o,u=s+K+o,h=e.find(".steps > ul"),d=H(n.titleTemplate,{index:o+1,title:r.html()}),f=t('<li role="tab"><a id="'+a+'" href="#'+u+'" aria-controls="'+c+'">'+d+"</a></li>");f._enableAria(n.enableAllSteps||i.currentIndex>o),i.currentIndex>o&&f.addClass("done"),r._id(u).attr("tabindex","-1").addClass("title"),0===o?h.prepend(f):h.find("li").eq(o-1).after(f),0===o&&h.find("li").removeClass("first").eq(o).addClass("first"),o===i.stepCount-1&&h.find("li").removeClass("last").eq(o).addClass("last"),f.children("a").bind("click"+l(e),W)}function R(e,n,i){n.saveState&&t.cookie&&t.cookie(q+g(e),i.currentIndex)}function j(e,n,i,r,o,s){var a=e.find(".content > .body"),l=v(tt,n.transitionEffect),c=n.transitionEffectSpeed,u=a.eq(r),h=a.eq(o);switch(l){case tt.fade:case tt.slide:var d=l===tt.fade?"fadeOut":"slideUp",p=l===tt.fade?"fadeIn":"slideDown";i.transitionElement=u,h[d](c,function(){var e=t(this)._showAria(!1).parent().parent(),n=f(e);n.transitionElement&&(n.transitionElement[p](c,function(){t(this)._showAria()}).promise().done(s),n.transitionElement=null)});break;case tt.slideLeft:var m=h.outerWidth(!0),g=r>o?-m:m,y=r>o?m:-m;t.when(h.animate({left:g},c,function(){t(this)._showAria(!1)}),u.css("left",y+"px")._showAria().animate({left:0},c)).done(s);break;default:t.when(h._showAria(!1),u._showAria()).done(s)}}function W(e){e.preventDefault();var n=t(this),i=n.parent().parent().parent().parent(),r=d(i),o=f(i),s=o.currentIndex;if(n.parent().is(":not(.disabled):not(.current)")){var a=n.attr("href");w(i,r,o,parseInt(a.substring(a.lastIndexOf("-")+1),0))}return s===o.currentIndex?(c(i,s).focus(),!1):void 0}function B(t){throw arguments.length>1&&(t=t.format(Array.prototype.slice.call(arguments,1))),new Error(t)}function Y(t,e){null==e&&B("The argument '{0}' is null or undefined.",t)}t.fn.extend({_aria:function(t,e){return this.attr("aria-"+t,e)},_removeAria:function(t){return this.removeAttr("aria-"+t)},_enableAria:function(t){return null==t||t?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(t){return null==t||t?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(t){return null==t||t?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(t){return t?this.attr("id",t):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var e=1===arguments.length&&t.isArray(arguments[0])?arguments[0]:arguments,n=this,i=0;i<e.length;i++){var r=new RegExp("\\{"+i+"\\}","gm");n=n.replace(r,e[i])}return n});var U=0,q="jQu3ry_5teps_St@te_",V="-t-",G="-p-",K="-h-",X="Index out of range.",Z="One or more corresponding step {0} are missing.";t.fn.steps=function(e){return t.fn.steps[e]?t.fn.steps[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.steps"):k.apply(this,arguments)},t.fn.steps.add=function(t){var e=f(this);return _(this,d(this),e,e.stepCount,t)},t.fn.steps.destroy=function(){return s(this,d(this))},t.fn.steps.finish=function(){a(this,f(this))},t.fn.steps.getCurrentIndex=function(){return f(this).currentIndex},t.fn.steps.getCurrentStep=function(){return m(this,f(this).currentIndex)},t.fn.steps.getStep=function(t){return m(this,t)},t.fn.steps.insert=function(t,e){return _(this,d(this),f(this),t,e)},t.fn.steps.next=function(){return y(this,d(this),f(this))},t.fn.steps.previous=function(){return b(this,d(this),f(this))},t.fn.steps.remove=function(t){return I(this,d(this),f(this),t)},t.fn.steps.setStep=function(){throw new Error("Not yet implemented!")},t.fn.steps.skip=function(){throw new Error("Not yet implemented!")};var Q=t.fn.steps.contentMode={html:0,iframe:1,async:2},J=t.fn.steps.stepsOrientation={horizontal:0,vertical:1},tt=t.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},et=t.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:Q.html,contentLoaded:!1},nt=t.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:J.horizontal,titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:tt.none,transitionEffectSpeed:200,onStepChanging:function(){return!0},onStepChanged:function(){},onCanceled:function(){},onFinishing:function(){return!0},onFinished:function(){},onContentLoaded:function(){},onInit:function(){},labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next",previous:"Previous",loading:"Loading ..."}}}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=t.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(e){n.settings.submitHandler&&(n.submitButton=e.target),t(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(e){function i(){var i,r;return!n.settings.submitHandler||(n.submitButton&&(i=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),r=n.settings.submitHandler.call(n,n.currentForm,e),n.submitButton&&i.remove(),void 0!==r&&r)}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){var e,n,i;return t(this[0]).is("form")?e=this.validate().form():(i=[],e=!0,n=t(this[0].form).validate(),this.each(function(){(e=n.element(this)&&e)||(i=i.concat(n.errorList))}),n.errorList=i),e},rules:function(e,n){var i,r,o,s,a,l,c=this[0];if(null!=c&&null!=c.form){if(e)switch(i=t.data(c.form,"validator").settings,r=i.rules,o=t.validator.staticRules(c),e){case"add":t.extend(o,t.validator.normalizeRule(n)),delete o.messages,r[c.name]=o,n.messages&&(i.messages[c.name]=t.extend(i.messages[c.name],n.messages));break;case"remove":return n?(l={},t.each(n.split(/\s/),function(e,n){l[n]=o[n],delete o[n],"required"===n&&t(c).removeAttr("aria-required")}),l):(delete r[c.name],o)}return s=t.validator.normalizeRules(t.extend({},t.validator.classRules(c),t.validator.attributeRules(c),t.validator.dataRules(c),t.validator.staticRules(c)),c),s.required&&(a=s.required,delete s.required,s=t.extend({required:a},s),t(c).attr("aria-required","true")),s.remote&&(a=s.remote,delete s.remote,s=t.extend(s,{remote:a})),s}}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){var n=t(e).val();return null!==n&&!!t.trim(""+n)},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:void 0===n?e:(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return n})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(e,n){var i=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===n.which&&""===this.elementValue(e)||-1!==t.inArray(n.keyCode,i)||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(i):t(e).addClass(n).removeClass(i)},unhighlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(i):t(e).removeClass(n).addClass(i)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}."),step:t.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){!this.form&&this.hasAttribute("contenteditable")&&(this.form=t(this).closest("form")[0]);var n=t.data(this.form,"validator"),i="on"+e.type.replace(/^validate/,""),r=n.settings;r[i]&&!t(this).is(r.ignore)&&r[i].call(n,this,e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.groups={};t.each(this.settings.groups,function(e,n){"string"==typeof n&&(n=n.split(/\s/)),t.each(n,function(t,n){i[n]=e})}),n=this.settings.rules,t.each(n,function(e,i){n[e]=t.validator.normalizeRule(i)}),t(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&t(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var n,i,r=this.clean(e),o=this.validationTargetFor(r),s=this,a=!0;return void 0===o?delete this.invalid[r.name]:(this.prepareElement(o),this.currentElements=t(o),i=this.groups[o.name],i&&t.each(this.groups,function(t,e){e===i&&t!==o.name&&(r=s.validationTargetFor(s.clean(s.findByName(t))))&&r.name in s.invalid&&(s.currentElements.push(r),a=s.check(r)&&a)}),n=!1!==this.check(o),a=a&&n,this.invalid[o.name]=!n,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t(e).attr("aria-invalid",!n)),a},showErrors:function(e){if(e){var n=this;t.extend(this.errorMap,e),this.errorList=t.map(this.errorMap,function(t,e){return{message:t,element:n.findByName(e)[0]}}),this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)t[e]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var i=this.name||t(this).attr("name");return!i&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=t(this).closest("form")[0]),!(i in n||!e.objectLength(t(this).rules())||(n[i]=!0,0))})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([])},reset:function(){this.resetInternals(),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n,i,r=t(e),o=e.type;return"radio"===o||"checkbox"===o?this.findByName(e.name).filter(":checked").val():"number"===o&&"undefined"!=typeof e.validity?e.validity.badInput?"NaN":r.val():(n=e.hasAttribute("contenteditable")?r.text():r.val(),"file"===o?"C:\\fakepath\\"===n.substr(0,12)?n.substr(12):(i=n.lastIndexOf("/"),i>=0?n.substr(i+1):(i=n.lastIndexOf("\\"),i>=0?n.substr(i+1):n)):"string"==typeof n?n.replace(/\r/g,""):n)},check:function(e){e=this.validationTargetFor(this.clean(e));var n,i,r,o=t(e).rules(),s=t.map(o,function(t,e){return e}).length,a=!1,l=this.elementValue(e);if("function"==typeof o.normalizer){if("string"!=typeof(l=o.normalizer.call(e,l)))throw new TypeError("The normalizer should return a string value.");delete o.normalizer}for(i in o){r={method:i,parameters:o[i]};try{if("dependency-mismatch"===(n=t.validator.methods[i].call(this,l,e,r.parameters))&&1===s){a=!0;continue}if(a=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,r),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+r.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+r.method+"' method."),t}}if(!a)return this.objectLength(o)&&this.successList.push(e),!0},customDataMessage:function(e,n){return t(e).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,n){"string"==typeof n&&(n={method:n});var i=this.findDefined(this.customMessage(e.name,n.method),this.customDataMessage(e,n.method),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),r=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,n.parameters,e):r.test(i)&&(i=t.validator.format(i.replace(r,"{$1}"),n.parameters)),i},formatAndAdd:function(t,e){var n=this.defaultMessage(t,e);this.errorList.push({message:n,element:t,method:e.method}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,n;for(t=0;this.errorList[t];t++)n=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var i,r,o,s,a=this.errorsFor(e),l=this.idOrName(e),c=t(e).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(n)):(a=t("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(n||""),i=a,this.settings.wrapper&&(i=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,t(e)):i.insertAfter(e),a.is("label")?a.attr("for",l):0===a.parents("label[for='"+this.escapeCssMeta(l)+"']").length&&(o=a.attr("id"),c?c.match(new RegExp("\\b"+this.escapeCssMeta(o)+"\\b"))||(c+=" "+o):c=o,t(e).attr("aria-describedby",c),(r=this.groups[e.name])&&(s=this,t.each(s.groups,function(e,n){n===r&&t("[name='"+s.escapeCssMeta(e)+"']",s.currentForm).attr("aria-describedby",a.attr("id"))})))),!n&&this.settings.success&&(a.text(""),
"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,e)),this.toShow=this.toShow.add(a)},errorsFor:function(e){var n=this.escapeCssMeta(this.idOrName(e)),i=t(e).attr("aria-describedby"),r="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(r=r+", #"+this.escapeCssMeta(i).replace(/\s+/g,", #")),this.errors().filter(r)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{"boolean":function(t){return t},string:function(e,n){return!!t(e,n.form).length},"function":function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,t(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t(e).removeClass(this.settings.pendingClass),n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,n){return n="string"==typeof n&&n||"remote",t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:n})})},destroy:function(){this.resetForm(),t(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},i=t(e).attr("class");return i&&t.each(i.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},normalizeAttributeRule:function(t,e,n,i){/min|max|step/.test(n)&&(null===e||/number|range|text/.test(e))&&(i=Number(i),isNaN(i)&&(i=void 0)),i||0===i?t[n]=i:e===n&&"range"!==e&&(t[n]=!0)},attributeRules:function(e){var n,i,r={},o=t(e),s=e.getAttribute("type");for(n in t.validator.methods)"required"===n?(i=e.getAttribute(n),""===i&&(i=!0),i=!!i):i=o.attr(n),this.normalizeAttributeRule(r,s,n,i);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(e){var n,i,r={},o=t(e),s=e.getAttribute("type");for(n in t.validator.methods)i=o.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),this.normalizeAttributeRule(r,s,n,i);return r},staticRules:function(e){var n={},i=t.data(e.form,"validator");return i.settings.rules&&(n=t.validator.normalizeRule(i.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(i,r){if(!1===r)return void delete e[i];if(r.param||r.depends){var o=!0;switch(typeof r.depends){case"string":o=!!t(r.depends,n.form).length;break;case"function":o=r.depends.call(n,n)}o?e[i]=void 0===r.param||r.param:(t.data(n.form,"validator").resetElements(t(n)),delete e[i])}}),t.each(e,function(i,r){e[i]=t.isFunction(r)&&"normalizer"!==i?r(n):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),function(){n[this]=!0}),e=n}return e},addMethod:function(e,n,i){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==i?i:t.validator.messages[e],n.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var r=t(n).val();return r&&r.length>0}return this.checkable(n)?this.getLength(e,n)>0:e.length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r>=i},maxlength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r<=i},rangelength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r>=i[0]&&r<=i[1]},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||t<=n},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},step:function(e,n,i){var r,o=t(n).attr("type"),s="Step attribute on input type "+o+" is not supported.",a=["text","number","range"],l=new RegExp("\\b"+o+"\\b"),c=o&&!l.test(a.join()),u=function(t){var e=(""+t).match(/(?:\.(\d+))?$/);return e&&e[1]?e[1].length:0},h=function(t){return Math.round(t*Math.pow(10,r))},d=!0;if(c)throw new Error(s);return r=u(i),(u(e)>r||h(e)%h(i)!=0)&&(d=!1),this.optional(n)||d},equalTo:function(e,n,i){var r=t(i);return this.settings.onfocusout&&r.not(".validate-equalTo-blur").length&&r.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){t(n).valid()}),e===r.val()},remote:function(e,n,i,r){if(this.optional(n))return"dependency-mismatch";r="string"==typeof r&&r||"remote";var o,s,a,l=this.previousValue(n,r);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),l.originalMessage=l.originalMessage||this.settings.messages[n.name][r],this.settings.messages[n.name][r]=l.message,i="string"==typeof i&&{url:i}||i,a=t.param(t.extend({data:e},i.data)),l.old===a?l.valid:(l.old=a,o=this,this.startRequest(n),s={},s[n.name]=e,t.ajax(t.extend(!0,{mode:"abort",port:"validate"+n.name,dataType:"json",data:s,context:o.currentForm,success:function(t){var i,s,a,c=!0===t||"true"===t;o.settings.messages[n.name][r]=l.originalMessage,c?(a=o.formSubmitted,o.resetInternals(),o.toHide=o.errorsFor(n),o.formSubmitted=a,o.successList.push(n),o.invalid[n.name]=!1,o.showErrors()):(i={},s=t||o.defaultMessage(n,{method:r,parameters:e}),i[n.name]=l.message=s,o.invalid[n.name]=!0,o.showErrors(i)),l.valid=c,o.stopRequest(n,c)}},i)),"pending")}}});var e,n={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,i){var r=t.port;"abort"===t.mode&&(n[r]&&n[r].abort(),n[r]=i)}):(e=t.ajax,t.ajax=function(i){var r=("mode"in i?i:t.ajaxSettings).mode,o=("port"in i?i:t.ajaxSettings).port;return"abort"===r?(n[o]&&n[o].abort(),n[o]=e.apply(this,arguments),n[o]):e.apply(this,arguments)})}),function(){var t,e,n,i,r,o,s,a,l=[].slice,c={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};s=function(){},e=function(){function t(){}return t.prototype.addEventListener=t.prototype.on,t.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},t.prototype.emit=function(){var t,e,n,i,r,o;if(i=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},n=this._callbacks[i])for(r=0,o=n.length;r<o;r++)e=n[r],e.apply(this,t);return this},t.prototype.removeListener=t.prototype.off,t.prototype.removeAllListeners=t.prototype.off,t.prototype.removeEventListener=t.prototype.off,t.prototype.off=function(t,e){var n,i,r,o;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(!(n=this._callbacks[t]))return this;if(1===arguments.length)return delete this._callbacks[t],this;for(i=r=0,o=n.length;r<o;i=++r)if(n[i]===e){n.splice(i,1);break}return this},t}(),t=function(t){function n(t,e){var r,o,s;if(this.element=t,this.version=n.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(n.instances.push(this),this.element.dropzone=this,r=null!=(s=n.optionsForElement(this.element))?s:{},this.options=i({},this.defaultOptions,r,null!=e?e:{}),this.options.forceFallback||!n.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(o=this.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=n.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=n.getElements(this.options.clickable,"clickable")),this.init()}var i,r;return u(n,t),n.prototype.Emitter=e,n.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],n.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,e){return e()},init:function(){return s},forceFallback:!1,fallback:function(){var t,e,i,r,o,s;for(this.element.className=this.element.className+" dz-browser-not-supported",s=this.element.getElementsByTagName("div"),r=0,o=s.length;r<o;r++)t=s[r],/(^| )dz-message($| )/.test(t.className)&&(e=t,t.className="dz-message");return e||(e=n.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e)),i=e.getElementsByTagName("span")[0],i&&(null!=i.textContent?i.textContent=this.options.dictFallbackMessage:null!=i.innerText&&(i.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,n,i;return e={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},n=t.width/t.height,e.optWidth=this.options.thumbnailWidth,e.optHeight=this.options.thumbnailHeight,null==e.optWidth&&null==e.optHeight?(e.optWidth=e.srcWidth,e.optHeight=e.srcHeight):null==e.optWidth?e.optWidth=n*e.optHeight:null==e.optHeight&&(e.optHeight=1/n*e.optWidth),i=e.optWidth/e.optHeight,t.height<e.optHeight||t.width<e.optWidth?(e.trgHeight=e.srcHeight,e.trgWidth=e.srcWidth):n>i?(e.srcHeight=t.height,e.srcWidth=e.srcHeight*i):(e.srcWidth=t.width,e.srcHeight=e.srcWidth/i),e.srcX=(t.width-e.srcWidth)/2,e.srcY=(t.height-e.srcHeight)/2,e},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:s,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:s,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var e,i,r,o,s,a,l,c,u,h,d,f,p;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(t.previewElement=n.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),h=t.previewElement.querySelectorAll("[data-dz-name]"),o=0,l=h.length;o<l;o++)e=h[o],e.textContent=this._renameFilename(t.name);for(d=t.previewElement.querySelectorAll("[data-dz-size]"),s=0,c=d.length;s<c;s++)e=d[s],e.innerHTML=this.filesize(t.size);for(this.options.addRemoveLinks&&(t._removeLink=n.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),t.previewElement.appendChild(t._removeLink)),i=function(e){return function(i){return i.preventDefault(),i.stopPropagation(),t.status===n.UPLOADING?n.confirm(e.options.dictCancelUploadConfirmation,function(){return e.removeFile(t)}):e.options.dictRemoveFileConfirmation?n.confirm(e.options.dictRemoveFileConfirmation,function(){return e.removeFile(t)}):e.removeFile(t)}}(this),f=t.previewElement.querySelectorAll("[data-dz-remove]"),p=[],a=0,u=f.length;a<u;a++)r=f[a],p.push(r.addEventListener("click",i));return p}},removedfile:function(t){var e;return t.previewElement&&null!=(e=t.previewElement)&&e.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){var n,i,r,o;if(t.previewElement){for(t.previewElement.classList.remove("dz-file-preview"),o=t.previewElement.querySelectorAll("[data-dz-thumbnail]"),i=0,r=o.length;i<r;i++)n=o[i],n.alt=t.name,n.src=e;return setTimeout(function(){return function(){return t.previewElement.classList.add("dz-image-preview")}}(),1)}},error:function(t,e){var n,i,r,o,s;if(t.previewElement){for(t.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error),o=t.previewElement.querySelectorAll("[data-dz-errormessage]"),s=[],i=0,r=o.length;i<r;i++)n=o[i],s.push(n.textContent=e);return s}},errormultiple:s,processing:function(t){if(t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink))return t._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:s,uploadprogress:function(t,e){var n,i,r,o,s;if(t.previewElement){for(o=t.previewElement.querySelectorAll("[data-dz-uploadprogress]"),s=[],i=0,r=o.length;i<r;i++)n=o[i],"PROGRESS"===n.nodeName?s.push(n.value=e):s.push(n.style.width=e+"%");return s}},totaluploadprogress:s,sending:s,sendingmultiple:s,success:function(t){if(t.previewElement)return t.previewElement.classList.add("dz-success")},successmultiple:s,canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:s,complete:function(t){if(t._removeLink&&(t._removeLink.textContent=this.options.dictRemoveFile),t.previewElement)return t.previewElement.classList.add("dz-complete")},completemultiple:s,maxfilesexceeded:s,maxfilesreached:s,queuecomplete:s,addedfiles:s,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},i=function(){var t,e,n,i,r,o,s;for(i=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],o=0,s=n.length;o<s;o++){e=n[o];for(t in e)r=e[t],i[t]=r}return i},n.prototype.getAcceptedFiles=function(){var t,e,n,i,r;for(i=this.files,r=[],e=0,n=i.length;e<n;e++)t=i[e],t.accepted&&r.push(t);return r},n.prototype.getRejectedFiles=function(){var t,e,n,i,r;for(i=this.files,r=[],e=0,n=i.length;e<n;e++)t=i[e],t.accepted||r.push(t);return r},n.prototype.getFilesWithStatus=function(t){var e,n,i,r,o;for(r=this.files,o=[],n=0,i=r.length;n<i;n++)e=r[n],e.status===t&&o.push(e);return o},n.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(n.QUEUED)},n.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(n.UPLOADING)},n.prototype.getAddedFiles=function(){return this.getFilesWithStatus(n.ADDED)},n.prototype.getActiveFiles=function(){var t,e,i,r,o;for(r=this.files,o=[],e=0,i=r.length;e<i;e++)t=r[e],t.status!==n.UPLOADING&&t.status!==n.QUEUED||o.push(t);return o},n.prototype.init=function(){var t,e,i,r,o,s,a;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(n.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(i=function(t){return function(){return t.hiddenFileInput&&t.hiddenFileInput.parentNode.removeChild(t.hiddenFileInput),t.hiddenFileInput=document.createElement("input"),t.hiddenFileInput.setAttribute("type","file"),(null==t.options.maxFiles||t.options.maxFiles>1)&&t.hiddenFileInput.setAttribute("multiple","multiple"),t.hiddenFileInput.className="dz-hidden-input",null!=t.options.acceptedFiles&&t.hiddenFileInput.setAttribute("accept",t.options.acceptedFiles),null!=t.options.capture&&t.hiddenFileInput.setAttribute("capture",t.options.capture),t.hiddenFileInput.style.visibility="hidden",t.hiddenFileInput.style.position="absolute",t.hiddenFileInput.style.top="0",t.hiddenFileInput.style.left="0",t.hiddenFileInput.style.height="0",t.hiddenFileInput.style.width="0",document.querySelector(t.options.hiddenInputContainer).appendChild(t.hiddenFileInput),t.hiddenFileInput.addEventListener("change",function(){var e,n,r,o;if(n=t.hiddenFileInput.files,n.length)for(r=0,o=n.length;r<o;r++)e=n[r],t.addFile(e);return t.emit("addedfiles",n),i()})}}(this))(),this.URL=null!=(s=window.URL)?s:window.webkitURL,a=this.events,r=0,o=a.length;r<o;r++)t=a[r],this.on(t,this.options[t]);return this.on("uploadprogress",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("canceled",function(t){return function(e){return t.emit("complete",e)}}(this)),this.on("complete",function(t){return function(){if(0===t.getAddedFiles().length&&0===t.getUploadingFiles().length&&0===t.getQueuedFiles().length)return setTimeout(function(){return t.emit("queuecomplete")},0)}}(this)),e=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return function(e){return t.emit("dragstart",e)}}(this),dragenter:function(t){return function(n){return e(n),t.emit("dragenter",n)}}(this),dragover:function(t){return function(n){var i;try{i=n.dataTransfer.effectAllowed}catch(t){}return n.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",e(n),t.emit("dragover",n)}}(this),dragleave:function(t){return function(e){return t.emit("dragleave",e)}}(this),drop:function(t){return function(n){return e(n),t.drop(n)}}(this),dragend:function(t){return function(e){return t.emit("dragend",e)}}(this)}}],this.clickableElements.forEach(function(t){return function(e){return t.listeners.push({element:e,events:{click:function(i){return(e!==t.element||i.target===t.element||n.elementInside(i.target,t.element.querySelector(".dz-message")))&&t.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},n.prototype.destroy=function(){var t;return this.disable(),this.removeAllFiles(!0),(null!=(t=this.hiddenFileInput)?t.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,n.instances.splice(n.instances.indexOf(this),1)},n.prototype.updateTotalUploadProgress=function(){var t,e,n,i,r,o,s,a;if(i=0,n=0,t=this.getActiveFiles(),t.length){for(a=this.getActiveFiles(),o=0,s=a.length;o<s;o++)e=a[o],i+=e.upload.bytesSent,n+=e.upload.total;r=100*i/n}else r=100;return this.emit("totaluploadprogress",r,n,i)},n.prototype._getParamName=function(t){return"function"==typeof this.options.paramName?this.options.paramName(t):this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")},n.prototype._renameFilename=function(t){return"function"!=typeof this.options.renameFilename?t:this.options.renameFilename(t)},n.prototype.getFallbackForm=function(){var t,e,i,r;return(t=this.getExistingFallback())?t:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',e=n.createElement(i),"FORM"!==this.element.tagName?(r=n.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),r.appendChild(e)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=r?r:e)},n.prototype.getExistingFallback=function(){var t,e,n,i,r,o;for(e=function(t){var e,n,i;for(n=0,i=t.length;n<i;n++)if(e=t[n],/(^| )fallback($| )/.test(e.className))return e},o=["div","form"],i=0,r=o.length;i<r;i++)if(n=o[i],t=e(this.element.getElementsByTagName(n)))return t},n.prototype.setupEventListeners=function(){var t,e,n,i,r,o,s;for(o=this.listeners,s=[],i=0,r=o.length;i<r;i++)t=o[i],s.push(function(){var i,r;i=t.events,r=[];for(e in i)n=i[e],r.push(t.element.addEventListener(e,n,!1));return r}());return s},n.prototype.removeEventListeners=function(){var t,e,n,i,r,o,s;for(o=this.listeners,s=[],i=0,r=o.length;i<r;i++)t=o[i],s.push(function(){var i,r;i=t.events,r=[];for(e in i)n=i[e],r.push(t.element.removeEventListener(e,n,!1));return r}());return s},n.prototype.disable=function(){var t,e,n,i,r;for(this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),i=this.files,r=[],e=0,n=i.length;e<n;e++)t=i[e],r.push(this.cancelUpload(t));return r},n.prototype.enable=function(){return this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()},n.prototype.filesize=function(t){var e,n,i,r,o,s,a,l;if(i=0,r="b",t>0){for(s=["TB","GB","MB","KB","b"],n=a=0,l=s.length;a<l;n=++a)if(o=s[n],e=Math.pow(this.options.filesizeBase,4-n)/10,t>=e){i=t/Math.pow(this.options.filesizeBase,4-n),r=o;break}i=Math.round(10*i)/10}return"<strong>"+i+"</strong> "+r},n.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},n.prototype.drop=function(t){var e,n;t.dataTransfer&&(this.emit("drop",t),e=t.dataTransfer.files,this.emit("addedfiles",e),e.length&&(n=t.dataTransfer.items,n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(e)))},n.prototype.paste=function(t){var e,n;if(null!=(null!=t&&null!=(n=t.clipboardData)?n.items:void 0))return this.emit("paste",t),e=t.clipboardData.items,e.length?this._addFilesFromItems(e):void 0},n.prototype.handleFiles=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(this.addFile(e));return r},n.prototype._addFilesFromItems=function(t){var e,n,i,r,o;for(o=[],i=0,r=t.length;i<r;i++)n=t[i],null!=n.webkitGetAsEntry&&(e=n.webkitGetAsEntry())?e.isFile?o.push(this.addFile(n.getAsFile())):e.isDirectory?o.push(this._addFilesFromDirectory(e,e.name)):o.push(void 0):null!=n.getAsFile&&(null==n.kind||"file"===n.kind)?o.push(this.addFile(n.getAsFile())):o.push(void 0);return o},n.prototype._addFilesFromDirectory=function(t,e){var n,i,r;return n=t.createReader(),i=function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(t):void 0},(r=function(t){return function(){return n.readEntries(function(n){var i,o,s;if(n.length>0){for(o=0,s=n.length;o<s;o++)i=n[o],i.isFile?i.file(function(n){if(!t.options.ignoreHiddenFiles||"."!==n.name.substring(0,1))return n.fullPath=e+"/"+n.name,t.addFile(n)}):i.isDirectory&&t._addFilesFromDirectory(i,e+"/"+i.name);r()}return null},i)}}(this))()},n.prototype.accept=function(t,e){return t.size>1024*this.options.maxFilesize*1024?e(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):n.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(e(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,e):e(this.options.dictInvalidFileType)},n.prototype.addFile=function(t){return t.upload={progress:0,total:t.size,bytesSent:0},this.files.push(t),t.status=n.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,function(e){return function(n){return n?(t.accepted=!1,e._errorProcessing([t],n)):(t.accepted=!0,e.options.autoQueue&&e.enqueueFile(t)),e._updateMaxFilesReachedClass()}}(this))},n.prototype.enqueueFiles=function(t){var e,n,i;for(n=0,i=t.length;n<i;n++)e=t[n],this.enqueueFile(e);return null},n.prototype.enqueueFile=function(t){if(t.status!==n.ADDED||!0!==t.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(t.status=n.QUEUED,this.options.autoProcessQueue)return setTimeout(function(t){return function(){return t.processQueue()}}(this),0)},n.prototype._thumbnailQueue=[],n.prototype._processingThumbnail=!1,n.prototype._enqueueThumbnail=function(t){if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(t),setTimeout(function(t){return function(){return t._processThumbnailQueue()}}(this),0)},n.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(t){return function(){return t._processingThumbnail=!1,t._processThumbnailQueue()}}(this))},n.prototype.removeFile=function(t){if(t.status===n.UPLOADING&&this.cancelUpload(t),this.files=a(this.files,t),this.emit("removedfile",t),0===this.files.length)return this.emit("reset")},n.prototype.removeAllFiles=function(t){var e,i,r,o;for(null==t&&(t=!1),o=this.files.slice(),i=0,r=o.length;i<r;i++)e=o[i],(e.status!==n.UPLOADING||t)&&this.removeFile(e);return null},n.prototype.createThumbnail=function(t,e){var n;return n=new FileReader,n.onload=function(i){return function(){return"image/svg+xml"===t.type?(i.emit("thumbnail",t,n.result),void(null!=e&&e())):i.createThumbnailFromUrl(t,n.result,e)}}(this),n.readAsDataURL(t)},n.prototype.createThumbnailFromUrl=function(t,e,n,i){var r;return r=document.createElement("img"),i&&(r.crossOrigin=i),r.onload=function(e){return function(){var i,s,a,l,c,u,h,d;if(t.width=r.width,t.height=r.height,
a=e.options.resize.call(e,t),null==a.trgWidth&&(a.trgWidth=a.optWidth),null==a.trgHeight&&(a.trgHeight=a.optHeight),i=document.createElement("canvas"),s=i.getContext("2d"),i.width=a.trgWidth,i.height=a.trgHeight,o(s,r,null!=(c=a.srcX)?c:0,null!=(u=a.srcY)?u:0,a.srcWidth,a.srcHeight,null!=(h=a.trgX)?h:0,null!=(d=a.trgY)?d:0,a.trgWidth,a.trgHeight),l=i.toDataURL("image/png"),e.emit("thumbnail",t,l),null!=n)return n()}}(this),null!=n&&(r.onerror=n),r.src=e},n.prototype.processQueue=function(){var t,e,n,i;if(e=this.options.parallelUploads,n=this.getUploadingFiles().length,t=n,!(n>=e)&&(i=this.getQueuedFiles(),i.length>0)){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-n));for(;t<e;){if(!i.length)return;this.processFile(i.shift()),t++}}},n.prototype.processFile=function(t){return this.processFiles([t])},n.prototype.processFiles=function(t){var e,i,r;for(i=0,r=t.length;i<r;i++)e=t[i],e.processing=!0,e.status=n.UPLOADING,this.emit("processing",e);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)},n.prototype._getFilesWithXhr=function(t){var e;return function(){var n,i,r,o;for(r=this.files,o=[],n=0,i=r.length;n<i;n++)e=r[n],e.xhr===t&&o.push(e);return o}.call(this)},n.prototype.cancelUpload=function(t){var e,i,r,o,s,a,l;if(t.status===n.UPLOADING){for(i=this._getFilesWithXhr(t.xhr),r=0,s=i.length;r<s;r++)e=i[r],e.status=n.CANCELED;for(t.xhr.abort(),o=0,a=i.length;o<a;o++)e=i[o],this.emit("canceled",e);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else(l=t.status)!==n.ADDED&&l!==n.QUEUED||(t.status=n.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));if(this.options.autoProcessQueue)return this.processQueue()},r=function(){var t,e;return e=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],"function"==typeof e?e.apply(this,t):e},n.prototype.uploadFile=function(t){return this.uploadFiles([t])},n.prototype.uploadFiles=function(t){var e,o,s,a,l,c,u,h,d,f,p,m,g,v,y,b,w,x,k,_,C,S,D,M,T,L,E,A,$,I,N,O,P,F;for(k=new XMLHttpRequest,_=0,M=t.length;_<M;_++)e=t[_],e.xhr=k;m=r(this.options.method,t),w=r(this.options.url,t),k.open(m,w,!0),k.withCredentials=!!this.options.withCredentials,y=null,s=function(n){return function(){var i,r,o;for(o=[],i=0,r=t.length;i<r;i++)e=t[i],o.push(n._errorProcessing(t,y||n.options.dictResponseError.replace("{{statusCode}}",k.status),k));return o}}(this),b=function(n){return function(i){var r,o,s,a,l,c,u,h,d;if(null!=i)for(o=100*i.loaded/i.total,s=0,c=t.length;s<c;s++)e=t[s],e.upload={progress:o,total:i.total,bytesSent:i.loaded};else{for(r=!0,o=100,a=0,u=t.length;a<u;a++)e=t[a],100===e.upload.progress&&e.upload.bytesSent===e.upload.total||(r=!1),e.upload.progress=o,e.upload.bytesSent=e.upload.total;if(r)return}for(d=[],l=0,h=t.length;l<h;l++)e=t[l],d.push(n.emit("uploadprogress",e,o,e.upload.bytesSent));return d}}(this),k.onload=function(e){return function(i){var r;if(t[0].status!==n.CANCELED&&4===k.readyState){if(y=k.responseText,k.getResponseHeader("content-type")&&~k.getResponseHeader("content-type").indexOf("application/json"))try{y=JSON.parse(y)}catch(t){i=t,y="Invalid JSON response from server."}return b(),200<=(r=k.status)&&r<300?e._finished(t,y,i):s()}}}(this),k.onerror=function(){return function(){if(t[0].status!==n.CANCELED)return s()}}(),v=null!=($=k.upload)?$:k,v.onprogress=b,c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&i(c,this.options.headers);for(a in c)(l=c[a])&&k.setRequestHeader(a,l);if(o=new FormData,this.options.params){I=this.options.params;for(p in I)x=I[p],o.append(p,x)}for(C=0,T=t.length;C<T;C++)e=t[C],this.emit("sending",e,k,o);if(this.options.uploadMultiple&&this.emit("sendingmultiple",t,k,o),"FORM"===this.element.tagName)for(N=this.element.querySelectorAll("input, textarea, select, button"),S=0,L=N.length;S<L;S++)if(h=N[S],d=h.getAttribute("name"),f=h.getAttribute("type"),"SELECT"===h.tagName&&h.hasAttribute("multiple"))for(O=h.options,D=0,E=O.length;D<E;D++)g=O[D],g.selected&&o.append(d,g.value);else(!f||"checkbox"!==(P=f.toLowerCase())&&"radio"!==P||h.checked)&&o.append(d,h.value);for(u=A=0,F=t.length-1;0<=F?A<=F:A>=F;u=0<=F?++A:--A)o.append(this._getParamName(u),t[u],this._renameFilename(t[u].name));return this.submitRequest(k,o,t)},n.prototype.submitRequest=function(t,e){return t.send(e)},n.prototype._finished=function(t,e,i){var r,o,s;for(o=0,s=t.length;o<s;o++)r=t[o],r.status=n.SUCCESS,this.emit("success",r,e,i),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("successmultiple",t,e,i),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()},n.prototype._errorProcessing=function(t,e,i){var r,o,s;for(o=0,s=t.length;o<s;o++)r=t[o],r.status=n.ERROR,this.emit("error",r,e,i),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("errormultiple",t,e,i),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()},n}(e),t.version="4.3.0",t.options={},t.optionsForElement=function(e){return e.getAttribute("id")?t.options[n(e.getAttribute("id"))]:void 0},t.instances=[],t.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},t.autoDiscover=!0,t.discover=function(){var e,n,i,r,o,s;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],e=function(t){var e,n,r,o;for(o=[],n=0,r=t.length;n<r;n++)e=t[n],/(^| )dropzone($| )/.test(e.className)?o.push(i.push(e)):o.push(void 0);return o},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),s=[],r=0,o=i.length;r<o;r++)n=i[r],!1!==t.optionsForElement(n)?s.push(new t(n)):s.push(void 0);return s},t.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],t.isBrowserSupported=function(){var e,n,i,r,o;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(o=t.blacklistedBrowsers,i=0,r=o.length;i<r;i++)n=o[i],n.test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},a=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;i<r;i++)(n=t[i])!==e&&o.push(n);return o},n=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})},t.createElement=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.childNodes[0]},t.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},t.getElement=function(t,e){var n;if("string"==typeof t?n=document.querySelector(t):null!=t.nodeType&&(n=t),null==n)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},t.getElements=function(t,e){var n,i,r,o,s,a,l;if(t instanceof Array){i=[];try{for(r=0,s=t.length;r<s;r++)n=t[r],i.push(this.getElement(n,e))}catch(t){t,i=null}}else if("string"==typeof t)for(i=[],l=document.querySelectorAll(t),o=0,a=l.length;o<a;o++)n=l[o],i.push(n);else null!=t.nodeType&&(i=[t]);if(null==i||!i.length)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return i},t.confirm=function(t,e,n){return window.confirm(t)?e():null!=n?n():void 0},t.isValidFile=function(t,e){var n,i,r,o,s;if(!e)return!0;for(e=e.split(","),i=t.type,n=i.replace(/\/.*$/,""),o=0,s=e.length;o<s;o++)if(r=e[o],r=r.trim(),"."===r.charAt(0)){if(-1!==t.name.toLowerCase().indexOf(r.toLowerCase(),t.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(n===r.replace(/\/.*$/,""))return!0}else if(i===r)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new t(this,e)})}),"undefined"!=typeof module&&null!==module?module.exports=t:window.Dropzone=t,t.ADDED="added",t.QUEUED="queued",t.ACCEPTED=t.QUEUED,t.UPLOADING="uploading",t.PROCESSING=t.UPLOADING,t.CANCELED="canceled",t.ERROR="error",t.SUCCESS="success",r=function(t){var e,n,i,r,o,s,a,l,c;for(t.naturalWidth,s=t.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=s,i=n.getContext("2d"),i.drawImage(t,0,0),r=i.getImageData(0,0,1,s).data,c=0,o=s,a=s;a>c;)e=r[4*(a-1)+3],0===e?o=a:c=a,a=o+c>>1;return l=a/s,0===l?1:l},o=function(t,e,n,i,o,s,a,l,c,u){var h;return h=r(e),t.drawImage(e,n,i,o,s,a,l,c,u/h)},i=function(t,e){var n,i,r,o,s,a,l,c,u;if(r=!1,u=!0,i=t.document,c=i.documentElement,n=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",a=i.addEventListener?"":"on",o=function(n){if("readystatechange"!==n.type||"complete"===i.readyState)return("load"===n.type?t:i)[l](a+n.type,o,!1),!r&&(r=!0)?e.call(t,n.type||n):void 0},s=function(){try{c.doScroll("left")}catch(t){return t,void setTimeout(s,50)}return o("poll")},"complete"!==i.readyState){if(i.createEventObject&&c.doScroll){try{u=!t.frameElement}catch(t){}u&&s()}return i[n](a+"DOMContentLoaded",o,!1),i[n](a+"readystatechange",o,!1),t[n](a+"load",o,!1)}},t._autoDiscoverFunction=function(){if(t.autoDiscover)return t.discover()},i(window,t._autoDiscoverFunction)}.call(this),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function($){"use strict";var func=function(){var t=function(t){return function(e){return t===e}},e=function(t,e){return t===e},n=function(t){return function(e,n){return e[t]===n[t]}},i=function(){return!0},r=function(){return!1},o=function(t){return function(){return!t.apply(t,arguments)}},s=function(t,e){return function(n){return t(n)&&e(n)}},a=function(t){return t},l=function(t,e){return function(){return t[e].apply(t,arguments)}},c=0,u=function(t){var e=++c+"";return t?t+e:e},h=function(t){var e=$(document);return{top:t.top+e.scrollTop(),left:t.left+e.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}},d=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e},f=function(t,e){return(e=e||"")+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")},p=function(t,e,n){var i;return function(){var r=this,o=arguments,s=function(){i=null,n||t.apply(r,o)},a=n&&!i;clearTimeout(i),i=setTimeout(s,e),a&&t.apply(r,o)}};return{eq:t,eq2:e,peq2:n,ok:i,fail:r,self:a,not:o,and:s,invoke:l,uniqueId:u,rect2bnd:h,invertObject:d,namespaceToCamel:f,debounce:p}}(),list=function(){var t=function(t){return t[0]},e=function(t){return t[t.length-1]},n=function(t){return t.slice(0,t.length-1)},i=function(t){return t.slice(1)},r=function(t,e){for(var n=0,i=t.length;i>n;n++){var r=t[n];if(e(r))return r}},o=function(t,e){for(var n=0,i=t.length;i>n;n++)if(!e(t[n]))return!1;return!0},s=function(t,e){return $.inArray(e,t)},a=function(t,e){return-1!==s(t,e)},l=function(t,e){return e=e||func.self,t.reduce(function(t,n){return t+e(n)},0)},c=function(t){for(var e=[],n=-1,i=t.length;++n<i;)e[n]=t[n];return e},u=function(t){return!t||!t.length},h=function(n,r){return n.length?i(n).reduce(function(t,n){var i=e(t);return r(e(i),n)?i[i.length]=n:t[t.length]=[n],t},[[t(n)]]):[]},d=function(t){for(var e=[],n=0,i=t.length;i>n;n++)t[n]&&e.push(t[n]);return e},f=function(t){for(var e=[],n=0,i=t.length;i>n;n++)a(e,t[n])||e.push(t[n]);return e},p=function(t,e){var n=s(t,e);return-1===n?null:t[n+1]};return{head:t,last:e,initial:n,tail:i,prev:function(t,e){var n=s(t,e);return-1===n?null:t[n-1]},next:p,find:r,contains:a,all:o,sum:l,from:c,isEmpty:u,clusterBy:h,compact:d,unique:f}}(),isSupportAmd="function"==typeof define&&define.amd,isFontInstalled=function(t){var e="Comic Sans MS"===t?"Courier New":"Comic Sans MS",n=$("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),i=n.css("fontFamily",e).width(),r=n.css("fontFamily",t+","+e).width();return n.remove(),i!==r},userAgent=navigator.userAgent,isMSIE=/MSIE|Trident/i.test(userAgent),browserVersion;if(isMSIE){var matches=/MSIE (\d+[.]\d+)/.exec(userAgent);matches&&(browserVersion=parseFloat(matches[1])),(matches=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(userAgent))&&(browserVersion=parseFloat(matches[1]))}var isEdge=/Edge\/\d+/.test(userAgent),hasCodeMirror=!!window.CodeMirror;if(!hasCodeMirror&&isSupportAmd&&"undefined"!=typeof require)if("undefined"!=typeof require.resolve)try{require.resolve("codemirror"),hasCodeMirror=!0}catch(t){}else"undefined"!=typeof eval("require").specified&&(hasCodeMirror=eval("require").specified("codemirror"));var agent={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:isMSIE,isEdge:isEdge,isFF:!isEdge&&/firefox/i.test(userAgent),isPhantom:/PhantomJS/i.test(userAgent),isWebkit:!isEdge&&/webkit/i.test(userAgent),isChrome:!isEdge&&/chrome/i.test(userAgent),isSafari:!isEdge&&/safari/i.test(userAgent),browserVersion:browserVersion,jqueryVersion:parseFloat($.fn.jquery),isSupportAmd:isSupportAmd,hasCodeMirror:hasCodeMirror,isFontInstalled:isFontInstalled,isW3CRangeSupport:!!document.createRange},NBSP_CHAR=String.fromCharCode(160),ZERO_WIDTH_NBSP_CHAR="\ufeff",dom=function(){var t=function(t){return t&&$(t).hasClass("note-editable")},e=function(t){return t&&$(t).hasClass("note-control-sizing")},n=function(t){return t=t.toUpperCase(),function(e){return e&&e.nodeName.toUpperCase()===t}},i=function(t){return t&&3===t.nodeType},r=function(t){return t&&1===t.nodeType},o=function(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(t.nodeName.toUpperCase())},s=function(e){return!t(e)&&(e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase()))},a=function(t){return t&&/^H[1-7]/.test(t.nodeName.toUpperCase())},l=n("PRE"),c=n("LI"),u=function(t){return s(t)&&!c(t)},h=n("TABLE"),d=n("DATA"),f=function(t){return!(y(t)||p(t)||m(t)||s(t)||h(t)||v(t)||d(t))},p=function(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())},m=n("HR"),g=function(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())},v=n("BLOCKQUOTE"),y=function(e){return g(e)||v(e)||t(e)},b=n("A"),w=function(t){return f(t)&&!!L(t,s)},x=function(t){return f(t)&&!L(t,s)},k=n("BODY"),_=function(t,e){return t.nextSibling===e||t.previousSibling===e},C=function(t,e){e=e||func.ok;var n=[];return t.previousSibling&&e(t.previousSibling)&&n.push(t.previousSibling),n.push(t),t.nextSibling&&e(t.nextSibling)&&n.push(t.nextSibling),n},S=agent.isMSIE&&agent.browserVersion<11?"&nbsp;":"<br>",D=function(t){return i(t)?t.nodeValue.length:t?t.childNodes.length:0},M=function(t){var e=D(t);return 0===e||(!i(t)&&1===e&&t.innerHTML===S||!(!list.all(t.childNodes,i)||""!==t.innerHTML))},T=function(t){o(t)||D(t)||(t.innerHTML=S)},L=function(e,n){for(;e;){if(n(e))return e;if(t(e))break;e=e.parentNode}return null},E=function(e,n){for(e=e.parentNode;e&&1===D(e);){if(n(e))return e;if(t(e))break;e=e.parentNode}return null},A=function(e,n){n=n||func.fail;var i=[];return L(e,function(e){return t(e)||i.push(e),n(e)}),i},I=function(t,e){var n=A(t);return list.last(n.filter(e))},N=function(t,e){for(var n=A(t),i=e;i;i=i.parentNode)if($.inArray(i,n)>-1)return i;return null},O=function(t,e){e=e||func.fail;for(var n=[];t&&!e(t);)n.push(t),t=t.previousSibling;return n},P=function(t,e){e=e||func.fail;for(var n=[];t&&!e(t);)n.push(t),t=t.nextSibling;return n},F=function(t,e){var n=[];return e=e||func.ok,function i(r){t!==r&&e(r)&&n.push(r);for(var o=0,s=r.childNodes.length;s>o;o++)i(r.childNodes[o])}(t),n},H=function(t,e){var n=t.parentNode,i=$("<"+e+">")[0];return n.insertBefore(i,t),i.appendChild(t),i},z=function(t,e){var n=e.nextSibling,i=e.parentNode;return n?i.insertBefore(t,n):i.appendChild(t),t},R=function(t,e){return $.each(e,function(e,n){t.appendChild(n)}),t},j=function(t){return 0===t.offset},W=function(t){return t.offset===D(t.node)},B=function(t){return j(t)||W(t)},Y=function(t,e){for(;t&&t!==e;){if(0!==G(t))return!1;t=t.parentNode}return!0},U=function(t,e){if(!e)return!1;for(;t&&t!==e;){if(G(t)!==D(t.parentNode)-1)return!1;t=t.parentNode}return!0},q=function(t,e){return j(t)&&Y(t.node,e)},V=function(t,e){return W(t)&&U(t.node,e)},G=function(t){for(var e=0;t=t.previousSibling;)e+=1;return e},K=function(t){return!!(t&&t.childNodes&&t.childNodes.length)},X=function(e,n){var i,r;if(0===e.offset){if(t(e.node))return null;i=e.node.parentNode,r=G(e.node)}else K(e.node)?(i=e.node.childNodes[e.offset-1],r=D(i)):(i=e.node,r=n?0:e.offset-1);return{node:i,offset:r}},Z=function(e,n){var i,r;if(D(e.node)===e.offset){if(t(e.node))return null;i=e.node.parentNode,r=G(e.node)+1}else K(e.node)?(i=e.node.childNodes[e.offset],r=0):(i=e.node,r=n?D(e.node):e.offset+1);return{node:i,offset:r}},Q=function(t,e){return t.node===e.node&&t.offset===e.offset},J=function(t){if(i(t.node)||!K(t.node)||M(t.node))return!0;var e=t.node.childNodes[t.offset-1],n=t.node.childNodes[t.offset];return!(e&&!o(e)||n&&!o(n))},tt=function(t,e){for(;t;){if(e(t))return t;t=X(t)}return null},et=function(t,e){for(;t;){if(e(t))return t;t=Z(t)}return null},nt=function(t){if(!i(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==NBSP_CHAR},it=function(t,e,n,i){for(var r=t;r&&(n(r),!Q(r,e));){var o=i&&t.node!==r.node&&e.node!==r.node;r=Z(r,o)}},rt=function(t,e){return A(e,func.eq(t)).map(G).reverse()},ot=function(t,e){for(var n=t,i=0,r=e.length;r>i;i++)n=n.childNodes.length<=e[i]?n.childNodes[n.childNodes.length-1]:n.childNodes[e[i]];return n},st=function(t,e){var n=e&&e.isSkipPaddingBlankHTML,r=e&&e.isNotSplitEdgePoint;if(B(t)&&(i(t.node)||r)){if(j(t))return t.node;if(W(t))return t.node.nextSibling}if(i(t.node))return t.node.splitText(t.offset);var o=t.node.childNodes[t.offset],s=z(t.node.cloneNode(!1),t.node);return R(s,P(o)),n||(T(t.node),T(s)),s},at=function(t,e,n){var i=A(e.node,func.eq(t));return i.length?1===i.length?st(e,n):i.reduce(function(t,i){return t===e.node&&(t=st(e,n)),st({node:i,offset:t?dom.position(t):D(i)},n)}):null},lt=function(t,e){var n,i,r=e?s:y,o=A(t.node,r),a=list.last(o)||t.node;r(a)?(n=o[o.length-2],i=a):(n=a,i=n.parentNode);var l=n&&at(n,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return l||i!==t.node||(l=t.node.childNodes[t.offset]),{rightNode:l,container:i}},ct=function(t){return document.createElement(t)},ut=function(t){return document.createTextNode(t)},ht=function(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var n=t.parentNode;if(!e){var i,r,o=[];for(i=0,r=t.childNodes.length;r>i;i++)o.push(t.childNodes[i]);for(i=0,r=o.length;r>i;i++)n.insertBefore(o[i],t)}n.removeChild(t)}},dt=function(e,n){for(;e&&!t(e)&&n(e);){var i=e.parentNode;ht(e),e=i}},ft=function(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var n=ct(e);return t.style.cssText&&(n.style.cssText=t.style.cssText),R(n,list.from(t.childNodes)),z(n,t),ht(t),n},pt=n("TEXTAREA"),mt=function(t,e){var n=pt(t[0])?t.val():t.html();return e?n.replace(/[\n\r]/g,""):n},gt=function(t,e){var n=mt(t);if(e){var i=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;n=n.replace(i,function(t,e,n){n=n.toUpperCase();var i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!e,r=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return t+(i||r?"\n":"")}),n=$.trim(n)}return n},vt=function(t){var e=$(t),n=e.offset(),i=e.outerHeight(!0);return{left:n.left,top:n.top+i}},yt=function(t,e){Object.keys(e).forEach(function(n){t.on(n,e[n])})},bt=function(t,e){Object.keys(e).forEach(function(n){t.off(n,e[n])})};return{NBSP_CHAR:NBSP_CHAR,ZERO_WIDTH_NBSP_CHAR:ZERO_WIDTH_NBSP_CHAR,blank:S,emptyPara:"<p>"+S+"</p>",makePredByNodeName:n,isEditable:t,isControlSizing:e,isText:i,isElement:r,isVoid:o,isPara:s,isPurePara:u,isHeading:a,isInline:f,isBlock:func.not(f),isBodyInline:x,isBody:k,isParaInline:w,isPre:l,isList:p,isTable:h,isData:d,isCell:g,isBlockquote:v,isBodyContainer:y,isAnchor:b,isDiv:n("DIV"),isLi:c,isBR:n("BR"),isSpan:n("SPAN"),isB:n("B"),isU:n("U"),isS:n("S"),isI:n("I"),isImg:n("IMG"),isTextarea:pt,isEmpty:M,isEmptyAnchor:func.and(b,M),isClosestSibling:_,withClosestSiblings:C,nodeLength:D,isLeftEdgePoint:j,isRightEdgePoint:W,isEdgePoint:B,isLeftEdgeOf:Y,isRightEdgeOf:U,isLeftEdgePointOf:q,isRightEdgePointOf:V,prevPoint:X,nextPoint:Z,isSamePoint:Q,isVisiblePoint:J,prevPointUntil:tt,nextPointUntil:et,isCharPoint:nt,walkPoint:it,ancestor:L,singleChildAncestor:E,listAncestor:A,lastAncestor:I,listNext:P,listPrev:O,listDescendant:F,commonAncestor:N,wrap:H,insertAfter:z,appendChildNodes:R,position:G,hasChildren:K,makeOffsetPath:rt,fromOffsetPath:ot,splitTree:at,splitPoint:lt,create:ct,createText:ut,remove:ht,removeWhile:dt,replace:ft,html:gt,value:mt,posFromPlaceholder:vt,attachEvents:yt,detachEvents:bt}}(),Context=function(t,e){var n=this,i=$.summernote.ui;return this.memos={},this.modules={},this.layoutInfo={},this.options=e,this.initialize=function(){return this.layoutInfo=i.createLayout(t,e),this._initialize(),t.hide(),this},this.destroy=function(){this._destroy(),t.removeData("summernote"),i.removeLayout(t,this.layoutInfo)},this.reset=function(){var t=n.isDisabled();this.code(dom.emptyPara),this._destroy(),this._initialize(),t&&n.disable()},this._initialize=function(){var t=$.extend({},this.options.buttons);Object.keys(t).forEach(function(e){n.memo("button."+e,t[e])});var e=$.extend({},this.options.modules,$.summernote.plugins||{});Object.keys(e).forEach(function(t){n.module(t,e[t],!0)}),Object.keys(this.modules).forEach(function(t){n.initializeModule(t)})},this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(t){n.removeModule(t)}),Object.keys(this.memos).forEach(function(t){n.removeMemo(t)})},this.code=function(e){var n=this.invoke("codeview.isActivated");return void 0===e?(this.invoke("codeview.sync"),n?this.layoutInfo.codable.val():this.layoutInfo.editable.html()):(n?this.layoutInfo.codable.val(e):this.layoutInfo.editable.html(e),t.val(e),void this.triggerEvent("change",e))},this.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},this.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0)},this.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0)},this.triggerEvent=function(){var e=list.head(arguments),n=list.tail(list.from(arguments)),i=this.options.callbacks[func.namespaceToCamel(e,"on")];i&&i.apply(t[0],n),t.trigger("summernote."+e,n)},this.initializeModule=function(e){var n=this.modules[e];n.shouldInitialize=n.shouldInitialize||func.ok,n.shouldInitialize()&&(n.initialize&&n.initialize(),n.events&&dom.attachEvents(t,n.events))},this.module=function(t,e,n){return 1===arguments.length?this.modules[t]:(this.modules[t]=new e(this),void(n||this.initializeModule(t)))},this.removeModule=function(e){var n=this.modules[e];n.shouldInitialize()&&(n.events&&dom.detachEvents(t,n.events),n.destroy&&n.destroy()),delete this.modules[e]},this.memo=function(t,e){return 1===arguments.length?this.memos[t]:void(this.memos[t]=e)},this.removeMemo=function(t){this.memos[t]&&this.memos[t].destroy&&this.memos[t].destroy(),delete this.memos[t]},this.createInvokeHandler=function(t,e){return function(i){i.preventDefault(),n.invoke(t,e||$(i.target).closest("[data-value]").data("value"))}},this.invoke=function(){var t=list.head(arguments),e=list.tail(list.from(arguments)),n=t.split("."),i=n.length>1,r=i&&list.head(n),o=i?list.last(n):list.head(n),s=this.modules[r||"editor"];return!r&&this[o]?this[o].apply(this,e):s&&s[o]&&s.shouldInitialize()?s[o].apply(s,e):void 0},this.initialize()};$.fn.extend({summernote:function(){var t=$.type(list.head(arguments)),e="string"===t,n="object"===t,i=n?list.head(arguments):{};i=$.extend({},$.summernote.options,i),i.langInfo=$.extend(!0,{},$.summernote.lang["en-US"],$.summernote.lang[i.lang]),i.icons=$.extend(!0,{},$.summernote.options.icons,i.icons),this.each(function(t,e){var n=$(e);if(!n.data("summernote")){var r=new Context(n,i);n.data("summernote",r),n.data("summernote").triggerEvent("init",r.layoutInfo)}});var r=this.first();if(r.length){var o=r.data("summernote");if(e)return o.invoke.apply(o,list.from(arguments));i.focus&&o.invoke("editor.focus")}return this}});var Renderer=function(t,e,n,i){this.render=function(r){var o=$(t);if(n&&n.contents&&o.html(n.contents),n&&n.className&&o.addClass(n.className),n&&n.data&&$.each(n.data,function(t,e){o.attr("data-"+t,e)}),n&&n.click&&o.on("click",n.click),e){var s=o.find(".note-children-container");e.forEach(function(t){t.render(s.length?s:o)})}return i&&i(o,n),n&&n.callback&&n.callback(o),r&&r.append(o),o}},renderer={create:function(t,e){return function(){var n=$.isArray(arguments[0])?arguments[0]:[],i="object"==typeof arguments[1]?arguments[1]:arguments[0];return i&&i.children&&(n=i.children),new Renderer(t,n,i,e)}}},editor=renderer.create('<div class="note-editor note-frame panel panel-default"/>'),toolbar=renderer.create('<div class="note-toolbar panel-heading"/>'),editingArea=renderer.create('<div class="note-editing-area"/>'),codable=renderer.create('<textarea class="note-codable"/>'),editable=renderer.create('<div class="note-editable panel-body" contentEditable="true"/>'),statusbar=renderer.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),airEditor=renderer.create('<div class="note-editor"/>'),airEditable=renderer.create('<div class="note-editable" contentEditable="true"/>'),buttonGroup=renderer.create('<div class="note-btn-group btn-group">'),button=renderer.create('<button type="button" class="note-btn btn btn-default btn-sm" tabindex="-1">',function(t,e){e&&e.tooltip&&t.attr({title:e.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}),dropdown=renderer.create('<div class="dropdown-menu">',function(t,e){var n=$.isArray(e.items)?e.items.map(function(t){return'<li><a href="#" data-value="'+("string"==typeof t?t:t.value||"")+'">'+(e.template?e.template(t):t)+"</a></li>"}).join(""):e.items;t.html(n)}),dropdownCheck=renderer.create('<div class="dropdown-menu note-check">',function(t,e){var n=$.isArray(e.items)?e.items.map(function(t){var n="string"==typeof t?t:t.value||"",i=e.template?e.template(t):t;return'<li><a href="#" data-value="'+n+'">'+icon(e.checkClassName)+" "+i+"</a></li>"}).join(""):e.items;t.html(n)}),palette=renderer.create('<div class="note-color-palette"/>',function(t,e){for(var n=[],i=0,r=e.colors.length;r>i;i++){for(var o=e.eventName,s=e.colors[i],a=[],l=0,c=s.length;c>l;l++){var u=s[l];a.push(['<button type="button" class="note-color-btn"','style="background-color:',u,'" ','data-event="',o,'" ','data-value="',u,'" ','title="',u,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}n.push('<div class="note-color-row">'+a.join("")+"</div>")}t.html(n.join("")),t.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})}),dialog=renderer.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(t,e){e.fade&&t.addClass("fade"),t.html(['<div class="modal-dialog">','  <div class="modal-content">',e.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>      <h4 class="modal-title">'+e.title+"</h4>    </div>":"",'    <div class="modal-body">'+e.body+"</div>",e.footer?'    <div class="modal-footer">'+e.footer+"</div>":"","  </div>","</div>"].join(""))}),popover=renderer.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(t,e){var n="undefined"!=typeof e.direction?e.direction:"bottom";t.addClass(n),e.hideArrow&&t.find(".arrow").hide()}),icon=function(t,e){return"<"+(e=e||"i")+' class="'+t+'"/>'},ui={editor:editor,toolbar:toolbar,editingArea:editingArea,codable:codable,editable:editable,statusbar:statusbar,airEditor:airEditor,airEditable:airEditable,buttonGroup:buttonGroup,button:button,dropdown:dropdown,dropdownCheck:dropdownCheck,palette:palette,dialog:dialog,popover:popover,icon:icon,toggleBtn:function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},toggleBtnActive:function(t,e){t.toggleClass("active",e)},onDialogShown:function(t,e){t.one("shown.bs.modal",e)},onDialogHidden:function(t,e){t.one("hidden.bs.modal",e)},showDialog:function(t){t.modal("show")},hideDialog:function(t){t.modal("hide")},createLayout:function(t,e){var n=(e.airMode?ui.airEditor([ui.editingArea([ui.airEditable()])]):ui.editor([ui.toolbar(),ui.editingArea([ui.codable(),ui.editable()]),ui.statusbar()])).render();return n.insertAfter(t),{note:t,editor:n,toolbar:n.find(".note-toolbar"),editingArea:n.find(".note-editing-area"),editable:n.find(".note-editable"),codable:n.find(".note-codable"),statusbar:n.find(".note-statusbar")}},removeLayout:function(t,e){t.html(e.editable.html()),e.editor.remove(),t.show()}};$.summernote=$.summernote||{lang:{}},$.extend($.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var key=function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(e){
return list.contains([t.BACKSPACE,t.TAB,t.ENTER,t.SPACE],e)},isMove:function(e){return list.contains([t.LEFT,t.UP,t.RIGHT,t.DOWN],e)},nameFromCode:func.invertObject(t),code:t}}(),range=function(){var t=function(t,e){var n,i,r=t.parentElement(),o=document.body.createTextRange(),s=list.from(r.childNodes);for(n=0;n<s.length;n++)if(!dom.isText(s[n])){if(o.moveToElementText(s[n]),o.compareEndPoints("StartToStart",t)>=0)break;i=s[n]}if(0!==n&&dom.isText(s[n-1])){var a=document.body.createTextRange(),l=null;a.moveToElementText(i||r),a.collapse(!i),l=i?i.nextSibling:r.firstChild;var c=t.duplicate();c.setEndPoint("StartToStart",a);for(var u=c.text.replace(/[\r\n]/g,"").length;u>l.nodeValue.length&&l.nextSibling;)u-=l.nodeValue.length,l=l.nextSibling;l.nodeValue,e&&l.nextSibling&&dom.isText(l.nextSibling)&&u===l.nodeValue.length&&(u-=l.nodeValue.length,l=l.nextSibling),r=l,n=u}return{cont:r,offset:n}},e=function(t){var e=function(t,n){var i,r;if(dom.isText(t)){var o=dom.listPrev(t,func.not(dom.isText)),s=list.last(o).previousSibling;i=s||t.parentNode,n+=list.sum(list.tail(o),dom.nodeLength),r=!s}else{if(i=t.childNodes[n]||t,dom.isText(i))return e(i,0);n=0,r=!1}return{node:i,collapseToStart:r,offset:n}},n=document.body.createTextRange(),i=e(t.node,t.offset);return n.moveToElementText(i.node),n.collapse(i.collapseToStart),n.moveStart("character",i.offset),n},n=function(t,i,r,o){this.sc=t,this.so=i,this.ec=r,this.eo=o;var s=function(){if(agent.isW3CRangeSupport){var n=document.createRange();return n.setStart(t,i),n.setEnd(r,o),n}var s=e({node:t,offset:i});return s.setEndPoint("EndToEnd",e({node:r,offset:o})),s};this.getPoints=function(){return{sc:t,so:i,ec:r,eo:o}},this.getStartPoint=function(){return{node:t,offset:i}},this.getEndPoint=function(){return{node:r,offset:o}},this.select=function(){var t=s();if(agent.isW3CRangeSupport){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},this.scrollIntoView=function(t){var e=$(t).height();return t.scrollTop+e<this.sc.offsetTop&&(t.scrollTop+=Math.abs(t.scrollTop+e-this.sc.offsetTop)),this},this.normalize=function(){var t=function(t,e){if(dom.isVisiblePoint(t)&&!dom.isEdgePoint(t)||dom.isVisiblePoint(t)&&dom.isRightEdgePoint(t)&&!e||dom.isVisiblePoint(t)&&dom.isLeftEdgePoint(t)&&e||dom.isVisiblePoint(t)&&dom.isBlock(t.node)&&dom.isEmpty(t.node))return t;var n=dom.ancestor(t.node,dom.isBlock);if((dom.isLeftEdgePointOf(t,n)||dom.isVoid(dom.prevPoint(t).node))&&!e||(dom.isRightEdgePointOf(t,n)||dom.isVoid(dom.nextPoint(t).node))&&e){if(dom.isVisiblePoint(t))return t;e=!e}return(e?dom.nextPointUntil(dom.nextPoint(t),dom.isVisiblePoint):dom.prevPointUntil(dom.prevPoint(t),dom.isVisiblePoint))||t},e=t(this.getEndPoint(),!1),i=this.isCollapsed()?e:t(this.getStartPoint(),!0);return new n(i.node,i.offset,e.node,e.offset)},this.nodes=function(t,e){t=t||func.ok;var n=e&&e.includeAncestor,i=e&&e.fullyContains,r=this.getStartPoint(),o=this.getEndPoint(),s=[],a=[];return dom.walkPoint(r,o,function(e){if(!dom.isEditable(e.node)){var r;i?(dom.isLeftEdgePoint(e)&&a.push(e.node),dom.isRightEdgePoint(e)&&list.contains(a,e.node)&&(r=e.node)):r=n?dom.ancestor(e.node,t):e.node,r&&t(r)&&s.push(r)}},!0),list.unique(s)},this.commonAncestor=function(){return dom.commonAncestor(t,r)},this.expand=function(e){var s=dom.ancestor(t,e),a=dom.ancestor(r,e);if(!s&&!a)return new n(t,i,r,o);var l=this.getPoints();return s&&(l.sc=s,l.so=0),a&&(l.ec=a,l.eo=dom.nodeLength(a)),new n(l.sc,l.so,l.ec,l.eo)},this.collapse=function(e){return e?new n(t,i,t,i):new n(r,o,r,o)},this.splitText=function(){var e=t===r,s=this.getPoints();return dom.isText(r)&&!dom.isEdgePoint(this.getEndPoint())&&r.splitText(o),dom.isText(t)&&!dom.isEdgePoint(this.getStartPoint())&&(s.sc=t.splitText(i),s.so=0,e&&(s.ec=s.sc,s.eo=o-i)),new n(s.sc,s.so,s.ec,s.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var t=this.splitText(),e=t.nodes(null,{fullyContains:!0}),i=dom.prevPointUntil(t.getStartPoint(),function(t){return!list.contains(e,t.node)}),r=[];return $.each(e,function(t,e){var n=e.parentNode;i.node!==n&&1===dom.nodeLength(n)&&r.push(n),dom.remove(e,!1)}),$.each(r,function(t,e){dom.remove(e,!1)}),new n(i.node,i.offset,i.node,i.offset).normalize()};var a=function(e){return function(){var n=dom.ancestor(t,e);return!!n&&n===dom.ancestor(r,e)}};this.isOnEditable=a(dom.isEditable),this.isOnList=a(dom.isList),this.isOnAnchor=a(dom.isAnchor),this.isOnCell=a(dom.isCell),this.isOnData=a(dom.isData),this.isLeftEdgeOf=function(t){if(!dom.isLeftEdgePoint(this.getStartPoint()))return!1;var e=dom.ancestor(this.sc,t);return e&&dom.isLeftEdgeOf(this.sc,e)},this.isCollapsed=function(){return t===r&&i===o},this.wrapBodyInlineWithPara=function(){if(dom.isBodyContainer(t)&&dom.isEmpty(t))return t.innerHTML=dom.emptyPara,new n(t.firstChild,0,t.firstChild,0);var e=this.normalize();if(dom.isParaInline(t)||dom.isPara(t))return e;var i;if(dom.isInline(e.sc)){var r=dom.listAncestor(e.sc,func.not(dom.isInline));i=list.last(r),dom.isInline(i)||(i=r[r.length-2]||e.sc.childNodes[e.so])}else i=e.sc.childNodes[e.so>0?e.so-1:0];var o=dom.listPrev(i,dom.isParaInline).reverse();if(o=o.concat(dom.listNext(i.nextSibling,dom.isParaInline)),o.length){var s=dom.wrap(list.head(o),"p");dom.appendChildNodes(s,list.tail(o))}return this.normalize()},this.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),n=dom.splitPoint(e.getStartPoint(),dom.isInline(t));return n.rightNode?n.rightNode.parentNode.insertBefore(t,n.rightNode):n.container.appendChild(t),t},this.pasteHTML=function(t){var e=$("<div></div>").html(t)[0],n=list.from(e.childNodes),i=this.wrapBodyInlineWithPara().deleteContents();return n.reverse().map(function(t){return i.insertNode(t)}).reverse()},this.toString=function(){var t=s();return agent.isW3CRangeSupport?t.toString():t.text},this.getWordRange=function(t){var e=this.getEndPoint();if(!dom.isCharPoint(e))return this;var i=dom.prevPointUntil(e,function(t){return!dom.isCharPoint(t)});return t&&(e=dom.nextPointUntil(e,function(t){return!dom.isCharPoint(t)})),new n(i.node,i.offset,e.node,e.offset)},this.bookmark=function(e){return{s:{path:dom.makeOffsetPath(e,t),offset:i},e:{path:dom.makeOffsetPath(e,r),offset:o}}},this.paraBookmark=function(e){return{s:{path:list.tail(dom.makeOffsetPath(list.head(e),t)),offset:i},e:{path:list.tail(dom.makeOffsetPath(list.last(e),r)),offset:o}}},this.getClientRects=function(){return s().getClientRects()}};return{create:function(t,e,i,r){if(4===arguments.length)return new n(t,e,i,r);if(2===arguments.length)return i=t,r=e,new n(t,e,i,r);var o=this.createFromSelection();return o||1!==arguments.length?o:(o=this.createFromNode(arguments[0]),o.collapse(dom.emptyPara===arguments[0].innerHTML))},createFromSelection:function(){var e,i,r,o;if(agent.isW3CRangeSupport){var s=document.getSelection();if(!s||0===s.rangeCount)return null;if(dom.isBody(s.anchorNode))return null;var a=s.getRangeAt(0);e=a.startContainer,i=a.startOffset,r=a.endContainer,o=a.endOffset}else{var l=document.selection.createRange(),c=l.duplicate();c.collapse(!1);var u=l;u.collapse(!0);var h=t(u,!0),d=t(c,!1);dom.isText(h.node)&&dom.isLeftEdgePoint(h)&&dom.isTextNode(d.node)&&dom.isRightEdgePoint(d)&&d.node.nextSibling===h.node&&(h=d),e=h.cont,i=h.offset,r=d.cont,o=d.offset}return new n(e,i,r,o)},createFromNode:function(t){var e=t,n=0,i=t,r=dom.nodeLength(i);return dom.isVoid(e)&&(n=dom.listPrev(e).length-1,e=e.parentNode),dom.isBR(i)?(r=dom.listPrev(i).length-1,i=i.parentNode):dom.isVoid(i)&&(r=dom.listPrev(i).length,i=i.parentNode),this.create(e,n,i,r)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(!0)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var i=dom.fromOffsetPath(t,e.s.path),r=e.s.offset,o=dom.fromOffsetPath(t,e.e.path),s=e.e.offset;return new n(i,r,o,s)},createFromParaBookmark:function(t,e){var i=t.s.offset,r=t.e.offset,o=dom.fromOffsetPath(list.head(e),t.s.path),s=dom.fromOffsetPath(list.last(e),t.e.path);return new n(o,i,s,r)}}}(),async=function(){return{readFileAsDataURL:function(t){return $.Deferred(function(e){$.extend(new FileReader,{onload:function(t){var n=t.target.result;e.resolve(n)},onerror:function(){e.reject(this)}}).readAsDataURL(t)}).promise()},createImage:function(t){return $.Deferred(function(e){var n=$("<img>");n.one("load",function(){n.off("error abort"),e.resolve(n)}).one("error abort",function(){n.off("load").detach(),e.reject(n)}).css({display:"none"}).appendTo(document.body).attr("src",t)}).promise()}}}(),History=function(t){var e=[],n=-1,i=t[0],r=function(){var e=range.create(i),n={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:t.html(),bookmark:e?e.bookmark(i):n}},o=function(e){null!==e.contents&&t.html(e.contents),null!==e.bookmark&&range.createFromBookmark(i,e.bookmark).select()};this.rewind=function(){t.html()!==e[n].contents&&this.recordUndo(),n=0,o(e[n])},this.reset=function(){e=[],n=-1,t.html(""),this.recordUndo()},this.undo=function(){t.html()!==e[n].contents&&this.recordUndo(),n>0&&(n--,o(e[n]))},this.redo=function(){e.length-1>n&&(n++,o(e[n]))},this.recordUndo=function(){n++,e.length>n&&(e=e.slice(0,n)),e.push(r())}},Style=function(){var t=function(t,e){if(agent.jqueryVersion<1.9){var n={};return $.each(e,function(e,i){n[i]=t.css(i)}),n}return t.css.call(t,e)};this.fromNode=function(e){var n=["font-family","font-size","text-align","list-style-type","line-height"],i=t(e,n)||{};return i["font-size"]=parseInt(i["font-size"],10),i},this.stylePara=function(t,e){$.each(t.nodes(dom.isPara,{includeAncestor:!0}),function(t,n){$(n).css(e)})},this.styleNodes=function(t,e){t=t.splitText();var n=e&&e.nodeName||"SPAN",i=!(!e||!e.expandClosestSibling),r=!(!e||!e.onlyPartialContains);if(t.isCollapsed())return[t.insertNode(dom.create(n))];var o=dom.makePredByNodeName(n),s=t.nodes(dom.isText,{fullyContains:!0}).map(function(t){return dom.singleChildAncestor(t,o)||dom.wrap(t,n)});if(i){if(r){var a=t.nodes();o=func.and(o,function(t){return list.contains(a,t)})}return s.map(function(t){var e=dom.withClosestSiblings(t,o),n=list.head(e),i=list.tail(e);return $.each(i,function(t,e){dom.appendChildNodes(n,e.childNodes),dom.remove(e)}),list.head(e)})}return s},this.current=function(t){var e=$(dom.isElement(t.sc)?t.sc:t.sc.parentNode),n=this.fromNode(e);try{n=$.extend(n,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(t){}if(t.isOnList()){var i=["circle","disc","disc-leading-zero","square"],r=$.inArray(n["list-style-type"],i)>-1;n["list-style"]=r?"unordered":"ordered"}else n["list-style"]="none";var o=dom.ancestor(t.sc,dom.isPara);if(o&&o.style["line-height"])n["line-height"]=o.style.lineHeight;else{var s=parseInt(n["line-height"],10)/parseInt(n["font-size"],10);n["line-height"]=s.toFixed(1)}return n.anchor=t.isOnAnchor()&&dom.ancestor(t.sc,dom.isAnchor),n.ancestors=dom.listAncestor(t.sc,dom.isEditable),n.range=t,n}},Bullet=function(){var t=this;this.insertOrderedList=function(t){this.toggleList("OL",t)},this.insertUnorderedList=function(t){this.toggleList("UL",t)},this.indent=function(t){var e=this,n=range.create(t).wrapBodyInlineWithPara(),i=n.nodes(dom.isPara,{includeAncestor:!0}),r=list.clusterBy(i,func.peq2("parentNode"));$.each(r,function(t,n){var i=list.head(n);dom.isLi(i)?e.wrapList(n,i.parentNode.nodeName):$.each(n,function(t,e){$(e).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}),n.select()},this.outdent=function(t){var e=this,n=range.create(t).wrapBodyInlineWithPara(),i=n.nodes(dom.isPara,{includeAncestor:!0}),r=list.clusterBy(i,func.peq2("parentNode"));$.each(r,function(t,n){var i=list.head(n);dom.isLi(i)?e.releaseList([n]):$.each(n,function(t,e){$(e).css("marginLeft",function(t,e){return e=parseInt(e,10)||0,e>25?e-25:""})})}),n.select()},this.toggleList=function(e,n){var i=range.create(n).wrapBodyInlineWithPara(),r=i.nodes(dom.isPara,{includeAncestor:!0}),o=i.paraBookmark(r),s=list.clusterBy(r,func.peq2("parentNode"));if(list.find(r,dom.isPurePara)){var a=[];$.each(s,function(n,i){a=a.concat(t.wrapList(i,e))}),r=a}else{var l=i.nodes(dom.isList,{includeAncestor:!0}).filter(function(t){return!$.nodeName(t,e)});l.length?$.each(l,function(t,n){dom.replace(n,e)}):r=this.releaseList(s,!0)}range.createFromParaBookmark(o,r).select()},this.wrapList=function(t,e){var n=list.head(t),i=list.last(t),r=dom.isList(n.previousSibling)&&n.previousSibling,o=dom.isList(i.nextSibling)&&i.nextSibling,s=r||dom.insertAfter(dom.create(e||"UL"),i);return t=t.map(function(t){return dom.isPurePara(t)?dom.replace(t,"LI"):t}),dom.appendChildNodes(s,t),o&&(dom.appendChildNodes(s,list.from(o.childNodes)),dom.remove(o)),t},this.releaseList=function(t,e){var n=[];return $.each(t,function(t,i){var r=list.head(i),o=list.last(i),s=e?dom.lastAncestor(r,dom.isList):r.parentNode,a=s.childNodes.length>1?dom.splitTree(s,{node:o.parentNode,offset:dom.position(o)+1},{isSkipPaddingBlankHTML:!0}):null,l=dom.splitTree(s,{node:r.parentNode,offset:dom.position(r)},{isSkipPaddingBlankHTML:!0});i=e?dom.listDescendant(l,dom.isLi):list.from(l.childNodes).filter(dom.isLi),(e||!dom.isList(s.parentNode))&&(i=i.map(function(t){return dom.replace(t,"P")})),$.each(list.from(i).reverse(),function(t,e){dom.insertAfter(e,s)});var c=list.compact([s,l,a]);$.each(c,function(t,e){var n=[e].concat(dom.listDescendant(e,dom.isList));$.each(n.reverse(),function(t,e){dom.nodeLength(e)||dom.remove(e,!0)})}),n=n.concat(i)}),n}},Typing=function(){var t=new Bullet;this.insertTab=function(t,e){var n=dom.createText(new Array(e+1).join(dom.NBSP_CHAR));t=t.deleteContents(),t.insertNode(n,!0),t=range.create(n,e),t.select()},this.insertParagraph=function(e){var n=range.create(e);n=n.deleteContents(),n=n.wrapBodyInlineWithPara();var i,r=dom.ancestor(n.sc,dom.isPara);if(r){if(dom.isEmpty(r)&&dom.isLi(r))return void t.toggleList(r.parentNode.nodeName);if(dom.isEmpty(r)&&dom.isPara(r)&&dom.isBlockquote(r.parentNode))dom.insertAfter(r,r.parentNode),i=r;else{i=dom.splitTree(r,n.getStartPoint());var o=dom.listDescendant(r,dom.isEmptyAnchor);o=o.concat(dom.listDescendant(i,dom.isEmptyAnchor)),$.each(o,function(t,e){dom.remove(e)}),(dom.isHeading(i)||dom.isPre(i))&&dom.isEmpty(i)&&(i=dom.replace(i,"p"))}}else{var s=n.sc.childNodes[n.so];i=$(dom.emptyPara)[0],s?n.sc.insertBefore(i,s):n.sc.appendChild(i)}range.create(i,0).normalize().select().scrollIntoView(e)}},Table=function(){this.tab=function(t,e){var n=dom.ancestor(t.commonAncestor(),dom.isCell),i=dom.ancestor(n,dom.isTable),r=dom.listDescendant(i,dom.isCell),o=list[e?"prev":"next"](r,n);o&&range.create(o,0).select()},this.createTable=function(t,e,n){for(var i,r=[],o=0;t>o;o++)r.push("<td>"+dom.blank+"</td>");i=r.join("");for(var s,a=[],l=0;e>l;l++)a.push("<tr>"+i+"</tr>");s=a.join("");var c=$("<table>"+s+"</table>");return n&&n.tableClassName&&c.addClass(n.tableClassName),c[0]}},KEY_BOGUS="bogus",Editor=function(t){var e=this,n=t.layoutInfo.note,i=t.layoutInfo.editor,r=t.layoutInfo.editable,o=t.options,s=o.langInfo,a=r[0],l=null,c=new Style,u=new Table,h=new Typing,d=new Bullet,f=new History(r);this.initialize=function(){r.on("keydown",function(n){n.keyCode===key.code.ENTER&&t.triggerEvent("enter",n),t.triggerEvent("keydown",n),n.isDefaultPrevented()||(o.shortcuts?e.handleKeyMap(n):e.preventDefaultEditableShortCuts(n))}).on("keyup",function(e){t.triggerEvent("keyup",e)}).on("focus",function(e){t.triggerEvent("focus",e)}).on("blur",function(e){t.triggerEvent("blur",e)}).on("mousedown",function(e){t.triggerEvent("mousedown",e)}).on("mouseup",function(e){t.triggerEvent("mouseup",e)}).on("scroll",function(e){t.triggerEvent("scroll",e)}).on("paste",function(e){t.triggerEvent("paste",e)}),r.html(dom.html(n)||dom.emptyPara);var s=agent.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";r.on(s,func.debounce(function(){t.triggerEvent("change",r.html())},250)),i.on("focusin",function(e){t.triggerEvent("focusin",e)}).on("focusout",function(e){t.triggerEvent("focusout",e)}),o.airMode||(o.width&&i.outerWidth(o.width),o.height&&r.outerHeight(o.height),o.maxHeight&&r.css("max-height",o.maxHeight),o.minHeight&&r.css("min-height",o.minHeight)),f.recordUndo()},this.destroy=function(){r.off()},this.handleKeyMap=function(e){var n=o.keyMap[agent.isMac?"mac":"pc"],i=[];e.metaKey&&i.push("CMD"),e.ctrlKey&&!e.altKey&&i.push("CTRL"),e.shiftKey&&i.push("SHIFT");var r=key.nameFromCode[e.keyCode];r&&i.push(r);var s=n[i.join("+")];s?(e.preventDefault(),t.invoke(s)):key.isEdit(e.keyCode)&&this.afterCommand()},this.preventDefaultEditableShortCuts=function(t){(t.ctrlKey||t.metaKey)&&list.contains([66,73,85],t.keyCode)&&t.preventDefault()},this.createRange=function(){return this.focus(),range.create(a)},this.saveRange=function(t){l=this.createRange(),t&&l.collapse().select()},this.restoreRange=function(){l&&(l.select(),this.focus())},this.saveTarget=function(t){r.data("target",t)},this.clearTarget=function(){r.removeData("target")},this.restoreTarget=function(){return r.data("target")},this.currentStyle=function(){var t=range.create();return t&&(t=t.normalize()),t?c.current(t):c.fromNode(r)},this.styleFromNode=function(t){return c.fromNode(t)},this.undo=function(){t.triggerEvent("before.command",r.html()),f.undo(),t.triggerEvent("change",r.html())},t.memo("help.undo",s.help.undo),this.redo=function(){t.triggerEvent("before.command",r.html()),f.redo(),t.triggerEvent("change",r.html())},t.memo("help.redo",s.help.redo);for(var p=this.beforeCommand=function(){t.triggerEvent("before.command",r.html()),e.focus()},m=this.afterCommand=function(e){f.recordUndo(),e||t.triggerEvent("change",r.html())},g=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],v=0,y=g.length;y>v;v++)this[g[v]]=function(t){return function(e){p(),document.execCommand(t,!1,e),m(!0)}}(g[v]),t.memo("help."+g[v],s.help[g[v]]);this.tab=function(){var t=this.createRange();t.isCollapsed()&&t.isOnCell()?u.tab(t):(p(),h.insertTab(t,o.tabSize),m())},t.memo("help.tab",s.help.tab),this.untab=function(){var t=this.createRange();t.isCollapsed()&&t.isOnCell()&&u.tab(t,!0)},t.memo("help.untab",s.help.untab),this.wrapCommand=function(t){return function(){p(),t.apply(e,arguments),m()}},this.insertParagraph=this.wrapCommand(function(){h.insertParagraph(a)}),t.memo("help.insertParagraph",s.help.insertParagraph),this.insertOrderedList=this.wrapCommand(function(){d.insertOrderedList(a)}),t.memo("help.insertOrderedList",s.help.insertOrderedList),this.insertUnorderedList=this.wrapCommand(function(){d.insertUnorderedList(a)}),t.memo("help.insertUnorderedList",s.help.insertUnorderedList),this.indent=this.wrapCommand(function(){d.indent(a)}),t.memo("help.indent",s.help.indent),this.outdent=this.wrapCommand(function(){d.outdent(a)}),t.memo("help.outdent",s.help.outdent),this.insertImage=function(e,n){return async.createImage(e,n).then(function(t){p(),"function"==typeof n?n(t):("string"==typeof n&&t.attr("data-filename",n),t.css("width",Math.min(r.width(),t.width()))),t.show(),range.create(a).insertNode(t[0]),range.createFromNodeAfter(t[0]).select(),m()}).fail(function(e){t.triggerEvent("image.upload.error",e)})},this.insertImages=function(n){$.each(n,function(n,i){var r=i.name;o.maximumImageFileSize&&o.maximumImageFileSize<i.size?t.triggerEvent("image.upload.error",s.image.maximumFileSizeError):async.readFileAsDataURL(i).then(function(t){return e.insertImage(t,r)}).fail(function(){t.triggerEvent("image.upload.error")})})},this.insertImagesOrCallback=function(e){o.callbacks.onImageUpload?t.triggerEvent("image.upload",e):this.insertImages(e)},this.insertNode=this.wrapCommand(function(t){this.createRange().insertNode(t),range.createFromNodeAfter(t).select()}),this.insertText=this.wrapCommand(function(t){var e=this.createRange(),n=e.insertNode(dom.createText(t));range.create(n,dom.nodeLength(n)).select()}),this.getSelectedText=function(){var t=this.createRange();return t.isOnAnchor()&&(t=range.createFromNode(dom.ancestor(t.sc,dom.isAnchor))),t.toString()},this.pasteHTML=this.wrapCommand(function(t){var e=this.createRange().pasteHTML(t);range.createFromNodeAfter(list.last(e)).select()}),this.formatBlock=this.wrapCommand(function(t){t=agent.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t)}),this.formatPara=function(){this.formatBlock("P")},t.memo("help.formatPara",s.help.formatPara);for(var v=1;6>=v;v++)this["formatH"+v]=function(t){return function(){this.formatBlock("H"+t)}}(v),t.memo("help.formatH"+v,s.help["formatH"+v]);this.fontSize=function(t){var e=this.createRange();if(e&&e.isCollapsed()){var n=c.styleNodes(e),i=list.head(n);$(n).css({"font-size":t+"px"}),i&&!dom.nodeLength(i)&&(i.innerHTML=dom.ZERO_WIDTH_NBSP_CHAR,range.createFromNodeAfter(i.firstChild).select(),r.data(KEY_BOGUS,i))}else p(),$(c.styleNodes(e)).css({"font-size":t+"px"}),m()},this.insertHorizontalRule=this.wrapCommand(function(){var t=this.createRange().insertNode(dom.create("HR"));t.nextSibling&&range.create(t.nextSibling,0).normalize().select()}),t.memo("help.insertHorizontalRule",s.help.insertHorizontalRule),this.removeBogus=function(){var t=r.data(KEY_BOGUS);if(t){var e=list.find(list.from(t.childNodes),dom.isText),n=e.nodeValue.indexOf(dom.ZERO_WIDTH_NBSP_CHAR);-1!==n&&e.deleteData(n,1),dom.isEmpty(t)&&dom.remove(t),r.removeData(KEY_BOGUS)}},this.lineHeight=this.wrapCommand(function(t){c.stylePara(this.createRange(),{lineHeight:t})}),this.unlink=function(){var t=this.createRange();if(t.isOnAnchor()){var e=dom.ancestor(t.sc,dom.isAnchor);t=range.createFromNode(e),t.select(),p(),document.execCommand("unlink"),m()}},this.createLink=this.wrapCommand(function(t){var e=t.url,n=t.text,i=t.isNewWindow,r=t.range||this.createRange(),s=r.toString()!==n;"string"==typeof e&&(e=e.trim()),o.onCreateLink&&(e=o.onCreateLink(e));var a=[];if(s){r=r.deleteContents();var l=r.insertNode($("<A>"+n+"</A>")[0]);a.push(l)}else a=c.styleNodes(r,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});$.each(a,function(t,n){e=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(e)?e:"http://"+e,$(n).attr("href",e),i?$(n).attr("target","_blank"):$(n).removeAttr("target")});var u=range.createFromNodeBefore(list.head(a)),h=u.getStartPoint(),d=range.createFromNodeAfter(list.last(a)),f=d.getEndPoint();range.create(h.node,h.offset,f.node,f.offset).select()}),this.getLinkInfo=function(){var t=this.createRange().expand(dom.isAnchor),e=$(list.head(t.nodes(dom.isAnchor)));return{range:t,text:t.toString(),isNewWindow:!!e.length&&"_blank"===e.attr("target"),url:e.length?e.attr("href"):""}},this.color=this.wrapCommand(function(t){var e=t.foreColor,n=t.backColor;e&&document.execCommand("foreColor",!1,e),n&&document.execCommand("backColor",!1,n)}),this.insertTable=this.wrapCommand(function(t){var e=t.split("x");this.createRange().deleteContents().insertNode(u.createTable(e[0],e[1],o))}),this.floatMe=this.wrapCommand(function(t){$(this.restoreTarget()).css("float",t)}),this.resize=this.wrapCommand(function(t){$(this.restoreTarget()).css({width:100*t+"%",height:""})}),this.resizeTo=function(t,e,n){var i;if(n){var r=t.y/t.x,o=e.data("ratio");i={width:o>r?t.x:t.y/o,height:o>r?t.x*o:t.y}}else i={width:t.x,height:t.y};e.css(i)},this.removeMedia=this.wrapCommand(function(){var e=$(this.restoreTarget()).detach();t.triggerEvent("media.delete",e,r)}),this.hasFocus=function(){return r.is(":focus")},this.focus=function(){this.hasFocus()||r.focus()},this.isEmpty=function(){return dom.isEmpty(r[0])||dom.emptyPara===r.html()},this.empty=function(){t.invoke("code",dom.emptyPara)}},Clipboard=function(t){var e=this,n=t.layoutInfo.editable;this.events={"summernote.keydown":function(n,i){e.needKeydownHook()&&(i.ctrlKey||i.metaKey)&&i.keyCode===key.code.V&&(t.invoke("editor.saveRange"),e.$paste.focus(),setTimeout(function(){e.pasteByHook()},0))}},this.needKeydownHook=function(){return agent.isMSIE&&agent.browserVersion>10||agent.isFF},this.initialize=function(){this.needKeydownHook()?(this.$paste=$('<div tabindex="-1" />').attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),n.before(this.$paste),this.$paste.on("paste",function(e){t.triggerEvent("paste",e)})):n.on("paste",this.pasteByEvent)},this.destroy=function(){this.needKeydownHook()&&(this.$paste.remove(),this.$paste=null)},this.pasteByHook=function(){var e=this.$paste[0].firstChild;if(dom.isImg(e)){for(var n=e.src,i=atob(n.split(",")[1]),r=new Uint8Array(i.length),o=0;o<i.length;o++)r[o]=i.charCodeAt(o);var s=new Blob([r],{type:"image/png"});s.name="clipboard.png",t.invoke("editor.restoreRange"),t.invoke("editor.focus"),t.invoke("editor.insertImagesOrCallback",[s])}else{var a=$("<div />").html(this.$paste.html()).html();t.invoke("editor.restoreRange"),t.invoke("editor.focus"),a&&t.invoke("editor.pasteHTML",a)}this.$paste.empty()},this.pasteByEvent=function(e){var n=e.originalEvent.clipboardData;if(n&&n.items&&n.items.length){var i=list.head(n.items);"file"===i.kind&&-1!==i.type.indexOf("image/")&&t.invoke("editor.insertImagesOrCallback",[i.getAsFile()]),t.invoke("editor.afterCommand")}}},Dropzone=function(t){var e=$(document),n=t.layoutInfo.editor,i=t.layoutInfo.editable,r=t.options,o=r.langInfo,s={},a=$(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(n),l=function(){Object.keys(s).forEach(function(t){e.off(t.substr(2).toLowerCase(),s[t])}),s={}};this.initialize=function(){r.disableDragAndDrop?(s.onDrop=function(t){t.preventDefault()},e.on("drop",s.onDrop)):this.attachDragAndDropEvent()},this.attachDragAndDropEvent=function(){var r=$(),l=a.find(".note-dropzone-message");s.onDragenter=function(e){var i=t.invoke("codeview.isActivated"),s=n.width()>0&&n.height()>0;i||r.length||!s||(n.addClass("dragover"),a.width(n.width()),a.height(n.height()),l.text(o.image.dragImageHere)),r=r.add(e.target)},s.onDragleave=function(t){r=r.not(t.target),r.length||n.removeClass("dragover")},s.onDrop=function(){r=$(),n.removeClass("dragover")},e.on("dragenter",s.onDragenter).on("dragleave",s.onDragleave).on("drop",s.onDrop),a.on("dragenter",function(){a.addClass("hover"),l.text(o.image.dropImage)}).on("dragleave",function(){a.removeClass("hover"),l.text(o.image.dragImageHere)}),a.on("drop",function(e){var n=e.originalEvent.dataTransfer;n&&n.files&&n.files.length?(e.preventDefault(),i.focus(),t.invoke("editor.insertImagesOrCallback",n.files)):$.each(n.types,function(e,i){var r=n.getData(i);i.toLowerCase().indexOf("text")>-1?t.invoke("editor.pasteHTML",r):$(r).each(function(){t.invoke("editor.insertNode",this)})})}).on("dragover",!1)},this.destroy=function(){l()}},CodeMirror;agent.hasCodeMirror&&(agent.isSupportAmd?require(["codemirror"],function(t){CodeMirror=t}):CodeMirror=window.CodeMirror);var Codeview=function(t){var e=t.layoutInfo.editor,n=t.layoutInfo.editable,i=t.layoutInfo.codable,r=t.options;this.sync=function(){this.isActivated()&&agent.hasCodeMirror&&i.data("cmEditor").save()},this.isActivated=function(){return e.hasClass("codeview")},this.toggle=function(){this.isActivated()?this.deactivate():this.activate(),t.triggerEvent("codeview.toggled")},this.activate=function(){if(i.val(dom.html(n,r.prettifyHtml)),i.height(n.height()),t.invoke("toolbar.updateCodeview",!0),e.addClass("codeview"),i.focus(),agent.hasCodeMirror){var o=CodeMirror.fromTextArea(i[0],r.codemirror);if(r.codemirror.tern){var s=new CodeMirror.TernServer(r.codemirror.tern);o.ternServer=s,o.on("cursorActivity",function(t){s.updateArgHints(t)})}o.setSize(null,n.outerHeight()),i.data("cmEditor",o)}},this.deactivate=function(){if(agent.hasCodeMirror){var o=i.data("cmEditor");i.val(o.getValue()),o.toTextArea()}var s=dom.value(i,r.prettifyHtml)||dom.emptyPara,a=n.html()!==s;n.html(s),n.height(r.height?i.height():"auto"),e.removeClass("codeview"),a&&t.triggerEvent("change",n.html(),n),n.focus(),t.invoke("toolbar.updateCodeview",!1)},this.destroy=function(){this.isActivated()&&this.deactivate()}},EDITABLE_PADDING=24,Statusbar=function(t){var e=$(document),n=t.layoutInfo.statusbar,i=t.layoutInfo.editable,r=t.options;this.initialize=function(){r.airMode||r.disableResizeEditor||n.on("mousedown",function(t){t.preventDefault(),t.stopPropagation();var n=i.offset().top-e.scrollTop();e.on("mousemove",function(t){var e=t.clientY-(n+EDITABLE_PADDING);e=r.minheight>0?Math.max(e,r.minheight):e,e=r.maxHeight>0?Math.min(e,r.maxHeight):e,i.height(e)}).one("mouseup",function(){e.off("mousemove")})})},this.destroy=function(){n.off(),n.remove()}},Fullscreen=function(t){var e=t.layoutInfo.editor,n=t.layoutInfo.toolbar,i=t.layoutInfo.editable,r=t.layoutInfo.codable,o=$(window),s=$("html, body");this.toggle=function(){var a=function(t){i.css("height",t.h),r.css("height",t.h),r.data("cmeditor")&&r.data("cmeditor").setsize(null,t.h)};e.toggleClass("fullscreen"),this.isFullscreen()?(i.data("orgHeight",i.css("height")),o.on("resize",function(){a({h:o.height()-n.outerHeight()})}).trigger("resize"),s.css("overflow","hidden")):(o.off("resize"),a({h:i.data("orgHeight")}),s.css("overflow","visible")),t.invoke("toolbar.updateFullscreen",this.isFullscreen())},this.isFullscreen=function(){return e.hasClass("fullscreen")}},Handle=function(t){var e=this,n=$(document),i=t.layoutInfo.editingArea,r=t.options;this.events={"summernote.mousedown":function(t,n){e.update(n.target)&&n.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){e.update()}},this.initialize=function(){this.$handle=$(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',r.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',r.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(i),this.$handle.on("mousedown",function(i){if(dom.isControlSizing(i.target)){i.preventDefault(),i.stopPropagation();var r=e.$handle.find(".note-control-selection").data("target"),o=r.offset(),s=n.scrollTop();n.on("mousemove",function(n){t.invoke("editor.resizeTo",{x:n.clientX-o.left,y:n.clientY-(o.top-s)},r,!n.shiftKey),e.update(r[0])}).one("mouseup",function(e){e.preventDefault(),n.off("mousemove"),t.invoke("editor.afterCommand")}),r.data("ratio")||r.data("ratio",r.height()/r.width())}})},this.destroy=function(){this.$handle.remove()},this.update=function(e){var n=dom.isImg(e),i=this.$handle.find(".note-control-selection");if(t.invoke("imagePopover.update",e),n){var r=$(e),o=r.position(),s={w:r.outerWidth(!0),h:r.outerHeight(!0)};i.css({display:"block",left:o.left,top:o.top,width:s.w,height:s.h}).data("target",r);var a=s.w+"x"+s.h;i.find(".note-control-selection-info").text(a),t.invoke("editor.saveTarget",e)}else this.hide();return n},this.hide=function(){t.invoke("editor.clearTarget"),this.$handle.children().hide()}},AutoLink=function(t){var e=this,n=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(t,n){n.isDefaultPrevented()||e.handleKeyup(n)},"summernote.keydown":function(t,n){e.handleKeydown(n)}},this.initialize=function(){this.lastWordRange=null},this.destroy=function(){this.lastWordRange=null},this.replace=function(){if(this.lastWordRange){var e=this.lastWordRange.toString(),i=e.match(n);if(i&&(i[1]||i[2])){var r=i[1]?e:"http://"+e,o=$("<a />").html(e).attr("href",r)[0];this.lastWordRange.insertNode(o),this.lastWordRange=null,t.invoke("editor.focus")}}},this.handleKeydown=function(e){if(list.contains([key.code.ENTER,key.code.SPACE],e.keyCode)){var n=t.invoke("editor.createRange").getWordRange();this.lastWordRange=n}},this.handleKeyup=function(t){list.contains([key.code.ENTER,key.code.SPACE],t.keyCode)&&this.replace()}},AutoSync=function(t){var e=t.layoutInfo.note;this.events={"summernote.change":function(){e.val(t.invoke("code"))}},this.shouldInitialize=function(){return dom.isTextarea(e[0])}},Placeholder=function(t){var e=this,n=t.layoutInfo.editingArea,i=t.options;this.events={"summernote.init summernote.change":function(){e.update()},
"summernote.codeview.toggled":function(){e.update()}},this.shouldInitialize=function(){return!!i.placeholder},this.initialize=function(){this.$placeholder=$('<div class="note-placeholder">'),this.$placeholder.on("click",function(){t.invoke("focus")}).text(i.placeholder).prependTo(n)},this.destroy=function(){this.$placeholder.remove()},this.update=function(){var e=!t.invoke("codeview.isActivated")&&t.invoke("editor.isEmpty");this.$placeholder.toggle(e)}},Buttons=function(t){var e=this,n=$.summernote.ui,i=t.layoutInfo.toolbar,r=t.options,o=r.langInfo,s=func.invertObject(r.keyMap[agent.isMac?"mac":"pc"]),a=this.representShortcut=function(t){var e=s[t];return r.shortcuts&&e?(agent.isMac&&(e=e.replace("CMD","\u2318").replace("SHIFT","\u21e7"))," ("+(e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]"))+")"):""};this.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.fontInstalledMap={}},this.destroy=function(){delete this.fontInstalledMap},this.isFontInstalled=function(t){return e.fontInstalledMap.hasOwnProperty(t)||(e.fontInstalledMap[t]=agent.isFontInstalled(t)||list.contains(r.fontNamesIgnoreCheck,t)),e.fontInstalledMap[t]},this.addToolbarButtons=function(){t.memo("button.style",function(){return n.buttonGroup([n.button({className:"dropdown-toggle",contents:n.icon(r.icons.magic)+" "+n.icon(r.icons.caret,"span"),tooltip:o.style.style,data:{toggle:"dropdown"}}),n.dropdown({className:"dropdown-style",items:t.options.styleTags,template:function(t){"string"==typeof t&&(t={tag:t,title:o.style.hasOwnProperty(t)?o.style[t]:t});var e=t.tag,n=t.title;return"<"+e+(t.style?' style="'+t.style+'" ':"")+(t.className?' class="'+t.className+'"':"")+">"+n+"</"+e+">"},click:t.createInvokeHandler("editor.formatBlock")})]).render()}),t.memo("button.bold",function(){return n.button({className:"note-btn-bold",contents:n.icon(r.icons.bold),tooltip:o.font.bold+a("bold"),click:t.createInvokeHandler("editor.bold")}).render()}),t.memo("button.italic",function(){return n.button({className:"note-btn-italic",contents:n.icon(r.icons.italic),tooltip:o.font.italic+a("italic"),click:t.createInvokeHandler("editor.italic")}).render()}),t.memo("button.underline",function(){return n.button({className:"note-btn-underline",contents:n.icon(r.icons.underline),tooltip:o.font.underline+a("underline"),click:t.createInvokeHandler("editor.underline")}).render()}),t.memo("button.clear",function(){return n.button({contents:n.icon(r.icons.eraser),tooltip:o.font.clear+a("removeFormat"),click:t.createInvokeHandler("editor.removeFormat")}).render()}),t.memo("button.strikethrough",function(){return n.button({className:"note-btn-strikethrough",contents:n.icon(r.icons.strikethrough),tooltip:o.font.strikethrough+a("strikethrough"),click:t.createInvokeHandler("editor.strikethrough")}).render()}),t.memo("button.superscript",function(){return n.button({className:"note-btn-superscript",contents:n.icon(r.icons.superscript),tooltip:o.font.superscript,click:t.createInvokeHandler("editor.superscript")}).render()}),t.memo("button.subscript",function(){return n.button({className:"note-btn-subscript",contents:n.icon(r.icons.subscript),tooltip:o.font.subscript,click:t.createInvokeHandler("editor.subscript")}).render()}),t.memo("button.fontname",function(){return n.buttonGroup([n.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+n.icon(r.icons.caret,"span"),tooltip:o.font.name,data:{toggle:"dropdown"}}),n.dropdownCheck({className:"dropdown-fontname",checkClassName:r.icons.menuCheck,items:r.fontNames.filter(e.isFontInstalled),template:function(t){return'<span style="font-family:'+t+'">'+t+"</span>"},click:t.createInvokeHandler("editor.fontName")})]).render()}),t.memo("button.fontsize",function(){return n.buttonGroup([n.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+n.icon(r.icons.caret,"span"),tooltip:o.font.size,data:{toggle:"dropdown"}}),n.dropdownCheck({className:"dropdown-fontsize",checkClassName:r.icons.menuCheck,items:r.fontSizes,click:t.createInvokeHandler("editor.fontSize")})]).render()}),t.memo("button.color",function(){return n.buttonGroup({className:"note-color",children:[n.button({className:"note-current-color-button",contents:n.icon(r.icons.font+" note-recent-color"),tooltip:o.color.recent,click:function(e){var n=$(e.currentTarget);t.invoke("editor.color",{backColor:n.attr("data-backColor"),foreColor:n.attr("data-foreColor")})},callback:function(t){t.find(".note-recent-color").css("background-color","#FFFF00"),t.attr("data-backColor","#FFFF00")}}),n.button({className:"dropdown-toggle",contents:n.icon(r.icons.caret,"span"),tooltip:o.color.more,data:{toggle:"dropdown"}}),n.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+o.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',o.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+o.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',o.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(t){t.find(".note-holder").each(function(){var t=$(this);t.append(n.palette({colors:r.colors,eventName:t.data("event")}).render())})},click:function(e){var n=$(e.target),i=n.data("event"),r=n.data("value");if(i&&r){var o="backColor"===i?"background-color":"color",s=n.closest(".note-color").find(".note-recent-color"),a=n.closest(".note-color").find(".note-current-color-button");s.css(o,r),a.attr("data-"+i,r),t.invoke("editor."+i,r)}}})]}).render()}),t.memo("button.ul",function(){return n.button({contents:n.icon(r.icons.unorderedlist),tooltip:o.lists.unordered+a("insertUnorderedList"),click:t.createInvokeHandler("editor.insertUnorderedList")}).render()}),t.memo("button.ol",function(){return n.button({contents:n.icon(r.icons.orderedlist),tooltip:o.lists.ordered+a("insertOrderedList"),click:t.createInvokeHandler("editor.insertOrderedList")}).render()});var i=n.button({contents:n.icon(r.icons.alignLeft),tooltip:o.paragraph.left+a("justifyLeft"),click:t.createInvokeHandler("editor.justifyLeft")}),s=n.button({contents:n.icon(r.icons.alignCenter),tooltip:o.paragraph.center+a("justifyCenter"),click:t.createInvokeHandler("editor.justifyCenter")}),l=n.button({contents:n.icon(r.icons.alignRight),tooltip:o.paragraph.right+a("justifyRight"),click:t.createInvokeHandler("editor.justifyRight")}),c=n.button({contents:n.icon(r.icons.alignJustify),tooltip:o.paragraph.justify+a("justifyFull"),click:t.createInvokeHandler("editor.justifyFull")}),u=n.button({contents:n.icon(r.icons.outdent),tooltip:o.paragraph.outdent+a("outdent"),click:t.createInvokeHandler("editor.outdent")}),h=n.button({contents:n.icon(r.icons.indent),tooltip:o.paragraph.indent+a("indent"),click:t.createInvokeHandler("editor.indent")});t.memo("button.justifyLeft",func.invoke(i,"render")),t.memo("button.justifyCenter",func.invoke(s,"render")),t.memo("button.justifyRight",func.invoke(l,"render")),t.memo("button.justifyFull",func.invoke(c,"render")),t.memo("button.outdent",func.invoke(u,"render")),t.memo("button.indent",func.invoke(h,"render")),t.memo("button.paragraph",function(){return n.buttonGroup([n.button({className:"dropdown-toggle",contents:n.icon(r.icons.alignLeft)+" "+n.icon(r.icons.caret,"span"),tooltip:o.paragraph.paragraph,data:{toggle:"dropdown"}}),n.dropdown([n.buttonGroup({className:"note-align",children:[i,s,l,c]}),n.buttonGroup({className:"note-list",children:[u,h]})])]).render()}),t.memo("button.height",function(){return n.buttonGroup([n.button({className:"dropdown-toggle",contents:n.icon(r.icons.textHeight)+" "+n.icon(r.icons.caret,"span"),tooltip:o.font.height,data:{toggle:"dropdown"}}),n.dropdownCheck({items:r.lineHeights,checkClassName:r.icons.menuCheck,className:"dropdown-line-height",click:t.createInvokeHandler("editor.lineHeight")})]).render()}),t.memo("button.table",function(){return n.buttonGroup([n.button({className:"dropdown-toggle",contents:n.icon(r.icons.table)+" "+n.icon(r.icons.caret,"span"),tooltip:o.table.table,data:{toggle:"dropdown"}}),n.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(n){n.find(".note-dimension-picker-mousecatcher").css({width:r.insertTableMaxSize.col+"em",height:r.insertTableMaxSize.row+"em"}).mousedown(t.createInvokeHandler("editor.insertTable")).on("mousemove",e.tableMoveHandler)}}).render()}),t.memo("button.link",function(){return n.button({contents:n.icon(r.icons.link),tooltip:o.link.link+a("linkDialog.show"),click:t.createInvokeHandler("linkDialog.show")}).render()}),t.memo("button.picture",function(){return n.button({contents:n.icon(r.icons.picture),tooltip:o.image.image,click:t.createInvokeHandler("imageDialog.show")}).render()}),t.memo("button.video",function(){return n.button({contents:n.icon(r.icons.video),tooltip:o.video.video,click:t.createInvokeHandler("videoDialog.show")}).render()}),t.memo("button.hr",function(){return n.button({contents:n.icon(r.icons.minus),tooltip:o.hr.insert+a("insertHorizontalRule"),click:t.createInvokeHandler("editor.insertHorizontalRule")}).render()}),t.memo("button.fullscreen",function(){return n.button({className:"btn-fullscreen",contents:n.icon(r.icons.arrowsAlt),tooltip:o.options.fullscreen,click:t.createInvokeHandler("fullscreen.toggle")}).render()}),t.memo("button.codeview",function(){return n.button({className:"btn-codeview",contents:n.icon(r.icons.code),tooltip:o.options.codeview,click:t.createInvokeHandler("codeview.toggle")}).render()}),t.memo("button.redo",function(){return n.button({contents:n.icon(r.icons.redo),tooltip:o.history.redo+a("redo"),click:t.createInvokeHandler("editor.redo")}).render()}),t.memo("button.undo",function(){return n.button({contents:n.icon(r.icons.undo),tooltip:o.history.undo+a("undo"),click:t.createInvokeHandler("editor.undo")}).render()}),t.memo("button.help",function(){return n.button({contents:n.icon(r.icons.question),tooltip:o.options.help,click:t.createInvokeHandler("helpDialog.show")}).render()})},this.addImagePopoverButtons=function(){t.memo("button.imageSize100",function(){return n.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:o.image.resizeFull,click:t.createInvokeHandler("editor.resize","1")}).render()}),t.memo("button.imageSize50",function(){return n.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:o.image.resizeHalf,click:t.createInvokeHandler("editor.resize","0.5")}).render()}),t.memo("button.imageSize25",function(){return n.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:o.image.resizeQuarter,click:t.createInvokeHandler("editor.resize","0.25")}).render()}),t.memo("button.floatLeft",function(){return n.button({contents:n.icon(r.icons.alignLeft),tooltip:o.image.floatLeft,click:t.createInvokeHandler("editor.floatMe","left")}).render()}),t.memo("button.floatRight",function(){return n.button({contents:n.icon(r.icons.alignRight),tooltip:o.image.floatRight,click:t.createInvokeHandler("editor.floatMe","right")}).render()}),t.memo("button.floatNone",function(){return n.button({contents:n.icon(r.icons.alignJustify),tooltip:o.image.floatNone,click:t.createInvokeHandler("editor.floatMe","none")}).render()}),t.memo("button.removeMedia",function(){return n.button({contents:n.icon(r.icons.trash),tooltip:o.image.remove,click:t.createInvokeHandler("editor.removeMedia")}).render()})},this.addLinkPopoverButtons=function(){t.memo("button.linkDialogShow",function(){return n.button({contents:n.icon(r.icons.link),tooltip:o.link.edit,click:t.createInvokeHandler("linkDialog.show")}).render()}),t.memo("button.unlink",function(){return n.button({contents:n.icon(r.icons.unlink),tooltip:o.link.unlink,click:t.createInvokeHandler("editor.unlink")}).render()})},this.build=function(e,i){for(var r=0,o=i.length;o>r;r++){for(var s=i[r],a=s[0],l=s[1],c=n.buttonGroup({className:"note-"+a}).render(),u=0,h=l.length;h>u;u++){var d=t.memo("button."+l[u]);d&&c.append("function"==typeof d?d(t):d)}c.appendTo(e)}},this.updateCurrentStyle=function(){var n=t.invoke("editor.currentStyle");if(this.updateBtnStates({".note-btn-bold":function(){return"bold"===n["font-bold"]},".note-btn-italic":function(){return"italic"===n["font-italic"]},".note-btn-underline":function(){return"underline"===n["font-underline"]},".note-btn-subscript":function(){return"subscript"===n["font-subscript"]},".note-btn-superscript":function(){return"superscript"===n["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===n["font-strikethrough"]}}),n["font-family"]){var r=n["font-family"].split(",").map(function(t){return t.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),o=list.find(r,e.isFontInstalled);i.find(".dropdown-fontname li a").each(function(){var t=$(this).data("value")+""==o+"";this.className=t?"checked":""}),i.find(".note-current-fontname").text(o)}if(n["font-size"]){var s=n["font-size"];i.find(".dropdown-fontsize li a").each(function(){var t=$(this).data("value")+""==s+"";this.className=t?"checked":""}),i.find(".note-current-fontsize").text(s)}if(n["line-height"]){var a=n["line-height"];i.find(".dropdown-line-height li a").each(function(){var t=$(this).data("value")+""==a+"";this.className=t?"checked":""})}},this.updateBtnStates=function(t){$.each(t,function(t,e){n.toggleBtnActive(i.find(t),e())})},this.tableMoveHandler=function(t){var e,n=18,i=$(t.target.parentNode),o=i.next(),s=i.find(".note-dimension-picker-mousecatcher"),a=i.find(".note-dimension-picker-highlighted"),l=i.find(".note-dimension-picker-unhighlighted");if(void 0===t.offsetX){var c=$(t.target).offset();e={x:t.pageX-c.left,y:t.pageY-c.top}}else e={x:t.offsetX,y:t.offsetY};var u={c:Math.ceil(e.x/n)||1,r:Math.ceil(e.y/n)||1};a.css({width:u.c+"em",height:u.r+"em"}),s.data("value",u.c+"x"+u.r),3<u.c&&u.c<r.insertTableMaxSize.col&&l.css({width:u.c+1+"em"}),3<u.r&&u.r<r.insertTableMaxSize.row&&l.css({height:u.r+1+"em"}),o.html(u.c+" x "+u.r)}},Toolbar=function(t){var e=$.summernote.ui,n=t.layoutInfo.note,i=t.layoutInfo.toolbar,r=t.options;this.shouldInitialize=function(){return!r.airMode},this.initialize=function(){r.toolbar=r.toolbar||[],r.toolbar.length?t.invoke("buttons.build",i,r.toolbar):i.hide(),r.toolbarContainer&&i.appendTo(r.toolbarContainer),n.on("summernote.keyup summernote.mouseup summernote.change",function(){t.invoke("buttons.updateCurrentStyle")}),t.invoke("buttons.updateCurrentStyle")},this.destroy=function(){i.children().remove()},this.updateFullscreen=function(t){e.toggleBtnActive(i.find(".btn-fullscreen"),t)},this.updateCodeview=function(t){e.toggleBtnActive(i.find(".btn-codeview"),t),t?this.deactivate():this.activate()},this.activate=function(t){var n=i.find("button");t||(n=n.not(".btn-codeview")),e.toggleBtn(n,!0)},this.deactivate=function(t){var n=i.find("button");t||(n=n.not(".btn-codeview")),e.toggleBtn(n,!1)}},LinkDialog=function(t){var e=this,n=$.summernote.ui,i=t.layoutInfo.editor,r=t.options,o=r.langInfo;this.initialize=function(){var t=r.dialogsInBody?$(document.body):i,e='<div class="form-group"><label>'+o.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div><div class="form-group"><label>'+o.link.url+'</label><input class="note-link-url form-control" type="text" value="http://" /></div>'+(r.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+o.link.openInNewWindow+"</label></div>"),s='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+o.link.insert+"</button>";this.$dialog=n.dialog({className:"link-dialog",title:o.link.insert,fade:r.dialogsFade,body:e,footer:s}).render().appendTo(t)},this.destroy=function(){n.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===key.code.ENTER&&e.trigger("click")})},this.toggleLinkBtn=function(t,e,i){n.toggleBtn(t,e.val()&&i.val())},this.showLinkDialog=function(i){return $.Deferred(function(r){var o=e.$dialog.find(".note-link-text"),s=e.$dialog.find(".note-link-url"),a=e.$dialog.find(".note-link-btn"),l=e.$dialog.find("input[type=checkbox]");n.onDialogShown(e.$dialog,function(){t.triggerEvent("dialog.shown"),i.url||(i.url=i.text),o.val(i.text);var n=function(){e.toggleLinkBtn(a,o,s),i.text=o.val()};o.on("input",n).on("paste",function(){setTimeout(n,0)});var c=function(){e.toggleLinkBtn(a,o,s),i.text||o.val(s.val())};s.on("input",c).on("paste",function(){setTimeout(c,0)}).val(i.url).trigger("focus"),e.toggleLinkBtn(a,o,s),e.bindEnterKey(s,a),e.bindEnterKey(o,a),l.prop("checked",i.isNewWindow),a.one("click",function(t){t.preventDefault(),r.resolve({range:i.range,url:s.val(),text:o.val(),isNewWindow:l.is(":checked")}),e.$dialog.modal("hide")})}),n.onDialogHidden(e.$dialog,function(){o.off("input paste keypress"),s.off("input paste keypress"),a.off("click"),"pending"===r.state()&&r.reject()}),n.showDialog(e.$dialog)}).promise()},this.show=function(){var e=t.invoke("editor.getLinkInfo");t.invoke("editor.saveRange"),this.showLinkDialog(e).then(function(e){t.invoke("editor.restoreRange"),t.invoke("editor.createLink",e)}).fail(function(){t.invoke("editor.restoreRange")})},t.memo("help.linkDialog.show",r.langInfo.help["linkDialog.show"])},LinkPopover=function(t){var e=this,n=$.summernote.ui,i=t.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){e.update()},"summernote.dialog.shown":function(){e.hide()}},this.shouldInitialize=function(){return!list.isEmpty(i.popover.link)},this.initialize=function(){this.$popover=n.popover({className:"note-link-popover",callback:function(t){t.find(".popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var e=this.$popover.find(".popover-content");t.invoke("buttons.build",e,i.popover.link)},this.destroy=function(){this.$popover.remove()},this.update=function(){if(!t.invoke("editor.hasFocus"))return void this.hide();var e=t.invoke("editor.createRange");if(e.isCollapsed()&&e.isOnAnchor()){var n=dom.ancestor(e.sc,dom.isAnchor),i=$(n).attr("href");this.$popover.find("a").attr("href",i).html(i);var r=dom.posFromPlaceholder(n);this.$popover.css({display:"block",left:r.left,top:r.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},ImageDialog=function(t){var e=this,n=$.summernote.ui,i=t.layoutInfo.editor,r=t.options,o=r.langInfo;this.initialize=function(){var t=r.dialogsInBody?$(document.body):i,e="";if(r.maximumImageFileSize){var s=Math.floor(Math.log(r.maximumImageFileSize)/Math.log(1024)),a=1*(r.maximumImageFileSize/Math.pow(1024,s)).toFixed(2)+" "+" KMGTP"[s]+"B";e="<small>"+o.image.maximumFileSize+" : "+a+"</small>"}var l='<div class="form-group note-group-select-from-files"><label>'+o.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+e+'</div><div class="form-group note-group-image-url" style="overflow:auto;"><label>'+o.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',c='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+o.image.insert+"</button>";this.$dialog=n.dialog({title:o.image.insert,fade:r.dialogsFade,body:l,footer:c}).render().appendTo(t)},this.destroy=function(){n.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===key.code.ENTER&&e.trigger("click")})},this.show=function(){t.invoke("editor.saveRange"),this.showImageDialog().then(function(i){n.hideDialog(e.$dialog),t.invoke("editor.restoreRange"),"string"==typeof i?t.invoke("editor.insertImage",i):t.invoke("editor.insertImagesOrCallback",i)}).fail(function(){t.invoke("editor.restoreRange")})},this.showImageDialog=function(){return $.Deferred(function(i){var r=e.$dialog.find(".note-image-input"),o=e.$dialog.find(".note-image-url"),s=e.$dialog.find(".note-image-btn");n.onDialogShown(e.$dialog,function(){t.triggerEvent("dialog.shown"),r.replaceWith(r.clone().on("change",function(){i.resolve(this.files||this.value)}).val("")),s.click(function(t){t.preventDefault(),i.resolve(o.val())}),o.on("keyup paste",function(){var t=o.val();n.toggleBtn(s,t)}).val("").trigger("focus"),e.bindEnterKey(o,s)}),n.onDialogHidden(e.$dialog,function(){r.off("change"),o.off("keyup paste keypress"),s.off("click"),"pending"===i.state()&&i.reject()}),n.showDialog(e.$dialog)})}},ImagePopover=function(t){var e=$.summernote.ui,n=t.options;this.shouldInitialize=function(){return!list.isEmpty(n.popover.image)},this.initialize=function(){this.$popover=e.popover({className:"note-image-popover"}).render().appendTo("body");var i=this.$popover.find(".popover-content");t.invoke("buttons.build",i,n.popover.image)},this.destroy=function(){this.$popover.remove()},this.update=function(t){if(dom.isImg(t)){var e=dom.posFromPlaceholder(t);this.$popover.css({display:"block",left:e.left,top:e.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},VideoDialog=function(t){var e=this,n=$.summernote.ui,i=t.layoutInfo.editor,r=t.options,o=r.langInfo;this.initialize=function(){var t=r.dialogsInBody?$(document.body):i,e='<div class="form-group row-fluid"><label>'+o.video.url+' <small class="text-muted">'+o.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>',s='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+o.video.insert+"</button>";this.$dialog=n.dialog({title:o.video.insert,fade:r.dialogsFade,body:e,footer:s}).render().appendTo(t)},this.destroy=function(){n.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===key.code.ENTER&&e.trigger("click")})},this.createVideoNode=function(t){var e,n=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,i=t.match(n),r=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/,o=t.match(r),s=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/,a=t.match(s),l=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,c=t.match(l),u=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,h=t.match(u),d=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,f=t.match(d),p=/^.+.(mp4|m4v)$/,m=t.match(p),g=/^.+.(ogg|ogv)$/,v=t.match(g),y=/^.+.(webm)$/,b=t.match(y);if(i&&11===i[1].length){var w=i[1];e=$("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+w).attr("width","640").attr("height","360")}else if(o&&o[0].length)e=$("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+o[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(a&&a[0].length)e=$("<iframe>").attr("frameborder",0).attr("src",a[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(c&&c[3].length)e=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+c[3]).attr("width","640").attr("height","360");else if(h&&h[2].length)e=$("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+h[2]).attr("width","640").attr("height","360");else if(f&&f[1].length)e=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+f[1]);else{if(!(m||v||b))return!1;e=$("<video controls>").attr("src",t).attr("width","640").attr("height","360")}return e.addClass("note-video-clip"),e[0]},this.show=function(){var i=t.invoke("editor.getSelectedText");t.invoke("editor.saveRange"),this.showVideoDialog(i).then(function(i){n.hideDialog(e.$dialog),t.invoke("editor.restoreRange");var r=e.createVideoNode(i);r&&t.invoke("editor.insertNode",r)}).fail(function(){t.invoke("editor.restoreRange")})},this.showVideoDialog=function(i){return $.Deferred(function(r){var o=e.$dialog.find(".note-video-url"),s=e.$dialog.find(".note-video-btn");n.onDialogShown(e.$dialog,function(){t.triggerEvent("dialog.shown"),o.val(i).on("input",function(){n.toggleBtn(s,o.val())}).trigger("focus"),s.click(function(t){t.preventDefault(),r.resolve(o.val())}),e.bindEnterKey(o,s)}),n.onDialogHidden(e.$dialog,function(){o.off("input"),s.off("click"),"pending"===r.state()&&r.reject()}),n.showDialog(e.$dialog)})}},HelpDialog=function(t){var e=this,n=$.summernote.ui,i=t.layoutInfo.editor,r=t.options,o=r.langInfo;this.createShortCutList=function(){var e=r.keyMap[agent.isMac?"mac":"pc"];return Object.keys(e).map(function(n){var i=e[n],r=$('<div><div class="help-list-item"/></div>');return r.append($("<label><kbd>"+n+"</kdb></label>").css({width:180,"margin-right":10})).append($("<span/>").html(t.memo("help."+i)||i)),r.html()}).join("")},this.initialize=function(){var t=r.dialogsInBody?$(document.body):i,e=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.2</a> \xb7 ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a> \xb7 ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=n.dialog({title:o.options.help,fade:r.dialogsFade,body:this.createShortCutList(),footer:e,callback:function(t){t.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)},this.destroy=function(){n.hideDialog(this.$dialog),this.$dialog.remove()},this.showHelpDialog=function(){return $.Deferred(function(i){n.onDialogShown(e.$dialog,function(){t.triggerEvent("dialog.shown"),i.resolve()}),n.showDialog(e.$dialog)}).promise()},this.show=function(){t.invoke("editor.saveRange"),this.showHelpDialog().then(function(){t.invoke("editor.restoreRange")})}},AirPopover=function(t){var e=this,n=$.summernote.ui,i=t.options;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){e.update()},"summernote.change summernote.dialog.shown":function(){e.hide()},"summernote.focusout":function(t,n){agent.isFF||n.relatedTarget&&dom.ancestor(n.relatedTarget,func.eq(e.$popover[0]))||e.hide()}},this.shouldInitialize=function(){return i.airMode&&!list.isEmpty(i.popover.air)},this.initialize=function(){this.$popover=n.popover({className:"note-air-popover"}).render().appendTo("body");var e=this.$popover.find(".popover-content");t.invoke("buttons.build",e,i.popover.air)},this.destroy=function(){this.$popover.remove()},this.update=function(){var e=t.invoke("editor.currentStyle");if(e.range&&!e.range.isCollapsed()){var n=list.last(e.range.getClientRects());if(n){var i=func.rect2bnd(n);this.$popover.css({display:"block",left:Math.max(i.left+i.width/2,0)-20,top:i.top+i.height})}}else this.hide()},this.hide=function(){this.$popover.hide()}},HintPopover=function(t){var e=this,n=$.summernote.ui,i=5,r=t.options.hint||[],o=t.options.hintDirection||"bottom",s=$.isArray(r)?r:[r];this.events={"summernote.keyup":function(t,n){n.isDefaultPrevented()||e.handleKeyup(n)},"summernote.keydown":function(t,n){e.handleKeydown(n)},"summernote.dialog.shown":function(){e.hide()}},this.shouldInitialize=function(){return s.length>0},this.initialize=function(){this.lastWordRange=null,this.$popover=n.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo("body"),this.$popover.hide(),this.$content=this.$popover.find(".popover-content"),this.$content.on("click",".note-hint-item",function(){e.$content.find(".active").removeClass("active"),$(this).addClass("active"),e.replace()})},this.destroy=function(){this.$popover.remove()},this.selectItem=function(t){this.$content.find(".active").removeClass("active"),t.addClass("active"),this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2},this.moveDown=function(){var t=this.$content.find(".note-hint-item.active"),e=t.next();if(e.length)this.selectItem(e);else{var n=t.parent().next();n.length||(n=this.$content.find(".note-hint-group").first()),this.selectItem(n.find(".note-hint-item").first())}},this.moveUp=function(){var t=this.$content.find(".note-hint-item.active"),e=t.prev();if(e.length)this.selectItem(e);else{var n=t.parent().prev();n.length||(n=this.$content.find(".note-hint-group").last()),this.selectItem(n.find(".note-hint-item").last())}},this.replace=function(){var e=this.$content.find(".note-hint-item.active");if(e.length){var n=this.nodeFromItem(e);this.lastWordRange.insertNode(n),range.createFromNode(n).collapse().select(),this.lastWordRange=null,this.hide(),t.invoke("editor.focus")}},this.nodeFromItem=function(t){var e=s[t.data("index")],n=t.data("item"),i=e.content?e.content(n):n;return"string"==typeof i&&(i=dom.createText(i)),i},this.createItemTemplates=function(t,e){var n=s[t];return e.map(function(e,i){var r=$('<div class="note-hint-item"/>');return r.append(n.template?n.template(e):e+""),r.data({index:t,item:e}),0===t&&0===i&&r.addClass("active"),r})},this.handleKeydown=function(t){this.$popover.is(":visible")&&(t.keyCode===key.code.ENTER?(t.preventDefault(),this.replace()):t.keyCode===key.code.UP?(t.preventDefault(),this.moveUp()):t.keyCode===key.code.DOWN&&(t.preventDefault(),this.moveDown()))},this.searchKeyword=function(t,e,n){var i=s[t];if(i&&i.match.test(e)&&i.search){var r=i.match.exec(e);i.search(r[1],n)}else n()},this.createGroup=function(t,n){var i=$('<div class="note-hint-group note-hint-group-'+t+'"/>');return this.searchKeyword(t,n,function(n){n=n||[],n.length&&(i.html(e.createItemTemplates(t,n)),e.show())}),i},this.handleKeyup=function(n){if(list.contains([key.code.ENTER,key.code.UP,key.code.DOWN],n.keyCode)){if(n.keyCode===key.code.ENTER&&this.$popover.is(":visible"))return}else{var r=t.invoke("editor.createRange").getWordRange(),a=r.toString();if(s.length&&a){this.$content.empty();var l=func.rect2bnd(list.last(r.getClientRects()));l&&(this.$popover.hide(),this.lastWordRange=r,s.forEach(function(t,n){t.match.test(a)&&e.createGroup(n,a).appendTo(e.$content)}),"top"===o?this.$popover.css({left:l.left,top:l.top-this.$popover.outerHeight()-i}):this.$popover.css({left:l.left,top:l.top+l.height+i}))}else this.hide()}},this.show=function(){this.$popover.show()},this.hide=function(){this.$popover.hide()}};$.summernote=$.extend($.summernote,{version:"0.8.2",ui:ui,dom:dom,plugins:{},options:{modules:{editor:Editor,clipboard:Clipboard,dropzone:Dropzone,codeview:Codeview,statusbar:Statusbar,fullscreen:Fullscreen,handle:Handle,hintPopover:HintPopover,autoLink:AutoLink,autoSync:AutoSync,placeholder:Placeholder,buttons:Buttons,toolbar:Toolbar,linkDialog:LinkDialog,linkPopover:LinkPopover,imageDialog:ImageDialog,imagePopover:ImagePopover,videoDialog:VideoDialog,helpDialog:HelpDialog,airPopover:AirPopover},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],
colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";var e=t(window),n=t(document),i=window.location,r=!0,o=!1,s=null,a=NaN,l=1/0,c="undefined",u="directive",h=".cropper",d=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,f=/^(x|y|width|height)$/,p=/^(naturalWidth|naturalHeight|width|height|aspectRatio|ratio|rotate)$/,m="cropper-modal",g="cropper-hidden",v="cropper-invisible",y="cropper-crop",b="cropper-disabled",w="mousedown touchstart",x="mousemove touchmove",k="mouseup mouseleave touchend touchleave touchcancel",_="wheel mousewheel DOMMouseScroll",C="resize"+h,S="dblclick",D="build"+h,M="built"+h,T="dragstart"+h,L="dragmove"+h,E="dragend"+h,A=function(t){return"number"==typeof t},$=function(e,n){this.element=e,this.$element=t(e),this.defaults=t.extend({},$.DEFAULTS,t.isPlainObject(n)?n:{}),this.$original=s,this.ready=o,this.built=o,this.cropped=o,this.rotated=o,this.disabled=o,this.replaced=o,this.init()},I=Math.round,N=Math.sqrt,O=Math.min,P=Math.max,F=Math.abs,H=Math.sin,z=Math.cos,R=parseFloat;$.prototype={constructor:$,support:{canvas:t.isFunction(t("<canvas>")[0].getContext)},init:function(){var e=this.defaults;t.each(e,function(t,n){switch(t){case"aspectRatio":e[t]=F(R(n))||a;break;case"autoCropArea":e[t]=F(R(n))||.8;break;case"minWidth":case"minHeight":e[t]=F(R(n))||0;break;case"maxWidth":case"maxHeight":e[t]=F(R(n))||l}}),this.image={rotate:0},this.load()},load:function(){var e,n,i=this,o=this.$element,s=this.element,a=this.image,l="";o.is("img")?n=o.prop("src"):o.is("canvas")&&this.support.canvas&&(n=s.toDataURL()),n&&(this.replaced&&(a.rotate=0),this.defaults.checkImageOrigin&&(o.prop("crossOrigin")||this.isCrossOriginURL(n))&&(l=" crossOrigin"),this.$clone=e=t("<img"+l+' src="'+n+'">'),e.one("load",function(){a.naturalWidth=this.naturalWidth||e.width(),a.naturalHeight=this.naturalHeight||e.height(),a.aspectRatio=a.naturalWidth/a.naturalHeight,i.url=n,i.ready=r,i.build()}),e.addClass(v).prependTo("body"))},isCrossOriginURL:function(t){var e=t.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return!e||e[1]===i.protocol&&e[2]===i.hostname&&e[3]===i.port?o:r},build:function(){var e,i,o=this.$element,s=this.defaults;this.ready&&(this.built&&this.unbuild(),o.one(D,s.build),e=t.Event(D),o.trigger(e),e.isDefaultPrevented()||(this.$cropper=i=t($.TEMPLATE),o.addClass(g),this.$clone.removeClass(v).prependTo(i),this.rotated||(this.$original=this.$clone.clone(),this.$original.addClass(g).prependTo(this.$cropper),this.originalImage=t.extend({},this.image)),this.$container=o.parent(),this.$container.append(i),this.$canvas=i.find(".cropper-canvas"),this.$dragger=i.find(".cropper-dragger"),this.$viewer=i.find(".cropper-viewer"),s.autoCrop?this.cropped=r:this.$dragger.addClass(g),s.dragCrop&&this.setDragMode("crop"),s.modal&&this.$canvas.addClass(m),!s.dashed&&this.$dragger.find(".cropper-dashed").addClass(g),!s.movable&&this.$dragger.find(".cropper-face").data(u,"move"),!s.resizable&&this.$dragger.find(".cropper-line, .cropper-point").addClass(g),this.$scope=s.multiple?this.$cropper:n,this.addListeners(),this.initPreview(),this.built=r,this.update(),o.one(M,s.built),o.trigger(M)))},unbuild:function(){this.built&&(this.built=o,this.removeListeners(),this.$preview.empty(),this.$preview=s,this.$dragger=s,this.$canvas=s,this.$container=s,this.$cropper.remove(),this.$cropper=s)},update:function(t){this.initContainer(),this.initCropper(),this.initImage(),this.initDragger(),t?(this.setData(t,r),this.setDragMode("crop")):this.setData(this.defaults.data)},resize:function(){clearTimeout(this.resizing),this.resizing=setTimeout(t.proxy(this.update,this,this.getData()),200)},preview:function(){var e=this.image,n=this.dragger,i=e.width,r=e.height,o=n.left-e.left,s=n.top-e.top;this.$viewer.find("img").css({width:I(i),height:I(r),marginLeft:-I(o),marginTop:-I(s)}),this.$preview.each(function(){var e=t(this),a=e.width()/n.width;e.find("img").css({width:I(i*a),height:I(r*a),marginLeft:-I(o*a),marginTop:-I(s*a)})})},addListeners:function(){var n=this.defaults;this.$element.on(T,n.dragstart).on(L,n.dragmove).on(E,n.dragend),this.$cropper.on(w,this._dragstart=t.proxy(this.dragstart,this)).on(S,this._dblclick=t.proxy(this.dblclick,this)),n.zoomable&&this.$cropper.on(_,this._wheel=t.proxy(this.wheel,this)),this.$scope.on(x,this._dragmove=t.proxy(this.dragmove,this)).on(k,this._dragend=t.proxy(this.dragend,this)),e.on(C,this._resize=t.proxy(this.resize,this))},removeListeners:function(){var t=this.defaults;this.$element.off(T,t.dragstart).off(L,t.dragmove).off(E,t.dragend),this.$cropper.off(w,this._dragstart).off(S,this._dblclick),t.zoomable&&this.$cropper.off(_,this._wheel),this.$scope.off(x,this._dragmove).off(k,this._dragend),e.off(C,this._resize)},initPreview:function(){var e='<img src="'+this.url+'">';this.$preview=t(this.defaults.preview),this.$viewer.html(e),this.$preview.html(e).find("img").css("cssText","min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;")},initContainer:function(){var t=this.$container;this.container={width:P(t.width(),300),height:P(t.height(),150)}},initCropper:function(){var t,e=this.container,n=this.image;n.naturalWidth*e.height/n.naturalHeight-e.width>=0?(t={width:e.width,height:e.width/n.aspectRatio,left:0},t.top=(e.height-t.height)/2):(t={width:e.height*n.aspectRatio,height:e.height,top:0},t.left=(e.width-t.width)/2),this.$cropper.css({width:I(t.width),height:I(t.height),left:I(t.left),top:I(t.top)}),this.cropper=t},initImage:function(){var e=this.image,n=this.cropper,i={_width:n.width,_height:n.height,width:n.width,height:n.height,left:0,top:0,ratio:n.width/e.naturalWidth};this.defaultImage=t.extend({},e,i),e._width!==n.width||e._height!==n.height?t.extend(e,i):(e=t.extend({},i,e),this.replaced&&(this.replaced=o,e.ratio=i.ratio)),this.image=e,this.renderImage()},renderImage:function(t){var e=this.image;"zoom"===t&&(e.left-=(e.width-e.oldWidth)/2,e.top-=(e.height-e.oldHeight)/2),e.left=O(P(e.left,e._width-e.width),0),e.top=O(P(e.top,e._height-e.height),0),this.$clone.css({width:I(e.width),height:I(e.height),marginLeft:I(e.left),marginTop:I(e.top)}),t&&(this.defaults.done(this.getData()),this.preview())},initDragger:function(){var e,n=this.defaults,i=this.cropper,r=n.aspectRatio||this.image.aspectRatio,o=this.image.ratio;e=i.height*r-i.width>=0?{height:i.width/r,width:i.width,left:0,top:(i.height-i.width/r)/2,maxWidth:i.width,maxHeight:i.width/r}:{height:i.height,width:i.height*r,left:(i.width-i.height*r)/2,top:0,maxWidth:i.height*r,maxHeight:i.height},e.minWidth=0,e.minHeight=0,n.aspectRatio?(isFinite(n.maxWidth)?(e.maxWidth=O(e.maxWidth,n.maxWidth*o),e.maxHeight=e.maxWidth/r):isFinite(n.maxHeight)&&(e.maxHeight=O(e.maxHeight,n.maxHeight*o),e.maxWidth=e.maxHeight*r),n.minWidth>0?(e.minWidth=P(0,n.minWidth*o),e.minHeight=e.minWidth/r):n.minHeight>0&&(e.minHeight=P(0,n.minHeight*o),e.minWidth=e.minHeight*r)):(e.maxWidth=O(e.maxWidth,n.maxWidth*o),e.maxHeight=O(e.maxHeight,n.maxHeight*o),e.minWidth=P(0,n.minWidth*o),e.minHeight=P(0,n.minHeight*o)),e.minWidth=O(e.maxWidth,e.minWidth),e.minHeight=O(e.maxHeight,e.minHeight),e.height*=n.autoCropArea,e.width*=n.autoCropArea,e.left=(i.width-e.width)/2,e.top=(i.height-e.height)/2,e.oldLeft=e.left,e.oldTop=e.top,this.defaultDragger=e,this.dragger=t.extend({},e)},renderDragger:function(){var t=this.dragger,e=this.cropper;t.width>t.maxWidth?(t.width=t.maxWidth,t.left=t.oldLeft):t.width<t.minWidth&&(t.width=t.minWidth,t.left=t.oldLeft),t.height>t.maxHeight?(t.height=t.maxHeight,t.top=t.oldTop):t.height<t.minHeight&&(t.height=t.minHeight,t.top=t.oldTop),t.left=O(P(t.left,0),e.width-t.width),t.top=O(P(t.top,0),e.height-t.height),t.oldLeft=t.left,t.oldTop=t.top,this.dragger=t,this.disabled||this.defaults.done(this.getData()),this.$dragger.css({width:I(t.width),height:I(t.height),left:I(t.left),top:I(t.top)}),this.preview()},reset:function(e){this.cropped&&(e&&(this.defaults.data={}),this.image=t.extend({},this.defaultImage),this.renderImage(),this.dragger=t.extend({},this.defaultDragger),this.setData(this.defaults.data))},clear:function(){this.cropped&&(this.cropped=o,this.setData({x:0,y:0,width:0,height:0}),this.$canvas.removeClass(m),this.$dragger.addClass(g))},destroy:function(){var t=this.$element;this.ready&&(this.unbuild(),t.removeClass(g).removeData("cropper"),this.rotated&&t.attr("src",this.$original.attr("src")))},replace:function(e,n){var i,s=this,a=this.$element,l=this.element;e&&e!==this.url&&e!==a.attr("src")&&(n||(this.rotated=o,this.replaced=r),a.is("img")?(a.attr("src",e),this.load()):a.is("canvas")&&this.support.canvas&&(i=l.getContext("2d"),t('<img src="'+e+'">').one("load",function(){l.width=this.width,l.height=this.height,i.clearRect(0,0,l.width,l.height),i.drawImage(this,0,0),s.load()})))},setData:function(e,n){var i=this.cropper,r=this.dragger,o=this.image,a=this.defaults.aspectRatio;this.built&&typeof e!==c&&((e===s||t.isEmptyObject(e))&&(r=t.extend({},this.defaultDragger)),t.isPlainObject(e)&&!t.isEmptyObject(e)&&(n||(this.defaults.data=e),e=this.transformData(e),A(e.x)&&e.x<=i.width-o.left&&(r.left=e.x+o.left),A(e.y)&&e.y<=i.height-o.top&&(r.top=e.y+o.top),a?A(e.width)&&e.width<=r.maxWidth&&e.width>=r.minWidth?(r.width=e.width,r.height=r.width/a):A(e.height)&&e.height<=r.maxHeight&&e.height>=r.minHeight&&(r.height=e.height,r.width=r.height*a):(A(e.width)&&e.width<=r.maxWidth&&e.width>=r.minWidth&&(r.width=e.width),A(e.height)&&e.height<=r.maxHeight&&e.height>=r.minHeight&&(r.height=e.height))),this.dragger=r,this.renderDragger())},getData:function(t){var e=this.dragger,n=this.image,i={};return this.built&&(i={x:e.left-n.left,y:e.top-n.top,width:e.width,height:e.height},i=this.transformData(i,r,t)),i},transformData:function(e,n,i){var r=this.image.ratio,o={};return t.each(e,function(t,e){e=R(e),f.test(t)&&!isNaN(e)&&(o[t]=n?i?I(e/r):e/r:e*r)}),o},setAspectRatio:function(t){var e="auto"===t;t=R(t),(e||!isNaN(t)&&t>0)&&(this.defaults.aspectRatio=e?a:t,this.built&&(this.initDragger(),this.renderDragger()))},getImageData:function(){var e={};return this.ready&&t.each(this.image,function(t,n){p.test(t)&&(e[t]=n)}),e},getDataURL:function(e,n,i){var r,o=t("<canvas>")[0],s=this.getData(),a="";return t.isPlainObject(e)||(i=n,n=e,e={}),e=t.extend({width:s.width,height:s.height},e),this.cropped&&this.support.canvas&&(o.width=e.width,o.height=e.height,r=o.getContext("2d"),"image/jpeg"===n&&(r.fillStyle="#fff",r.fillRect(0,0,e.width,e.height)),r.drawImage(this.$clone[0],s.x,s.y,s.width,s.height,0,0,e.width,e.height),a=o.toDataURL(n,i)),a},setDragMode:function(t){var e=this.$canvas,n=this.defaults,i=o,s=o;if(this.built&&!this.disabled){switch(t){case"crop":n.dragCrop&&(i=r,e.data(u,t));break;case"move":s=r,e.data(u,t);break;default:e.removeData(u)}e.toggleClass(y,i).toggleClass("cropper-move",s)}},enable:function(){this.built&&(this.disabled=o,this.$cropper.removeClass(b))},disable:function(){this.built&&(this.disabled=r,this.$cropper.addClass(b))},rotate:function(t){var e=this.image;t=R(t)||0,this.built&&0!==t&&!this.disabled&&this.defaults.rotatable&&this.support.canvas&&(this.rotated=r,t=e.rotate=(e.rotate+t)%360,this.replace(this.getRotatedDataURL(t),!0))},getRotatedDataURL:function(e){var n=t("<canvas>")[0],i=n.getContext("2d"),r=e*Math.PI/180,o=F(e)%180,s=o>90?180-o:o,a=s*Math.PI/180,l=this.originalImage,c=l.naturalWidth,u=l.naturalHeight,h=F(c*z(a)+u*H(a)),d=F(c*H(a)+u*z(a));return n.width=h,n.height=d,i.save(),i.translate(h/2,d/2),i.rotate(r),i.drawImage(this.$original[0],-c/2,-u/2,c,u),i.restore(),n.toDataURL()},zoom:function(t){var e,n,i,r=this.image;t=R(t),this.built&&t&&!this.disabled&&this.defaults.zoomable&&(e=r.width*(1+t),n=r.height*(1+t),(i=e/r._width)>10||(1>i&&(e=r._width,n=r._height),this.setDragMode(1>=i?"crop":"move"),r.oldWidth=r.width,r.oldHeight=r.height,r.width=e,r.height=n,r.ratio=r.width/r.naturalWidth,this.renderImage("zoom")))},dblclick:function(){this.disabled||this.setDragMode(this.$canvas.hasClass(y)?"move":"crop")},wheel:function(t){var e,n=t.originalEvent,i=117.25,r=5;this.disabled||(t.preventDefault(),n.deltaY?(e=n.deltaY,e=e%r==0?e/r:e%i==0?e/i:e/166.66665649414062):e=n.wheelDelta?-n.wheelDelta/120:n.detail?n.detail/3:0,this.zoom(.1*e))},dragstart:function(e){var n,i,s,a=e.originalEvent.touches,l=e;if(!this.disabled){if(a){if((s=a.length)>1){if(!this.defaults.zoomable||2!==s)return;l=a[1],this.startX2=l.pageX,this.startY2=l.pageY,n="zoom"}l=a[0]}if(n=n||t(l.target).data(u),d.test(n)){if(e.preventDefault(),i=t.Event(T),this.$element.trigger(i),i.isDefaultPrevented())return;this.directive=n,this.cropping=o,this.startX=l.pageX,this.startY=l.pageY,"crop"===n&&(this.cropping=r,this.$canvas.addClass(m))}}},dragmove:function(e){var n,i,r=e.originalEvent.touches,o=e;if(!this.disabled){if(r){if((i=r.length)>1){if(!this.defaults.zoomable||2!==i)return;o=r[1],this.endX2=o.pageX,this.endY2=o.pageY}o=r[0]}if(this.directive){if(e.preventDefault(),n=t.Event(L),this.$element.trigger(n),n.isDefaultPrevented())return;this.endX=o.pageX,this.endY=o.pageY,this.dragging()}}},dragend:function(e){var n;if(!this.disabled&&this.directive){if(e.preventDefault(),n=t.Event(E),this.$element.trigger(n),n.isDefaultPrevented())return;this.cropping&&(this.cropping=o,this.$canvas.toggleClass(m,this.cropped&&this.defaults.modal)),this.directive=""}},dragging:function(){var t,e=this.directive,n=this.image,i=this.cropper,s=i.width,a=i.height,l=this.dragger,c=l.width,u=l.height,h=l.left,d=l.top,f=h+c,p=d+u,m=r,v=this.defaults,y=v.aspectRatio,b={x:this.endX-this.startX,y:this.endY-this.startY};switch(y&&(b.X=b.y*y,b.Y=b.x/y),e){case"all":h+=b.x,d+=b.y;break;case"e":if(b.x>=0&&(f>=s||y&&(0>=d||p>=a))){m=o;break}c+=b.x,y&&(u=c/y,d-=b.Y/2),0>c&&(e="w",c=0);break;case"n":if(b.y<=0&&(0>=d||y&&(0>=h||f>=s))){m=o;break}u-=b.y,d+=b.y,y&&(c=u*y,h+=b.X/2),0>u&&(e="s",u=0);break;case"w":if(b.x<=0&&(0>=h||y&&(0>=d||p>=a))){m=o;break}c-=b.x,h+=b.x,y&&(u=c/y,d+=b.Y/2),0>c&&(e="e",c=0);break;case"s":if(b.y>=0&&(p>=a||y&&(0>=h||f>=s))){m=o;break}u+=b.y,y&&(c=u*y,h-=b.X/2),0>u&&(e="n",u=0);break;case"ne":if(y){if(b.y<=0&&(0>=d||f>=s)){m=o;break}u-=b.y,d+=b.y,c=u*y}else b.x>=0?s>f?c+=b.x:b.y<=0&&0>=d&&(m=o):c+=b.x,b.y<=0?d>0&&(u-=b.y,d+=b.y):(u-=b.y,d+=b.y);0>u&&(e="sw",u=0,c=0);break;case"nw":if(y){if(b.y<=0&&(0>=d||0>=h)){m=o;break}u-=b.y,d+=b.y,c=u*y,h+=b.X}else b.x<=0?h>0?(c-=b.x,h+=b.x):b.y<=0&&0>=d&&(m=o):(c-=b.x,h+=b.x),b.y<=0?d>0&&(u-=b.y,d+=b.y):(u-=b.y,d+=b.y);0>u&&(e="se",u=0,c=0);break;case"sw":if(y){if(b.x<=0&&(0>=h||p>=a)){m=o;break}c-=b.x,h+=b.x,u=c/y}else b.x<=0?h>0?(c-=b.x,h+=b.x):b.y>=0&&p>=a&&(m=o):(c-=b.x,h+=b.x),b.y>=0?a>p&&(u+=b.y):u+=b.y;0>c&&(e="ne",u=0,c=0);break;case"se":if(y){if(b.x>=0&&(f>=s||p>=a)){m=o;break}c+=b.x,u=c/y}else b.x>=0?s>f?c+=b.x:b.y>=0&&p>=a&&(m=o):c+=b.x,b.y>=0?a>p&&(u+=b.y):u+=b.y;0>c&&(e="nw",u=0,c=0);break;case"move":n.left+=b.x,n.top+=b.y,this.renderImage("move"),m=o;break;case"zoom":v.zoomable&&(this.zoom(function(t,e,n,i,r,o){return(N(r*r+o*o)-N(n*n+i*i))/N(t*t+e*e)}(n.width,n.height,F(this.startX-this.startX2),F(this.startY-this.startY2),F(this.endX-this.endX2),F(this.endY-this.endY2))),this.endX2=this.startX2,this.endY2=this.startY2);break;case"crop":b.x&&b.y&&(t=this.$cropper.offset(),h=this.startX-t.left,d=this.startY-t.top,c=l.minWidth,u=l.minHeight,b.x>0?b.y>0?e="se":(e="ne",d-=u):b.y>0?(e="sw",h-=c):(e="nw",h-=c,d-=u),this.cropped||(this.cropped=r,this.$dragger.removeClass(g)))}m&&(l.width=c,l.height=u,l.left=h,l.top=d,this.directive=e,this.renderDragger()),this.startX=this.endX,this.startY=this.endY}},$.TEMPLATE=function(t,e){return e=e.split(","),t.replace(/\d+/g,function(t){return e[t]})}('<0 6="5-container"><0 6="5-canvas"></0><0 6="5-dragger"><1 6="5-viewer"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-face" 3-2="all"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,directive,data,point,cropper,class,line,dashed"),$.DEFAULTS={aspectRatio:"auto",autoCropArea:.8,data:{},done:t.noop,preview:"",multiple:o,autoCrop:r,dragCrop:r,dashed:r,modal:r,movable:r,resizable:r,zoomable:r,rotatable:r,checkImageOrigin:r,minWidth:0,minHeight:0,maxWidth:l,maxHeight:l,build:s,built:s,dragstart:s,dragmove:s,dragend:s},$.setDefaults=function(e){t.extend($.DEFAULTS,e)},$.other=t.fn.cropper,t.fn.cropper=function(e){var n,i=[].slice.call(arguments,1);return this.each(function(){var r,o=t(this),s=o.data("cropper");s||o.data("cropper",s=new $(this,e)),"string"==typeof e&&t.isFunction(r=s[e])&&(n=r.apply(s,i))}),typeof n!==c?n:this},t.fn.cropper.Constructor=$,t.fn.cropper.setDefaults=$.setDefaults,t.fn.cropper.noConflict=function(){return t.fn.cropper=$.other,this}}),function(t,e,n,i){var r,o=0,s=function(){var t=i.userAgent,e=/msie\s\d+/i;return 0<t.search(e)&&(t=e.exec(t).toString(),9>(t=t.split(" ")[1]))}(),a="ontouchstart"in n||0<i.msMaxTouchPoints,l=function(t){return"Number"!=typeof t&&(t=parseFloat(t)),isNaN(t)?null:t},c={init:function(i){return this.each(function(){var c=t.extend({min:null,max:null,from:null,to:null,type:"single",step:null,prefix:"",postfix:"",maxPostfix:"",hasGrid:!1,hideMinMax:!1,hideFromTo:!1,prettify:!0,disable:!1,values:null,onChange:null,onLoad:null,onFinish:null},i),u=t(this),h=this,d=!1,f=null;if(!u.data("isActive")){u.data("isActive",!0),this.pluginCount=o+=1,u.prop("value")&&(f=u.prop("value").split(";")),"single"===c.type?f&&1<f.length?("number"!=typeof c.min?c.min=parseFloat(f[0]):"number"!=typeof c.from&&(c.from=parseFloat(f[0])),"number"!=typeof c.max&&(c.max=parseFloat(f[1]))):f&&1===f.length&&"number"!=typeof c.from&&(c.from=parseFloat(f[0])):"double"===c.type&&(f&&1<f.length?("number"!=typeof c.min?c.min=parseFloat(f[0]):"number"!=typeof c.from&&(c.from=parseFloat(f[0])),"number"!=typeof c.max?c.max=parseFloat(f[1]):"number"!=typeof c.to&&(c.to=parseFloat(f[1]))):f&&1===f.length&&("number"!=typeof c.min?c.min=parseFloat(f[0]):"number"!=typeof c.from&&(c.from=parseFloat(f[0])))),"number"==typeof u.data("min")&&(c.min=parseFloat(u.data("min"))),"number"==typeof u.data("max")&&(c.max=parseFloat(u.data("max"))),"number"==typeof u.data("from")&&(c.from=parseFloat(u.data("from"))),"number"==typeof u.data("to")&&(c.to=parseFloat(u.data("to"))),u.data("step")&&(c.step=parseFloat(u.data("step"))),u.data("type")&&(c.type=u.data("type")),u.data("prefix")&&(c.prefix=u.data("prefix")),u.data("postfix")&&(c.postfix=u.data("postfix")),u.data("maxpostfix")&&(c.maxPostfix=u.data("maxpostfix")),u.data("hasgrid")&&(c.hasGrid=u.data("hasgrid")),u.data("hideminmax")&&(c.hideMinMax=u.data("hideminmax")),u.data("hidefromto")&&(c.hideFromTo=u.data("hidefromto")),u.data("prettify")&&(c.prettify=u.data("prettify")),u.data("disable")&&(c.disable=u.data("disable")),u.data("values")&&(c.values=u.data("values").split(",")),c.min=l(c.min),c.min||0===c.min||(c.min=10),c.max=l(c.max),c.max||0===c.max||(c.max=100),"[object Array]"!==Object.prototype.toString.call(c.values)&&(c.values=null),c.values&&0<c.values.length&&(c.min=0,c.max=c.values.length-1,c.step=1,d=!0),c.from=l(c.from),c.from||0===c.from||(c.from=c.min),c.to=l(c.to),c.to||0===c.to||(c.to=c.max),c.step=l(c.step),c.step||(c.step=1),c.from<c.min&&(c.from=c.min),c.from>c.max&&(c.from=c.min),c.to<c.min&&(c.to=c.max),c.to>c.max&&(c.to=c.max),"double"===c.type&&(c.from>c.to&&(c.from=c.to),c.to<c.from&&(c.to=c.from));var p=function(t){return t=t.toString(),c.prettify&&(t=t.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")),t},f='<span class="irs" id="irs-'+this.pluginCount+'"></span>';u[0].style.display="none",u.before(f);var m,g,v,y,b,w,x,k,_,C,S,D,M=u.prev(),T=t(e.body),L=t(n),E=!1,A=!1,$=!0,I={},N=0,O=0,P=0,F=0,H=0,z=0,R=0,j=0,W=0,B=0,Y=0;parseInt(c.step,10)!==parseFloat(c.step)&&(Y=c.step.toString().split(".")[1],Y=Math.pow(10,Y.length)),this.updateData=function(e){$=!0,c=t.extend(c,e),M.find("*").off(),L.off("mouseup.irs"+h.pluginCount),T.off("mouseup.irs"+h.pluginCount),T.off("mousemove.irs"+h.pluginCount),M.html(""),U()},this.removeSlider=function(){M.find("*").off(),L.off("mouseup.irs"+h.pluginCount),T.off("mouseup.irs"+h.pluginCount),T.off("mousemove.irs"+h.pluginCount),M.html("").remove(),u.data("isActive",!1),u.show()};var U=function(){M.html('<span class="irs"><span class="irs-line"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span>'),m=M.find(".irs"),g=m.find(".irs-min"),v=m.find(".irs-max"),y=m.find(".irs-from"),b=m.find(".irs-to"),w=m.find(".irs-single"),D=M.find(".irs-grid"),c.hideFromTo&&(y[0].style.visibility="hidden",b[0].style.visibility="hidden",w[0].style.visibility="hidden"),c.hideFromTo||(y[0].style.visibility="visible",b[0].style.visibility="visible",w[0].style.visibility="visible"),c.hideMinMax&&(g[0].style.visibility="hidden",v[0].style.visibility="hidden",P=O=0),c.hideMinMax||(g[0].style.visibility="visible",v[0].style.visibility="visible",c.values?(g.html(c.prefix+c.values[0]+c.postfix),v.html(c.prefix+c.values[c.values.length-1]+c.maxPostfix+c.postfix)):(g.html(c.prefix+p(c.min)+c.postfix),v.html(c.prefix+p(c.max)+c.maxPostfix+c.postfix)),O=g.outerWidth(),P=v.outerWidth()),q()},q=function(){"single"===c.type?(m.append('<span class="irs-slider single"></span>'),x=m.find(".single"),x.on("mousedown",function(e){e.preventDefault(),e.stopPropagation(),G(e,t(this),null),A=E=!0,r=h.pluginCount,s&&t("*").prop("unselectable",!0)}),a&&x.on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),G(e.originalEvent.touches[0],t(this),null),A=E=!0,r=h.pluginCount})):"double"===c.type&&(m.append('<span class="irs-diapason"></span><span class="irs-slider from"></span><span class="irs-slider to"></span>'),k=m.find(".from"),_=m.find(".to"),S=m.find(".irs-diapason"),K(),k.on("mousedown",function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("last"),_.removeClass("last"),G(e,t(this),"from"),A=E=!0,r=h.pluginCount,s&&t("*").prop("unselectable",!0)}),_.on("mousedown",function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("last"),k.removeClass("last"),G(e,t(this),"to"),A=E=!0,r=h.pluginCount,s&&t("*").prop("unselectable",!0)}),a&&(k.on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("last"),_.removeClass("last"),G(e.originalEvent.touches[0],t(this),"from"),A=E=!0,r=h.pluginCount}),_.on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("last"),k.removeClass("last"),G(e.originalEvent.touches[0],t(this),"to"),A=E=!0,r=h.pluginCount})),c.to===c.max&&k.addClass("last")),T.on("mouseup.irs"+h.pluginCount,function(){r===h.pluginCount&&E&&(E=A=!1,C.removeAttr("id"),C=null,"double"===c.type&&K(),Z(),s&&t("*").prop("unselectable",!1))}),T.on("mousemove.irs"+h.pluginCount,function(t){E&&(N=t.pageX,X())}),M.on("mousedown",function(){r=h.pluginCount}),M.on("mouseup",function(t){if(r===h.pluginCount&&!E&&!c.disable){t=t.pageX,$=!1,t-=M.offset().left;var e=I.fromX+(I.toX-I.fromX)/2;j=0,R=m.width()-z,W=m.width()-z,"single"===c.type?(C=x,C.attr("id","irs-active-slider"),X(t)):"double"===c.type&&(C=t<=e?k:_,C.attr("id","irs-active-slider"),X(t),K()),C.removeAttr("id"),C=null}}),a&&(L.on("touchend",function(){E&&(E=A=!1,C.removeAttr("id"),C=null,"double"===c.type&&K(),Z())}),L.on("touchmove",function(t){E&&(N=t.originalEvent.touches[0].pageX,X())})),V(),Q(),c.hasGrid&&et(),c.disable?(M.addClass("irs-disabled"),M.append('<span class="irs-disable-mask"></span>')):(M.removeClass("irs-disabled"),M.find(".irs-disable-mask").remove())},V=function(){F=m.width(),z=x?x.width():k.width(),H=F-z},G=function(t,e,n){V(),$=!1,C=e,C.attr("id","irs-active-slider"),e=C.offset().left,B=e+(t.pageX-e)-C.position().left,"single"===c.type?R=m.width()-z:"double"===c.type&&("from"===n?(j=0,W=parseInt(_.css("left"),10)):(j=parseInt(k.css("left"),10),W=m.width()-z))},K=function(){var e=k.width(),n=t.data(k[0],"x")||parseInt(k[0].style.left,10)||k.position().left,i=(t.data(_[0],"x")||parseInt(_[0].style.left,10)||_.position().left)-n;S[0].style.left=n+e/2+"px",S[0].style.width=i+"px"},X=function(e){var n=N-B,n=e||N-B;"single"===c.type?(0>n&&(n=0),n>R&&(n=R)):"double"===c.type&&(n<j&&(n=j),n>W&&(n=W),K()),t.data(C[0],"x",n),Z(),e=Math.round(n),C[0].style.left=e+"px"},Z=function(){var e,n={input:u,slider:M,min:c.min,max:c.max,fromNumber:0,toNumber:0,fromPers:0,toPers:0,fromX:0,fromX_pure:0,toX:0,toX_pure:0},i=c.max-c.min;"single"===c.type?(n.fromX=t.data(x[0],"x")||parseInt(x[0].style.left,10)||x.position().left,n.fromPers=n.fromX/H*100,e=i/100*n.fromPers+c.min,n.fromNumber=Math.round(e/c.step)*c.step,n.fromNumber<c.min&&(n.fromNumber=c.min),n.fromNumber>c.max&&(n.fromNumber=c.max),Y&&(n.fromNumber=parseInt(n.fromNumber*Y,10)/Y),d&&(n.fromValue=c.values[n.fromNumber])):"double"===c.type&&(n.fromX=t.data(k[0],"x")||parseInt(k[0].style.left,10)||k.position().left,n.fromPers=n.fromX/H*100,e=i/100*n.fromPers+c.min,n.fromNumber=Math.round(e/c.step)*c.step,n.fromNumber<c.min&&(n.fromNumber=c.min),n.toX=t.data(_[0],"x")||parseInt(_[0].style.left,10)||_.position().left,n.toPers=n.toX/H*100,i=i/100*n.toPers+c.min,n.toNumber=Math.round(i/c.step)*c.step,n.toNumber>c.max&&(n.toNumber=c.max),Y&&(n.fromNumber=parseInt(n.fromNumber*Y,10)/Y,n.toNumber=parseInt(n.toNumber*Y,10)/Y),d&&(n.fromValue=c.values[n.fromNumber],n.toValue=c.values[n.toNumber])),I=n,J()},Q=function(){var e={input:u,slider:M,min:c.min,max:c.max,fromNumber:c.from,toNumber:c.to,fromPers:0,toPers:0,fromX:0,fromX_pure:0,toX:0,toX_pure:0},n=c.max-c.min;"single"===c.type?(e.fromPers=0!==n?(e.fromNumber-c.min)/n*100:0,e.fromX_pure=H/100*e.fromPers,e.fromX=Math.round(e.fromX_pure),x[0].style.left=e.fromX+"px",t.data(x[0],"x",e.fromX_pure)):"double"===c.type&&(e.fromPers=0!==n?(e.fromNumber-c.min)/n*100:0,e.fromX_pure=H/100*e.fromPers,e.fromX=Math.round(e.fromX_pure),k[0].style.left=e.fromX+"px",t.data(k[0],"x",e.fromX_pure),e.toPers=0!==n?(e.toNumber-c.min)/n*100:1,e.toX_pure=H/100*e.toPers,e.toX=Math.round(e.toX_pure),_[0].style.left=e.toX+"px",t.data(_[0],"x",e.toX_pure),K()),I=e,J()},J=function(){var t,e,n,i,r,o;o=z/2,n="","single"===c.type?(n=I.fromNumber===c.max?c.maxPostfix:"",y[0].style.display="none",b[0].style.display="none",n=d?c.prefix+c.values[I.fromNumber]+n+c.postfix:c.prefix+p(I.fromNumber)+n+c.postfix,w.html(n),r=w.outerWidth(),o=I.fromX-r/2+o,0>o&&(o=0),o>F-r&&(o=F-r),w[0].style.left=o+"px",c.hideMinMax||c.hideFromTo||(g[0].style.display=o<O?"none":"block",v[0].style.display=o+r>F-P?"none":"block"),u.attr("value",parseFloat(I.fromNumber))):"double"===c.type&&(n=I.toNumber===c.max?c.maxPostfix:"",d?(t=c.prefix+c.values[I.fromNumber]+c.postfix,e=c.prefix+c.values[I.toNumber]+n+c.postfix,n=I.fromNumber!==I.toNumber?c.prefix+c.values[I.fromNumber]+" \u2014 "+c.prefix+c.values[I.toNumber]+n+c.postfix:c.prefix+c.values[I.fromNumber]+n+c.postfix):(t=c.prefix+p(I.fromNumber)+c.postfix,e=c.prefix+p(I.toNumber)+n+c.postfix,n=I.fromNumber!==I.toNumber?c.prefix+p(I.fromNumber)+" \u2014 "+c.prefix+p(I.toNumber)+n+c.postfix:c.prefix+p(I.fromNumber)+n+c.postfix),y.html(t),b.html(e),w.html(n),t=y.outerWidth(),e=I.fromX-t/2+o,0>e&&(e=0),e>F-t&&(e=F-t),y[0].style.left=e+"px",n=b.outerWidth(),i=I.toX-n/2+o,0>i&&(i=0),i>F-n&&(i=F-n),b[0].style.left=i+"px",r=w.outerWidth(),o=I.fromX+(I.toX-I.fromX)/2-r/2+o,0>o&&(o=0),o>F-r&&(o=F-r),w[0].style.left=o+"px",e+t<i?(w[0].style.display="none",y[0].style.display="block",b[0].style.display="block"):(w[0].style.display="block",y[0].style.display="none",b[0].style.display="none"),c.hideMinMax||c.hideFromTo||(g[0].style.display=o<O||e<O?"none":"block",v[0].style.display=o+r>F-P||i+n>F-P?"none":"block"),u.attr("value",parseFloat(I.fromNumber)+";"+parseFloat(I.toNumber))),tt()},tt=function(){"function"!=typeof c.onFinish||A||$||c.onFinish.call(this,I),"function"!=typeof c.onChange||$||c.onChange.call(this,I),"function"==typeof c.onLoad&&!A&&$&&(c.onLoad.call(this,I),$=!1)},et=function(){M.addClass("irs-with-grid");var t,e="",n=0,n=0,i="";for(t=0;20>=t;t+=1)n=Math.floor(F/20*t),n>=F&&(n=F-1),i+='<span class="irs-grid-pol small" style="left: '+n+'px;"></span>';for(t=0;4>=t;t+=1)n=Math.floor(F/4*t),n>=F&&(n=F-1),i+='<span class="irs-grid-pol" style="left: '+n+'px;"></span>',Y?(e=c.min+(c.max-c.min)/4*t,e=e/c.step*c.step,e=parseInt(e*Y,10)/Y):(e=Math.round(c.min+(c.max-c.min)/4*t),e=Math.round(e/c.step)*c.step,e=p(e)),d&&(c.hideMinMax?(e=Math.round(c.min+(c.max-c.min)/4*t),e=Math.round(e/c.step)*c.step,e=0===t||4===t?c.values[e]:""):e=""),0===t?i+='<span class="irs-grid-text" style="left: '+n+'px; text-align: left;">'+e+"</span>":4===t?(n-=100,i+='<span class="irs-grid-text" style="left: '+n+'px; text-align: right;">'+e+"</span>"):(n-=50,i+='<span class="irs-grid-text" style="left: '+n+'px;">'+e+"</span>");D.html(i)};U()}})},
update:function(t){return this.each(function(){this.updateData(t)})},remove:function(){return this.each(function(){this.removeSlider()})}};t.fn.ionRangeSlider=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist for jQuery.ionRangeSlider"):c.init.apply(this,arguments)}}(jQuery,document,window,navigator),function(t){"use strict";var e={},n=Math.max,i=Math.min;e.c={},e.c.d=t(document),e.c.t=function(t){return t.originalEvent.touches.length-1},e.o=function(){var n=this;this.o=null,this.$=null,this.i=null,this.g=null,this.v=null,this.cv=null,this.x=0,this.y=0,this.w=0,this.h=0,this.$c=null,this.c=null,this.t=0,this.isInit=!1,this.fgColor=null,this.pColor=null,this.dH=null,this.cH=null,this.eH=null,this.rH=null,this.scale=1,this.relative=!1,this.relativeWidth=!1,this.relativeHeight=!1,this.$div=null,this.run=function(){var e=function(t,e){var i;for(i in e)n.o[i]=e[i];n._carve().init(),n._configure()._draw()};if(!this.$.data("kontroled")){if(this.$.data("kontroled",!0),this.extend(),this.o=t.extend({min:this.$.data("min")!==undefined?this.$.data("min"):0,max:this.$.data("max")!==undefined?this.$.data("max"):100,stopper:!0,readOnly:this.$.data("readonly")||"readonly"===this.$.attr("readonly"),cursor:!0===this.$.data("cursor")&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")&&Math.max(Math.min(this.$.data("thickness"),1),.01)||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:null==this.$.data("displayinput")||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor"),font:this.$.data("font")||"Arial",fontWeight:this.$.data("font-weight")||"bold",inline:!1,step:this.$.data("step")||1,rotation:this.$.data("rotation"),draw:null,change:null,cancel:null,release:null,format:function(t){return t},parse:function(t){return parseFloat(t)}},this.o),this.o.flip="anticlockwise"===this.o.rotation||"acw"===this.o.rotation,this.o.inputColor||(this.o.inputColor=this.o.fgColor),this.$.is("fieldset")?(this.v={},this.i=this.$.find("input"),this.i.each(function(e){var i=t(this);n.i[e]=i,n.v[e]=n.o.parse(i.val()),i.bind("change blur",function(){var t={};t[e]=i.val(),n.val(t)})}),this.$.find("legend").remove()):(this.i=this.$,this.v=this.o.parse(this.$.val()),""===this.v&&(this.v=this.o.min),this.$.bind("change blur",function(){n.val(n._validate(n.o.parse(n.$.val())))})),!this.o.displayInput&&this.$.hide(),this.$c=t(document.createElement("canvas")).attr({width:this.o.width,height:this.o.height}),this.$div=t('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+'px;"></div>'),this.$.wrap(this.$div).before(this.$c),this.$div=this.$.parent(),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.$c[0]),this.c=this.$c[0].getContext?this.$c[0].getContext("2d"):null,!this.c)throw{name:"CanvasNotSupportedException",message:"Canvas not supported. Please use excanvas on IE8.0.",toString:function(){return this.name+": "+this.message}};return this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1),this.relativeWidth=this.o.width%1!=0&&this.o.width.indexOf("%"),this.relativeHeight=this.o.height%1!=0&&this.o.height.indexOf("%"),this.relative=this.relativeWidth||this.relativeHeight,this._carve(),this.v instanceof Object?(this.cv={},this.copy(this.v,this.cv)):this.cv=this.v,this.$.bind("configure",e).parent().bind("configure",e),this._listen()._configure()._xy().init(),this.isInit=!0,this.$.val(this.o.format(this.v)),this._draw(),this}},this._carve=function(){if(this.relative){var t=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),e=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(t,e)}else this.w=this.o.width,this.h=this.o.height;return this.$div.css({width:this.w+"px",height:this.h+"px"}),this.$c.attr({width:this.w,height:this.h}),1!==this.scale&&(this.$c[0].width=this.$c[0].width*this.scale,this.$c[0].height=this.$c[0].height*this.scale,this.$c.width(this.w),this.$c.height(this.h)),this},this._draw=function(){var t=!0;n.g=n.c,n.clear(),n.dH&&(t=n.dH()),!1!==t&&n.draw()},this._touch=function(t){var i=function(t){var e=n.xy2val(t.originalEvent.touches[n.t].pageX,t.originalEvent.touches[n.t].pageY);e!=n.cv&&(n.cH&&!1===n.cH(e)||(n.change(n._validate(e)),n._draw()))};return this.t=e.c.t(t),i(t),e.c.d.bind("touchmove.k",i).bind("touchend.k",function(){e.c.d.unbind("touchmove.k touchend.k"),n.val(n.cv)}),this},this._mouse=function(t){var i=function(t){var e=n.xy2val(t.pageX,t.pageY);e!=n.cv&&(n.cH&&!1===n.cH(e)||(n.change(n._validate(e)),n._draw()))};return i(t),e.c.d.bind("mousemove.k",i).bind("keyup.k",function(t){if(27===t.keyCode){if(e.c.d.unbind("mouseup.k mousemove.k keyup.k"),n.eH&&!1===n.eH())return;n.cancel()}}).bind("mouseup.k",function(){e.c.d.unbind("mousemove.k mouseup.k keyup.k"),n.val(n.cv)}),this},this._xy=function(){var t=this.$c.offset();return this.x=t.left,this.y=t.top,this},this._listen=function(){return this.o.readOnly?this.$.attr("readonly","readonly"):(this.$c.bind("mousedown",function(t){t.preventDefault(),n._xy()._mouse(t)}).bind("touchstart",function(t){t.preventDefault(),n._xy()._touch(t)}),this.listen()),this.relative&&t(window).resize(function(){n._carve().init(),n._draw()}),this},this._configure=function(){return this.o.draw&&(this.dH=this.o.draw),this.o.change&&(this.cH=this.o.change),this.o.cancel&&(this.eH=this.o.cancel),this.o.release&&(this.rH=this.o.release),this.o.displayPrevious?(this.pColor=this.h2rgba(this.o.fgColor,"0.4"),this.fgColor=this.h2rgba(this.o.fgColor,"0.6")):this.fgColor=this.o.fgColor,this},this._clear=function(){this.$c[0].width=this.$c[0].width},this._validate=function(t){return~~((t<0?-.5:.5)+t/this.o.step)*this.o.step},this.listen=function(){},this.extend=function(){},this.init=function(){},this.change=function(){},this.val=function(){},this.xy2val=function(){},this.draw=function(){},this.clear=function(){this._clear()},this.h2rgba=function(t,e){var n;return t=t.substring(1,7),n=[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)],"rgba("+n[0]+","+n[1]+","+n[2]+","+e+")"},this.copy=function(t,e){for(var n in t)e[n]=t[n]}},e.Dial=function(){e.o.call(this),this.startAngle=null,this.xy=null,this.radius=null,this.lineWidth=null,this.cursorExt=null,this.w2=null,this.PI2=2*Math.PI,this.extend=function(){this.o=t.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:!0},this.o)},this.val=function(t,e){if(null==t)return this.v;t=this.o.parse(t),!1!==e&&t!=this.v&&this.rH&&!1===this.rH(t)||(this.cv=this.o.stopper?n(i(t,this.o.max),this.o.min):t,this.v=this.cv,this.$.val(this.o.format(this.v)),this._draw())},this.xy2val=function(t,e){var r,o;return r=Math.atan2(t-(this.x+this.w2),-(e-this.y-this.w2))-this.angleOffset,this.o.flip&&(r=this.angleArc-r-this.PI2),this.angleArc!=this.PI2&&r<0&&r>-.5?r=0:r<0&&(r+=this.PI2),o=~~(.5+r*(this.o.max-this.o.min)/this.angleArc)+this.o.min,this.o.stopper&&(o=n(i(o,this.o.max),this.o.min)),o},this.listen=function(){var e,r,o,s,a=this,l=function(t){t.preventDefault();var o=t.originalEvent,s=o.detail||o.wheelDeltaX,l=o.detail||o.wheelDeltaY,c=a._validate(a.o.parse(a.$.val()))+(s>0||l>0?a.o.step:s<0||l<0?-a.o.step:0);c=n(i(c,a.o.max),a.o.min),a.val(c,!1),a.rH&&(clearTimeout(e),e=setTimeout(function(){a.rH(c),e=null},100),r||(r=setTimeout(function(){e&&a.rH(c),r=null},200)))},c=1,u={37:-a.o.step,38:a.o.step,39:a.o.step,40:-a.o.step};this.$.bind("keydown",function(e){var r=e.keyCode;if(r>=96&&r<=105&&(r=e.keyCode=r-48),o=parseInt(String.fromCharCode(r)),isNaN(o)&&(13!==r&&8!==r&&9!==r&&189!==r&&(190!==r||a.$.val().match(/\./))&&e.preventDefault(),t.inArray(r,[37,38,39,40])>-1)){e.preventDefault();var l=a.o.parse(a.$.val())+u[r]*c;a.o.stopper&&(l=n(i(l,a.o.max),a.o.min)),a.change(l),a._draw(),s=window.setTimeout(function(){c*=2},30)}}).bind("keyup",function(){isNaN(o)?s&&(window.clearTimeout(s),s=null,c=1,a.val(a.$.val())):a.$.val()>a.o.max&&a.$.val(a.o.max)||a.$.val()<a.o.min&&a.$.val(a.o.min)}),this.$c.bind("mousewheel DOMMouseScroll",l),this.$.bind("mousewheel DOMMouseScroll",l)},this.init=function(){(this.v<this.o.min||this.v>this.o.max)&&(this.v=this.o.min),this.$.val(this.v),this.w2=this.w/2,this.cursorExt=this.o.cursor/100,this.xy=this.w2*this.scale,this.lineWidth=this.xy*this.o.thickness,this.lineCap=this.o.lineCap,this.radius=this.xy-this.lineWidth/2,this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset),this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc),this.angleOffset=this.o.angleOffset*Math.PI/180,this.angleArc=this.o.angleArc*Math.PI/180,this.startAngle=1.5*Math.PI+this.angleOffset,this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var t=n(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+"px",height:(this.w/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.w/3>>0)+"px","margin-left":"-"+(3*this.w/4+2>>0)+"px",border:0,background:"none",font:this.o.fontWeight+" "+(this.w/t>>0)+"px "+this.o.font,"text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})},this.change=function(t){this.cv=t,this.$.val(this.o.format(t))},this.angle=function(t){return(t-this.o.min)*this.angleArc/(this.o.max-this.o.min)},this.arc=function(t){var e,n;return t=this.angle(t),this.o.flip?(e=this.endAngle+1e-5,n=e-t-1e-5):(e=this.startAngle-1e-5,n=e+t+1e-5),this.o.cursor&&(e=n-this.cursorExt)&&(n+=this.cursorExt),{s:e,e:n,d:this.o.flip&&!this.o.cursor}},this.draw=function(){var t,e=this.g,n=this.arc(this.cv),i=1;e.lineWidth=this.lineWidth,e.lineCap=this.lineCap,e.beginPath(),e.strokeStyle=this.o.bgColor,e.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,!0),e.stroke(),this.o.displayPrevious&&(t=this.arc(this.v),e.beginPath(),e.strokeStyle=this.pColor,e.arc(this.xy,this.xy,this.radius,t.s,t.e,t.d),e.stroke(),i=this.cv==this.v),e.beginPath(),e.strokeStyle=i?this.o.fgColor:this.fgColor,e.arc(this.xy,this.xy,this.radius,n.s,n.e,n.d),e.stroke()},this.cancel=function(){this.val(this.v)}},t.fn.dial=t.fn.knob=function(n){return this.each(function(){var i=new e.Dial;i.o=n,i.$=t(this),i.run()}).parent()}}(jQuery),function(t){function e(e,n){var o=!1;return t.each(e?r:i,function(e){if(t(n).hasClass(e))return o=e,!1}),o}var n=t.fn.val,i={},r={},o={};t.classVal=function(t,e,n,s){"string"==typeof t&&"boolean"==typeof s&&(e&&(i[t]=e),n&&(r[t]=n),o[t]=s)},t.fn.val=function(){var s,a,l=Array.prototype.slice.call(arguments,0);return l.length?this.each(function(){(s=e(!0,this))?(a=o[s]?t(this):this,a[r[s]].apply(this,l)):n.apply(t(this),l)}):(s=e(!1,this))?(a=o[s]?this:this[0],a[i[s]].apply(a)):n.apply(this)}}(window.jQuery||window.Zepto),function(t){function e(t,e,n){if((t[e]||t[n])&&t[e]===t[n])throw Error("(Link) '"+e+"' can't match '"+n+"'.'")}function n(n){if(void 0===n&&(n={}),"object"!=typeof n)throw Error("(Format) 'format' option must be an object.");var i={};t(r).each(function(t,e){if(void 0===n[e])i[e]=o[t];else{if(typeof n[e]!=typeof o[t])throw Error("(Format) 'format."+e+"' must be a "+typeof o[t]+".");if("decimals"===e&&(0>n[e]||7<n[e]))throw Error("(Format) 'format.decimals' option must be between 0 and 7.");i[e]=n[e]}}),e(i,"mark","thousand"),e(i,"prefix","negative"),e(i,"prefix","negativeBefore"),this.r=i}function i(e,n){return"object"!=typeof e&&t.error("(Link) Initialize with an object."),new i.prototype.p(e.target||function(){},e.method,e.format||{},n)}var r="decimals mark thousand prefix postfix encoder decoder negative negativeBefore to from".split(" "),o=[2,".","","","",function(t){return t},function(t){return t},"-","",function(t){return t},function(t){return t}];n.prototype.a=function(t){return this.r[t]},n.prototype.L=function(t){function e(t){return t.split("").reverse().join("")}t=this.a("encoder")(t);var n=this.a("decimals"),i="",r="",o="",s="";return 0===parseFloat(t.toFixed(n))&&(t="0"),0>t&&(i=this.a("negative"),r=this.a("negativeBefore")),t=Math.abs(t).toFixed(n).toString(),t=t.split("."),this.a("thousand")?(o=e(t[0]).match(/.{1,3}/g),o=e(o.join(e(this.a("thousand"))))):o=t[0],this.a("mark")&&1<t.length&&(s=this.a("mark")+t[1]),this.a("to")(r+this.a("prefix")+i+o+s+this.a("postfix"))},n.prototype.w=function(t){function e(t){return t.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var n;return null!==t&&void 0!==t&&(t=this.a("from")(t),t=t.toString(),n=t.replace(RegExp("^"+e(this.a("negativeBefore"))),""),t!==n?(t=n,n="-"):n="",t=t.replace(RegExp("^"+e(this.a("prefix"))),""),this.a("negative")&&(n="",t=t.replace(RegExp("^"+e(this.a("negative"))),"-")),t=t.replace(RegExp(e(this.a("postfix"))+"$"),"").replace(RegExp(e(this.a("thousand")),"g"),"").replace(this.a("mark"),"."),t=this.a("decoder")(parseFloat(n+t)),!isNaN(t)&&t)},i.prototype.K=function(e,n){this.method=n||"html",this.j=t(e.replace("-tooltip-","")||"<div/>")[0]},i.prototype.H=function(t){this.method="val",this.j=document.createElement("input"),this.j.name=t,this.j.type="hidden"},i.prototype.G=function(e){function n(t,e){return[e?null:t,e?t:null]}var i=this;this.method="val",this.target=e.on("change",function(e){i.B.val(n(t(e.target).val(),i.t),{link:i,set:!0})})},i.prototype.p=function(e,n,i,r){if(this.g=i,this.update=!r,"string"==typeof e&&0===e.indexOf("-tooltip-"))this.K(e,n);else if("string"==typeof e&&0!==e.indexOf("-"))this.H(e);else{if("function"!=typeof e){if(e instanceof t||t.zepto&&t.zepto.isZ(e)){if(!n){if(e.is("input, select, textarea"))return void this.G(e);n="html"}if("function"==typeof n||"string"==typeof n&&e[n])return this.method=n,void(this.target=e)}throw new RangeError("(Link) Invalid Link.")}this.target=!1,this.method=e}},i.prototype.write=function(t,e,n,i){this.update&&!1===i||(this.u=t,this.F=t=this.format(t),"function"==typeof this.method?this.method.call(this.target[0]||n[0],t,e,n):this.target[this.method](t,e,n))},i.prototype.q=function(e){this.g=new n(t.extend({},e,this.g instanceof n?this.g.r:this.g))},i.prototype.J=function(t){this.B=t},i.prototype.I=function(t){this.t=t},i.prototype.format=function(t){return this.g.L(t)},i.prototype.A=function(t){return this.g.w(t)},i.prototype.p.prototype=i.prototype,t.Link=i}(window.jQuery||window.Zepto),function(t){function e(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function n(e){return t.isArray(e)?e:[e]}function i(t,e){t.addClass(e),setTimeout(function(){t.removeClass(e)},300)}function r(t,e){return 100*e/(t[1]-t[0])}function o(t,e){if(e>=t.d.slice(-1)[0])return 100;for(var n,i,o,s=1;e>=t.d[s];)s++;return n=t.d[s-1],i=t.d[s],o=t.c[s-1],n=[n,i],o+r(n,0>n[0]?e+Math.abs(n[0]):e-n[0])/(100/(t.c[s]-o))}function s(t,e){if(100<=e)return t.d.slice(-1)[0];for(var n,i,r,o=1;e>=t.c[o];)o++;return n=t.d[o-1],i=t.d[o],r=t.c[o-1],n=[n,i],100/(t.c[o]-r)*(e-r)*(n[1]-n[0])/100+n[0]}function a(t,e){for(var n,i=1;e>=t.c[i];)i++;return t.m?(n=t.c[i-1],i=t.c[i],e-n>(i-n)/2?i:n):(t.h[i-1]?(n=t.h[i-1],i=t.c[i-1]+Math.round((e-t.c[i-1])/n)*n):i=e,i)}function l(t,n){if(!e(n))throw Error("noUiSlider: 'step' is not numeric.");t.h[0]=n}function c(n,i){if("object"!=typeof i||t.isArray(i))throw Error("noUiSlider: 'range' is not an object.");t.each(i,function(i,r){var o;if("number"==typeof r&&(r=[r]),!t.isArray(r))throw Error("noUiSlider: 'range' contains invalid value.");if(o="min"===i?0:"max"===i?100:parseFloat(i),!e(o)||!e(r[0]))throw Error("noUiSlider: 'range' value isn't numeric.");n.c.push(o),n.d.push(r[0]),o?n.h.push(!isNaN(r[1])&&r[1]):isNaN(r[1])||(n.h[0]=r[1])}),t.each(n.h,function(t,e){if(!e)return!0;n.h[t]=r([n.d[t],n.d[t+1]],e)/(100/(n.c[t+1]-n.c[t]))})}function u(e,n){if("number"==typeof n&&(n=[n]),!t.isArray(n)||!n.length||2<n.length)throw Error("noUiSlider: 'start' option is incorrect.");e.b=n.length,e.start=n}function h(t,e){if(t.m=e,"boolean"!=typeof e)throw Error("noUiSlider: 'snap' option must be a boolean.")}function d(t,e){if("lower"===e&&1===t.b)t.i=1;else if("upper"===e&&1===t.b)t.i=2;else if(!0===e&&2===t.b)t.i=3;else{if(!1!==e)throw Error("noUiSlider: 'connect' option doesn't match handle count.");t.i=0}}function f(t,e){switch(e){case"horizontal":t.k=0;break;case"vertical":t.k=1;break;default:throw Error("noUiSlider: 'orientation' option is invalid.")}}function p(t,n){if(2<t.c.length)throw Error("noUiSlider: 'margin' option is only supported on linear sliders.");if(t.margin=r(t.d,n),!e(n))throw Error("noUiSlider: 'margin' option must be numeric.")}function m(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1,t.i=[0,2,1,3][t.i];break;default:throw Error("noUiSlider: 'direction' option was not recognized.")}}function g(t,e){if("string"!=typeof e)throw Error("noUiSlider: 'behaviour' must be a string containing options.");var n=0<=e.indexOf("snap");t.n={s:0<=e.indexOf("tap")||n,extend:0<=e.indexOf("extend"),v:0<=e.indexOf("drag"),fixed:0<=e.indexOf("fixed"),m:n}}function v(e,n,i){e.o=[n.lower,n.upper],e.g=n.format,t.each(e.o,function(e,r){if(!t.isArray(r))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' must be an array.");t.each(r,function(){if(!(this instanceof t.Link))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' can only contain Link instances.");this.I(e),this.J(i),this.q(n.format)})}),e.dir&&1<e.b&&e.o.reverse()}function y(e,n){var i,r={c:[],d:[],h:[!1],margin:0};return i={step:{e:!1,f:l},range:{e:!0,f:c},start:{e:!0,f:u},snap:{e:!1,f:h},connect:{e:!0,f:d},orientation:{e:!1,f:f},margin:{e:!1,f:p},direction:{e:!0,f:m},behaviour:{e:!0,f:g},serialization:{e:!0,f:v}},e=t.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},e),e.serialization=t.extend({lower:[],upper:[],format:{}},e.serialization),t.each(i,function(t,i){if(void 0===e[t]){if(i.e)throw Error("noUiSlider: '"+t+"' is required.");return!0}i.f(r,e[t],n)}),r.style=r.k?"top":"left",r}function b(e,n){var i=t("<div><div/></div>").addClass(E[2]),r=["-lower","-upper"];return e.dir&&r.reverse(),i.children().addClass(E[3]+" "+E[3]+r[n]),i}function w(e,n){return n.j&&(n=new t.Link({target:t(n.j).clone().appendTo(e),method:n.method,format:n.g},!0)),n}function x(e,n){var i,r=[];for(i=0;i<e.b;i++){var o=r,s=i,a=e.o[i],l=n[i].children(),c=e.g,u=void 0,h=[],u=new t.Link({},!0);for(u.q(c),h.push(u),u=0;u<a.length;u++)h.push(w(l,a[u]));o[s]=h}return r}function k(t,e,n){switch(t){case 1:e.addClass(E[7]),n[0].addClass(E[6]);break;case 3:n[1].addClass(E[6]);case 2:n[0].addClass(E[7]);case 0:e.addClass(E[6])}}function _(t,e){var n,i=[];for(n=0;n<t.b;n++)i.push(b(t,n).appendTo(e));return i}function C(e,n){return n.addClass([E[0],E[8+e.dir],E[4+e.k]].join(" ")),t("<div/>").appendTo(n).addClass(E[1])}function S(e,r,l){function c(){return b[["width","height"][r.k]]()}function u(t){var e,n=[D.val()];for(e=0;e<t.length;e++)D.trigger(t[e],n)}function h(e,n,i){var o=e[0]!==S[0][0]?1:0,l=M[0]+r.margin,c=M[1]-r.margin;return i&&1<S.length&&(n=o?Math.max(n,l):Math.min(n,c)),100>n&&(n=a(r,n)),(n=Math.max(Math.min(parseFloat(n.toFixed(7)),100),0))===M[o]?1!==S.length&&((n===l||n===c)&&0):(e.css(r.style,n+"%"),e.is(":first-child")&&e.toggleClass(E[17],50<n),M[o]=n,r.dir&&(n=100-n),t(w[o]).each(function(){this.write(s(r,n),e.children(),D)}),!0)}function d(t,e,n){n||i(D,E[14]),h(t,e,!1),u(["slide","set","change"])}function f(t,e,n,i){t=t.replace(/\s/g,".nui ")+".nui",e.on(t,function(t){var e=D.attr("disabled");if(D.hasClass(E[14])||void 0!==e&&null!==e)return!1;t.preventDefault();var o,s,e=0===t.type.indexOf("touch"),a=0===t.type.indexOf("mouse"),l=0===t.type.indexOf("pointer"),c=t;0===t.type.indexOf("MSPointer")&&(l=!0),t.originalEvent&&(t=t.originalEvent),e&&(o=t.changedTouches[0].pageX,s=t.changedTouches[0].pageY),(a||l)&&(l||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),o=t.clientX+window.pageXOffset,s=t.clientY+window.pageYOffset),c.C=[o,s],c.cursor=a,t=c,t.l=t.C[r.k],n(t,i)})}function p(t,e){var n,i=e.b||S,r=!1,r=100*(t.l-e.start)/c(),o=i[0][0]!==S[0][0]?1:0,s=e.D;n=r+s[0],r+=s[1],1<i.length?(0>n&&(r+=Math.abs(n)),100<r&&(n-=r-100),n=[Math.max(Math.min(n,100),0),Math.max(Math.min(r,100),0)]):n=[n,r],r=h(i[0],n[o],1===i.length),1<i.length&&(r=h(i[1],n[o?0:1],!1)||r),r&&u(["slide"])}function m(e){t("."+E[15]).removeClass(E[15]),e.cursor&&t("body").css("cursor","").off(".nui"),T.off(".nui"),D.removeClass(E[12]),u(["set","change"])}function g(e,n){1===n.b.length&&n.b[0].children().addClass(E[15]),e.stopPropagation(),f(L.move,T,p,{start:e.l,b:n.b,D:[M[0],M[S.length-1]]}),f(L.end,T,m,null),e.cursor&&(t("body").css("cursor",t(e.target).css("cursor")),1<S.length&&D.addClass(E[12]),t("body").on("selectstart.nui",!1))}function v(e){var n=e.l,i=0;e.stopPropagation(),t.each(S,function(){i+=this.offset()[r.style]}),i=n<i/2||1===S.length?0:1,n-=b.offset()[r.style],n=100*n/c(),d(S[i],n,r.n.m),r.n.m&&g(e,{b:[S[i]]})}function y(t){var e=(t=t.l<b.offset()[r.style])?0:100;t=t?0:S.length-1,d(S[t],e,!1)}var b,w,S,D=t(e),M=[-1,-1];if(D.hasClass(E[0]))throw Error("Slider was already initialized.");b=C(r,D),S=_(r,b),w=x(r,S),k(r.i,D,S),function(t){var e;if(!t.fixed)for(e=0;e<S.length;e++)f(L.start,S[e].children(),g,{b:[S[e]]});t.s&&f(L.start,b,v,{b:S}),t.extend&&(D.addClass(E[16]),t.s&&f(L.start,D,y,{b:S})),t.v&&(e=b.find("."+E[7]).addClass(E[10]),t.fixed&&(e=e.add(b.children().not(e).children())),f(L.start,e,g,{b:S}))}(r.n),e.vSet=function(){var e,s,a,l,c,d,f=Array.prototype.slice.call(arguments,0),p=n(f[0]);for("object"==typeof f[1]?(e=f[1].set,s=f[1].link,a=f[1].update,l=f[1].animate):!0===f[1]&&(e=!0),r.dir&&1<r.b&&p.reverse(),l&&i(D,E[14]),f=1<S.length?3:1,1===p.length&&(f=1),c=0;c<f;c++)l=s||w[c%2][0],!1!==(l=l.A(p[c%2]))&&(l=o(r,l),r.dir&&(l=100-l),!0!==h(S[c%2],l,!0)&&t(w[c%2]).each(function(t){if(!t)return d=this.u,!0;this.write(d,S[c%2].children(),D,a)}));return!0===e&&u(["set"]),this},e.vGet=function(){var t,e=[];for(t=0;t<r.b;t++)e[t]=w[t][0].F;return 1===e.length?e[0]:r.dir?e.reverse():e},e.destroy=function(){return t.each(w,function(){t.each(this,function(){this.target&&this.target.off(".nui")})}),t(this).off(".nui").removeClass(E.join(" ")).empty(),l},D.val(r.start)}function D(t){if(!this.length)throw Error("noUiSlider: Can't initialize slider on empty selection.");var e=y(t,this);return this.each(function(){S(this,e,t)})}function M(e){return this.each(function(){var n=t(this).val(),i=this.destroy(),r=t.extend({},i,e);t(this).noUiSlider(r),i.start===r.start&&t(this).val(n)})}var T=t(document),L=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},E="noUi-target noUi-base noUi-origin noUi-handle noUi-horizontal noUi-vertical noUi-background noUi-connect noUi-ltr noUi-rtl noUi-dragable  noUi-state-drag  noUi-state-tap noUi-active noUi-extended noUi-stacking".split(" ");t.noUiSlider={Link:t.Link},t.fn.noUiSlider=function(t,e){return(e?M:D).call(this,t)},t.classVal(E[0],"vGet","vSet",!1)}(window.jQuery||window.Zepto),function(){function t(e){var n=t.modules[e];if(!n)throw new Error('failed to require "'+e+'"');return"exports"in n||"function"!=typeof n.definition||(n.client=n.component=!0,n.definition.call(this,n.exports={},n),delete n.definition),n.exports}t.loader="component",t.helper={},t.helper.semVerSort=function(t,e){for(var n=t.version.split("."),i=e.version.split("."),r=0;r<n.length;++r){var o=parseInt(n[r],10),s=parseInt(i[r],10);if(o!==s)return o>s?1:-1;var a=n[r].substr((""+o).length),l=i[r].substr((""+s).length);if(""===a&&""!==l)return 1;if(""!==a&&""===l)return-1;if(""!==a&&""!==l)return a>l?1:-1}return 0},t.latest=function(e,n){function i(t){throw new Error('failed to find latest module of "'+t+'"')}var r=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/;/(.*)~(.*)/.test(e)||i(e);for(var o=Object.keys(t.modules),s=[],a=[],l=0;l<o.length;l++){var c=o[l];if(new RegExp(e+"@").test(c)){var u=c.substr(e.length+1);null!=r.exec(c)?s.push({version:u,name:c}):a.push({version:u,name:c})}}if(0===s.concat(a).length&&i(e),s.length>0){var h=s.sort(t.helper.semVerSort).pop().name;return!0===n?h:t(h)}var h=a.sort(function(t,e){return t.name>e.name})[0].name;return!0===n?h:t(h)},t.modules={},t.register=function(e,n){t.modules[e]={definition:n}},t.define=function(e,n){t.modules[e]={exports:n}},t.register("abpetkov~transitionize@0.0.3",function(t,e){function n(t,e){if(!(this instanceof n))return new n(t,e);this.element=t,this.props=e||{},this.init()}e.exports=n,n.prototype.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},n.prototype.init=function(){var t=[];for(var e in this.props)t.push(e+" "+this.props[e]);this.element.style.transition=t.join(", "),this.isSafari()&&(this.element.style.webkitTransition=t.join(", "))}}),t.register("ftlabs~fastclick@v0.6.11",function(t,e){function n(t){"use strict";var e,i=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=t,!t||!t.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return n.prototype.onClick.apply(i,arguments)},this.onMouse=function(){return n.prototype.onMouse.apply(i,arguments)},this.onTouchStart=function(){return n.prototype.onTouchStart.apply(i,arguments)},this.onTouchMove=function(){return n.prototype.onTouchMove.apply(i,arguments)},this.onTouchEnd=function(){return n.prototype.onTouchEnd.apply(i,arguments)},this.onTouchCancel=function(){return n.prototype.onTouchCancel.apply(i,arguments)},n.notNeeded(t)||(this.deviceIsAndroid&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,i):r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):r.call(t,e,n,i)}),"function"==typeof t.onclick&&(e=t.onclick,t.addEventListener("click",function(t){e(t)},!1),t.onclick=null))}n.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,n.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),n.prototype.deviceIsIOS4=n.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),n.prototype.deviceIsIOSWithBadTarget=n.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),n.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},n.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},n.prototype.sendClick=function(t,e){"use strict";var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},n.prototype.determineEventType=function(t){"use strict";return this.deviceIsAndroid&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},n.prototype.focus=function(t){"use strict";var e;this.deviceIsIOS&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},n.prototype.updateScrollParent=function(t){"use strict";var e,n;if(!(e=t.fastClickScrollParent)||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},n.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},n.prototype.onTouchStart=function(t){"use strict";var e,n,i;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],this.deviceIsIOS){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<200&&t.preventDefault(),!0},n.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},n.prototype.onTouchMove=function(t){"use strict";return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},n.prototype.findControl=function(t){"use strict";return t.control!==undefined?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},n.prototype.onTouchEnd=function(t){"use strict";var e,n,i,r,o,s=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(o=t.changedTouches[0],s=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||s,s.fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(i=s.tagName.toLowerCase())){if(e=this.findControl(s)){if(this.focus(s),this.deviceIsAndroid)return!1;s=e}}else if(this.needsFocus(s))return t.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(s),this.deviceIsIOS4&&"select"===i||(this.targetElement=null,t.preventDefault()),!1);return!(!this.deviceIsIOS||this.deviceIsIOS4||!(r=s.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(s)||(t.preventDefault(),this.sendClick(s,t)),!1)},n.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},n.prototype.onMouse=function(t){"use strict";return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},n.prototype.onClick=function(t){"use strict";var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||(e=this.onMouse(t),e||(this.targetElement=null),e)},n.prototype.destroy=function(){"use strict";var t=this.layer;this.deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},n.notNeeded=function(t){"use strict";var e,i
;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n.prototype.deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(i>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===t.style.msTouchAction},n.attach=function(t){"use strict";return new n(t)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return n}):void 0!==e&&e.exports?(e.exports=n.attach,e.exports.FastClick=n):window.FastClick=n}),t.register("component~indexof@0.0.3",function(t,e){e.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}}),t.register("component~classes@1.2.1",function(e,n){function i(t){if(!t)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}var r=t("component~indexof@0.0.3"),o=/\s+/,s=Object.prototype.toString;n.exports=function(t){return new i(t)},i.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~r(e,t)||e.push(t),this.el.className=e.join(" "),this},i.prototype.remove=function(t){if("[object RegExp]"==s.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=r(e,t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},i.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},i.prototype.toggle=function(t,e){return this.list?(void 0!==e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(void 0!==e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},i.prototype.array=function(){var t=this.el.className.replace(/^\s+|\s+$/g,""),e=t.split(o);return""===e[0]&&e.shift(),e},i.prototype.has=i.prototype.contains=function(t){return this.list?this.list.contains(t):!!~r(this.array(),t)}}),t.register("component~event@0.1.4",function(t){var e=window.addEventListener?"addEventListener":"attachEvent",n=window.removeEventListener?"removeEventListener":"detachEvent",i="addEventListener"!==e?"on":"";t.bind=function(t,n,r,o){return t[e](i+n,r,o||!1),r},t.unbind=function(t,e,r,o){return t[n](i+e,r,o||!1),r}}),t.register("component~query@0.0.3",function(t,e){function n(t,e){return e.querySelector(t)}t=e.exports=function(t,e){return e=e||document,n(t,e)},t.all=function(t,e){return e=e||document,e.querySelectorAll(t)},t.engine=function(e){if(!e.one)throw new Error(".one callback required");if(!e.all)throw new Error(".all callback required");return n=e.one,t.all=e.all,t}}),t.register("component~matches-selector@0.1.5",function(e,n){function i(t,e){if(!t||1!==t.nodeType)return!1;if(s)return s.call(t,e);for(var n=r.all(e,t.parentNode),i=0;i<n.length;++i)if(n[i]==t)return!0;return!1}var r=t("component~query@0.0.3"),o=Element.prototype,s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector;n.exports=i}),t.register("component~closest@0.1.4",function(e,n){var i=t("component~matches-selector@0.1.5");n.exports=function(t,e,n,r){for(t=n?{parentNode:t}:t,r=r||document;(t=t.parentNode)&&t!==document;){if(i(t,e))return t;if(t===r)return}}}),t.register("component~delegate@0.2.3",function(e){var n=t("component~closest@0.1.4"),i=t("component~event@0.1.4");e.bind=function(t,e,r,o,s){return i.bind(t,r,function(i){var r=i.target||i.srcElement;i.delegateTarget=n(r,e,!0,t),i.delegateTarget&&o.call(t,i)},s)},e.unbind=function(t,e,n,r){i.unbind(t,e,n,r)}}),t.register("component~events@1.0.9",function(e,n){function i(t,e){if(!(this instanceof i))return new i(t,e);if(!t)throw new Error("element required");if(!e)throw new Error("object required");this.el=t,this.obj=e,this._events={}}function r(t){var e=t.split(/ +/);return{name:e.shift(),selector:e.join(" ")}}var o=t("component~event@0.1.4"),s=t("component~delegate@0.2.3");n.exports=i,i.prototype.sub=function(t,e,n){this._events[t]=this._events[t]||{},this._events[t][e]=n},i.prototype.bind=function(t,e){function n(){var t=[].slice.call(arguments).concat(u);l[e].apply(l,t)}var i=r(t),a=this.el,l=this.obj,c=i.name,e=e||"on"+c,u=[].slice.call(arguments,2);return i.selector?n=s.bind(a,i.selector,c,n):o.bind(a,c,n),this.sub(c,e,n),n},i.prototype.unbind=function(t,e){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(t);var n=this._events[t];if(n){var i=n[e];i&&o.unbind(this.el,t,i)}},i.prototype.unbindAll=function(){for(var t in this._events)this.unbindAllOf(t)},i.prototype.unbindAllOf=function(t){var e=this._events[t];if(e)for(var n in e)this.unbind(t,n)}}),t.register("switchery",function(e,n){function i(t,e){if(!(this instanceof i))return new i(t,e);this.element=t,this.options=e||{};for(var n in l)null==this.options[n]&&(this.options[n]=l[n]);null!=this.element&&"checkbox"==this.element.type&&this.init(),!0===this.isDisabled()&&this.disable()}var r=t("abpetkov~transitionize@0.0.3"),o=t("ftlabs~fastclick@v0.6.11"),s=t("component~classes@1.2.1"),a=t("component~events@1.0.9");n.exports=i;var l={color:"#64bd63",secondaryColor:"#dfdfdf",jackColor:"#fff",jackSecondaryColor:null,className:"switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s",size:"default"};i.prototype.hide=function(){this.element.style.display="none"},i.prototype.show=function(){var t=this.create();this.insertAfter(this.element,t)},i.prototype.create=function(){return this.switcher=document.createElement("span"),this.jack=document.createElement("small"),this.switcher.appendChild(this.jack),this.switcher.className=this.options.className,this.events=a(this.switcher,this),this.switcher},i.prototype.insertAfter=function(t,e){t.parentNode.insertBefore(e,t.nextSibling)},i.prototype.setPosition=function(t){var e=this.isChecked(),n=this.switcher,i=this.jack;t&&e?e=!1:t&&!e&&(e=!0),!0===e?(this.element.checked=!0,window.getComputedStyle?i.style.left=parseInt(window.getComputedStyle(n).width)-parseInt(window.getComputedStyle(i).width)+"px":i.style.left=parseInt(n.currentStyle.width)-parseInt(i.currentStyle.width)+"px",this.options.color&&this.colorize(),this.setSpeed()):(i.style.left=0,this.element.checked=!1,this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor,this.switcher.style.borderColor=this.options.secondaryColor,this.switcher.style.backgroundColor=this.options.secondaryColor!==l.secondaryColor?this.options.secondaryColor:"#fff",this.jack.style.backgroundColor=this.options.jackSecondaryColor!==this.options.jackColor?this.options.jackSecondaryColor:this.options.jackColor,this.setSpeed())},i.prototype.setSpeed=function(){var t={},e={"background-color":this.options.speed,left:this.options.speed.replace(/[a-z]/,"")/2+"s"};t=this.isChecked()?{border:this.options.speed,"box-shadow":this.options.speed,"background-color":3*this.options.speed.replace(/[a-z]/,"")+"s"}:{border:this.options.speed,"box-shadow":this.options.speed},r(this.switcher,t),r(this.jack,e)},i.prototype.setSize=function(){switch(this.options.size){case"small":s(this.switcher).add("switchery-small");break;case"large":s(this.switcher).add("switchery-large");break;default:s(this.switcher).add("switchery-default")}},i.prototype.colorize=function(){var t=this.switcher.offsetHeight/2;this.switcher.style.backgroundColor=this.options.color,this.switcher.style.borderColor=this.options.color,this.switcher.style.boxShadow="inset 0 0 0 "+t+"px "+this.options.color,this.jack.style.backgroundColor=this.options.jackColor},i.prototype.handleOnchange=function(){if(document.dispatchEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!0),this.element.dispatchEvent(t)}else this.element.fireEvent("onchange")},i.prototype.handleChange=function(){var t=this,e=this.element;e.addEventListener?e.addEventListener("change",function(){t.setPosition()}):e.attachEvent("onchange",function(){t.setPosition()})},i.prototype.handleClick=function(){var t=this.switcher;o(t),this.events.bind("click","bindClick")},i.prototype.bindClick=function(){var t=this.element.parentNode.tagName.toLowerCase(),e="label"!==t;this.setPosition(e),this.handleOnchange(this.element.checked)},i.prototype.markAsSwitched=function(){this.element.setAttribute("data-switchery",!0)},i.prototype.markedAsSwitched=function(){return this.element.getAttribute("data-switchery")},i.prototype.init=function(){this.hide(),this.show(),this.setSize(),this.setPosition(),this.markAsSwitched(),this.handleChange(),this.handleClick()},i.prototype.isChecked=function(){return this.element.checked},i.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled||this.element.readOnly},i.prototype.destroy=function(){this.events.unbind()},i.prototype.enable=function(){this.options.disabled&&(this.options.disabled&&(this.options.disabled=!1),this.element.disabled&&(this.element.disabled=!1),this.element.readOnly&&(this.element.readOnly=!1),this.switcher.style.opacity=1,this.events.bind("click","bindClick"))},i.prototype.disable=function(){this.options.disabled||(this.options.disabled||(this.options.disabled=!0),this.element.disabled||(this.element.disabled=!0),this.element.readOnly||(this.element.readOnly=!0),this.switcher.style.opacity=this.options.disabledOpacity,this.destroy())}}),"object"==typeof exports?module.exports=t("switchery"):"function"==typeof define&&define.amd?define("Switchery",[],function(){return t("switchery")}):(this||window).Switchery=t("switchery")}(),function(){var t,e,n,i,r,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,n,i,r,o,s;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),o=t.childNodes,s=[],i=0,r=o.length;i<r;i++)n=o[i],s.push(this.add_option(n,e,t.disabled));return s},t.prototype.add_option=function(t,e,n){if("OPTION"===t.nodeName.toUpperCase())return""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:!0===n?n:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},t.prototype.escapeExpression=function(t){var e,n;return null==t||!1===t?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(n,function(t){return e[t]||"&amp;"})):t},t}(),i.select_to_array=function(t){var e,n,r,o,s;for(n=new i,s=t.childNodes,r=0,o=s.length;r<o;r++)e=s[r],n.add_node(e);return n.parsed},e=function(){function t(e,n){this.form_field=e,this.options=null!=n?n:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||Infinity,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return t.blur_test()},100)},t.prototype.results_option_build=function(t){var e,n,i,r,o;for(e="",o=this.results_data,i=0,r=o.length;i<r;i++)n=o[i],n.group?e+=this.result_add_group(n):e+=this.result_add_option(n),(null!=t?t.first:void 0)&&(n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(n.text));return e},t.prototype.result_add_option=function(t){var e,n;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),n=document.createElement("li"),n.className=e.join(" "),n.style.cssText=t.style,n.setAttribute("data-option-array-index",t.array_index),n.innerHTML=t.search_text,this.outerHTML(n)):""},t.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):""},t.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},t.prototype.reset_single_select_options=function(){var t,e,n,i,r;for(i=this.results_data,r=[],e=0,n=i.length;e<n;e++)t=i[e],t.selected?r.push(t.selected=!1):r.push(void 0);return r},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,n,i,r,o,s,a,l,c,u,h,d;for(this.no_results_clear(),r=0,s=this.get_search_text(),t=s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=this.search_contains?"":"^",n=new RegExp(i+t,"i"),c=new RegExp(t,"i"),d=this.results_data,u=0,h=d.length;u<h;u++)e=d[u],e.search_match=!1,o=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(o=this.results_data[e.group_array_index],0===o.active_options&&o.search_match&&(r+=1),o.active_options+=1),e.group&&!this.group_search||(e.search_text=e.group?e.label:e.html,e.search_match=this.search_string_match(e.search_text,n),e.search_match&&!e.group&&(r+=1),e.search_match?(s.length&&(a=e.search_text.search(c),l=e.search_text.substr(0,a+s.length)+"</em>"+e.search_text.substr(a+s.length),e.search_text=l.substr(0,a)+"<em>"+l.substr(a)),null!=o&&(o.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),r<1&&s.length?(this.update_results_content(""),this.no_results(s)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.search_string_match=function(t,e){var n,i,r,o;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" "),i.length))for(r=0,o=i.length;r<o;r++)if(n=i[r],e.test(n))return!0},t.prototype.choices_count=function(){var t,e,n,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,i=this.form_field.options,e=0,n=i.length;e<n;e++)t=i[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){if(t.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},t.prototype.keyup_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(){var t=this;return setTimeout(function(){return t.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected)&&(!(!this.display_disabled_options&&t.disabled)&&!t.empty)},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){if(this.touch_started)return this.search_results_mouseup(t)},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!/iP(od|hone)/i.test(window.navigator.userAgent)&&(!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),t=jQuery,t.fn.extend({chosen:function(i){return e.browser_is_supported()?this.each(function(){var e,r;e=t(this),r=e.data("chosen"),"destroy"===i&&r?r.destroy():r||e.data("chosen",new n(this,i))}):this}}),n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},n.prototype.set_up_html=function(){var e,n;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),n={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",n),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},n.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},n.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},n.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},n.prototype.container_mousedown=function(e){if(!this.is_disabled&&(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null==e||!t(e.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},n.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},n.prototype.search_results_mousewheel=function(t){var e;if(t.originalEvent&&(e=-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e)return t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())},n.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},n.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(e){var n;return n=t(e.target).closest(".chosen-container"),n.length&&this.container[0]===n[0]?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},n.prototype.result_do_highlight=function(t){var e,n,i,r,o;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),o=this.search_results.scrollTop(),r=i+o,n=this.result_highlight.position().top+this.search_results.scrollTop(),(e=n+this.result_highlight.outerHeight())>=r)return this.search_results.scrollTop(e-i>0?e-i:0);if(n<o)return this.search_results.scrollTop(n)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},n.prototype.update_results_content=function(t){return this.search_results.html(t)},n.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},n.prototype.set_tab_index=function(){var t;if(this.form_field.tabIndex)return t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t},n.prototype.set_label_behavior=function(){var e=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()})},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(e){var n;if(n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),n.length)return this.result_highlight=n,this.result_select(e),this.search_field.focus()},n.prototype.search_results_mouseover=function(e){var n;if(n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first())return this.result_do_highlight(n)},n.prototype.search_results_mouseout=function(e){if(t(e.target).hasClass("active-result"))return this.result_clear_highlight()},n.prototype.choice_build=function(e){var n,i,r=this;return n=t("<li />",{"class":"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?n.addClass("search-choice-disabled"):(i=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),i.bind("click.chosen",function(t){return r.choice_destroy_link_click(t)}),n.append(i)),this.search_container.before(n)},n.prototype.choice_destroy_link_click=function(e){if(e.preventDefault(),e.stopPropagation(),!this.is_disabled)return this.choice_destroy(t(e.target))},n.prototype.choice_destroy=function(t){if(this.result_deselect(t[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},n.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(t){var e,n;if(this.result_highlight)return e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),n=this.results_data[e[0].getAttribute("data-option-array-index")],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(n):this.single_set_selected_text(n.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},n.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},n.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},n.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},n.prototype.winnow_results_set_highlight=function(){var t,e
;if(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),null!=(t=e.length?e.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(t)},n.prototype.no_results=function(e){var n;return n=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(e),this.search_results.append(n),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},n.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},n.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},n.prototype.search_field_scale=function(){var e,n,i,r,o,s,a,l;if(this.is_multiple){for(0,s=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],a=0,l=o.length;a<l;a++)i=o[a],r+=i+":"+this.search_field.css(i)+";";return e=t("<div />",{style:r}),e.text(this.search_field.val()),t("body").append(e),s=e.width()+25,e.remove(),n=this.container.outerWidth(),s>n-10&&(s=n-10),this.search_field.css({width:s+"px"})}},n}(e)}.call(this),function(t){function e(t,e,n){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:n;default:throw new Error("Implement me")}}function n(t,e){return Mt.call(t,e)}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(t){!1===xt.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function o(t,e){var n=!0;return p(function(){return n&&(r(t),n=!1),e.apply(this,arguments)},e)}function s(t,e){ye[t]||(r(e),ye[t]=!0)}function a(t,e){return function(n){return v(t.call(this,n),e)}}function l(t,e){return function(n){return this.localeData().ordinal(t.call(this,n),e)}}function c(t,e){var n,i,r=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(r,"months");return 0>e-o?(n=t.clone().add(r-1,"months"),i=(e-o)/(o-n)):(n=t.clone().add(r+1,"months"),i=(e-o)/(n-o)),-(r+i)}function u(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&12>e&&(e+=12),i||12!==e||(e=0),e):e}function h(){}function d(t,e){!1!==e&&I(t),m(this,t),this._d=new Date(+t._d),!1===we&&(we=!0,xt.updateOffset(this),we=!1)}function f(t){var e=D(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||0,s=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*a,this._days=+s+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=xt.localeData(),this._bubble()}function p(t,e){for(var i in e)n(e,i)&&(t[i]=e[i]);return n(e,"toString")&&(t.toString=e.toString),n(e,"valueOf")&&(t.valueOf=e.valueOf),t}function m(t,e){var n,i,r;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Pt.length>0)for(n in Pt)i=Pt[n],void 0!==(r=e[i])&&(t[i]=r);return t}function g(t){return 0>t?Math.ceil(t):Math.floor(t)}function v(t,e,n){for(var i=""+Math.abs(t),r=t>=0;i.length<e;)i="0"+i;return(r?n?"+":"":"-")+i}function y(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function b(t,e){var n;return e=H(e,t),t.isBefore(e)?n=y(t,e):(n=y(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function w(t,e){return function(n,i){var r,o;return null===i||isNaN(+i)||(s(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),o=n,n=i,i=o),n="string"==typeof n?+n:n,r=xt.duration(n,i),x(this,r,t),this}}function x(t,e,n,i){var r=e._milliseconds,o=e._days,s=e._months;i=null==i||i,r&&t._d.setTime(+t._d+r*n),o&&mt(t,"Date",pt(t,"Date")+o*n),s&&ft(t,pt(t,"Month")+s*n),i&&xt.updateOffset(t,o||s)}function k(t){return"[object Array]"===Object.prototype.toString.call(t)}function _(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function C(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(i=0;r>i;i++)(n&&t[i]!==e[i]||!n&&T(t[i])!==T(e[i]))&&s++;return s+o}function S(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=he[t]||de[e]||e}return t}function D(t){var e,i,r={};for(i in t)n(t,i)&&(e=S(i))&&(r[e]=t[i]);return r}function M(e){var n,i;if(0===e.indexOf("week"))n=7,i="day";else{if(0!==e.indexOf("month"))return;n=12,i="month"}xt[e]=function(r,o){var s,a,l=xt._locale[e],c=[];if("number"==typeof r&&(o=r,r=t),a=function(t){var e=xt().utc().set(i,t);return l.call(xt._locale,e,r||"")},null!=o)return a(o);for(s=0;n>s;s++)c.push(a(s));return c}}function T(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function L(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function E(t,e,n){return ct(xt([t,11,31+e-n]),e,n).week}function A(t){return $(t)?366:365}function $(t){return t%4==0&&t%100!=0||t%400==0}function I(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[Lt]<0||t._a[Lt]>11?Lt:t._a[Et]<1||t._a[Et]>L(t._a[Tt],t._a[Lt])?Et:t._a[At]<0||t._a[At]>24||24===t._a[At]&&(0!==t._a[$t]||0!==t._a[It]||0!==t._a[Nt])?At:t._a[$t]<0||t._a[$t]>59?$t:t._a[It]<0||t._a[It]>59?It:t._a[Nt]<0||t._a[Nt]>999?Nt:-1,t._pf._overflowDayOfYear&&(Tt>e||e>Et)&&(e=Et),t._pf.overflow=e)}function N(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===t)),e._isValid}function O(t){return t?t.toLowerCase().replace("_","-"):t}function P(t){for(var e,n,i,r,o=0;o<t.length;){for(r=O(t[o]).split("-"),e=r.length,n=O(t[o+1]),n=n?n.split("-"):null;e>0;){if(i=F(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&C(r,n,!0)>=e-1)break;e--}o++}return null}function F(t){var e=null;if(!Ot[t]&&Ft)try{e=xt.locale(),require("./locale/"+t),xt.locale(e)}catch(t){}return Ot[t]}function H(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(xt.isMoment(t)||_(t)?+t:+xt(t))-+n,n._d.setTime(+n._d+i),xt.updateOffset(n,!1),n):xt(t).local()}function z(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function R(t){var e,n,i=t.match(jt);for(e=0,n=i.length;n>e;e++)i[e]=ve[i[e]]?ve[i[e]]:z(i[e]);return function(r){var o="";for(e=0;n>e;e++)o+=i[e]instanceof Function?i[e].call(r,t):i[e];return o}}function j(t,e){return t.isValid()?(e=W(e,t.localeData()),fe[e]||(fe[e]=R(e)),fe[e](t)):t.localeData().invalidDate()}function W(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Wt.lastIndex=0;i>=0&&Wt.test(t);)t=t.replace(Wt,n),Wt.lastIndex=0,i-=1;return t}function B(t,e){var n=e._strict;switch(t){case"Q":return Jt;case"DDDD":return ee;case"YYYY":case"GGGG":case"gggg":return n?ne:Ut;case"Y":case"G":case"g":return re;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?ie:qt;case"S":if(n)return Jt;case"SS":if(n)return te;case"SSS":if(n)return ee;case"DDD":return Yt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Gt;case"a":case"A":return e._locale._meridiemParse;case"x":return Zt;case"X":return Qt;case"Z":case"ZZ":return Kt;case"T":return Xt;case"SSSS":return Vt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?te:Bt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Bt;case"Do":return n?e._locale._ordinalParse:e._locale._ordinalParseLenient;default:return new RegExp(Q(Z(t.replace("\\","")),"i"))}}function Y(t){t=t||"";var e=t.match(Kt)||[],n=e[e.length-1]||[],i=(n+"").match(ce)||["-",0,0],r=60*i[1]+T(i[2]);return"+"===i[0]?r:-r}function U(t,e,n){var i,r=n._a;switch(t){case"Q":null!=e&&(r[Lt]=3*(T(e)-1));break;case"M":case"MM":null!=e&&(r[Lt]=T(e)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(e,t,n._strict),null!=i?r[Lt]=i:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(r[Et]=T(e));break;case"Do":null!=e&&(r[Et]=T(parseInt(e.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=T(e));break;case"YY":r[Tt]=xt.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":r[Tt]=T(e);break;case"a":case"A":n._meridiem=e;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":r[At]=T(e);break;case"m":case"mm":r[$t]=T(e);break;case"s":case"ss":r[It]=T(e);break;case"S":case"SS":case"SSS":case"SSSS":r[Nt]=T(1e3*("0."+e));break;case"x":n._d=new Date(T(e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=Y(e);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(e),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=T(e));break;case"gg":case"GG":n._w=n._w||{},n._w[t]=xt.parseTwoDigitYear(e)}}function q(t){var n,i,r,o,s,a,l;n=t._w,null!=n.GG||null!=n.W||null!=n.E?(s=1,a=4,i=e(n.GG,t._a[Tt],ct(xt(),1,4).year),r=e(n.W,1),o=e(n.E,1)):(s=t._locale._week.dow,a=t._locale._week.doy,i=e(n.gg,t._a[Tt],ct(xt(),s,a).year),r=e(n.w,1),null!=n.d?(o=n.d,s>o&&++r):o=null!=n.e?n.e+s:s),l=ut(i,r,o,a,s),t._a[Tt]=l.year,t._dayOfYear=l.dayOfYear}function V(t){var n,i,r,o,s=[];if(!t._d){for(r=K(t),t._w&&null==t._a[Et]&&null==t._a[Lt]&&q(t),t._dayOfYear&&(o=e(t._a[Tt],r[Tt]),t._dayOfYear>A(o)&&(t._pf._overflowDayOfYear=!0),i=ot(o,0,t._dayOfYear),t._a[Lt]=i.getUTCMonth(),t._a[Et]=i.getUTCDate()),n=0;3>n&&null==t._a[n];++n)t._a[n]=s[n]=r[n];for(;7>n;n++)t._a[n]=s[n]=null==t._a[n]?2===n?1:0:t._a[n];24===t._a[At]&&0===t._a[$t]&&0===t._a[It]&&0===t._a[Nt]&&(t._nextDay=!0,t._a[At]=0),t._d=(t._useUTC?ot:rt).apply(null,s),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[At]=24)}}function G(t){var e;t._d||(e=D(t._i),t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],V(t))}function K(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function X(e){if(e._f===xt.ISO_8601)return void tt(e);e._a=[],e._pf.empty=!0;var n,i,r,o,s,a=""+e._i,l=a.length,c=0;for(r=W(e._f,e._locale).match(jt)||[],n=0;n<r.length;n++)o=r[n],i=(a.match(B(o,e))||[])[0],i&&(s=a.substr(0,a.indexOf(i)),s.length>0&&e._pf.unusedInput.push(s),a=a.slice(a.indexOf(i)+i.length),c+=i.length),ve[o]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(o),U(o,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=l-c,a.length>0&&e._pf.unusedInput.push(a),!0===e._pf.bigHour&&e._a[At]<=12&&(e._pf.bigHour=t),e._a[At]=u(e._locale,e._a[At],e._meridiem),V(e),I(e)}function Z(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r})}function Q(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(t){var e,n,r,o,s;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)s=0,e=m({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=i(),e._f=t._f[o],X(e),N(e)&&(s+=e._pf.charsLeftOver,s+=10*e._pf.unusedTokens.length,e._pf.score=s,(null==r||r>s)&&(r=s,n=e));p(t,n||e)}function tt(t){var e,n,i=t._i,r=oe.exec(i);if(r){for(t._pf.iso=!0,e=0,n=ae.length;n>e;e++)if(ae[e][1].exec(i)){t._f=ae[e][0]+(r[6]||" ");break}for(e=0,n=le.length;n>e;e++)if(le[e][1].exec(i)){t._f+=le[e][0];break}i.match(Kt)&&(t._f+="Z"),X(t)}else t._isValid=!1}function et(t){tt(t),!1===t._isValid&&(delete t._isValid,xt.createFromInputFallback(t))}function nt(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function it(e){var n,i=e._i;i===t?e._d=new Date:_(i)?e._d=new Date(+i):null!==(n=Ht.exec(i))?e._d=new Date(+n[1]):"string"==typeof i?et(e):k(i)?(e._a=nt(i.slice(0),function(t){return parseInt(t,10)}),V(e)):"object"==typeof i?G(e):"number"==typeof i?e._d=new Date(i):xt.createFromInputFallback(e)}function rt(t,e,n,i,r,o,s){var a=new Date(t,e,n,i,r,o,s);return 1970>t&&a.setFullYear(t),a}function ot(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function st(t,e){if("string"==typeof t)if(isNaN(t)){if("number"!=typeof(t=e.weekdaysParse(t)))return null}else t=parseInt(t,10);return t}function at(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function lt(t,e,n){var i=xt.duration(t).abs(),r=Dt(i.as("s")),o=Dt(i.as("m")),s=Dt(i.as("h")),a=Dt(i.as("d")),l=Dt(i.as("M")),c=Dt(i.as("y")),u=r<pe.s&&["s",r]||1===o&&["m"]||o<pe.m&&["mm",o]||1===s&&["h"]||s<pe.h&&["hh",s]||1===a&&["d"]||a<pe.d&&["dd",a]||1===l&&["M"]||l<pe.M&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=e,u[3]=+t>0,u[4]=n,at.apply({},u)}function ct(t,e,n){var i,r=n-e,o=n-t.day();return o>r&&(o-=7),r-7>o&&(o+=7),i=xt(t).add(o,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ut(t,e,n,i,r){var o,s,a=ot(t,0,1).getUTCDay();return a=0===a?7:a,n=null!=n?n:r,o=r-a+(a>i?7:0)-(r>a?7:0),s=7*(e-1)+(n-r)+o+1,{year:s>0?t:t-1,dayOfYear:s>0?s:A(t-1)+s}}function ht(e){var n,i=e._i,r=e._f;return e._locale=e._locale||xt.localeData(e._l),null===i||r===t&&""===i?xt.invalid({nullInput:!0}):("string"==typeof i&&(e._i=i=e._locale.preparse(i)),xt.isMoment(i)?new d(i,!0):(r?k(r)?J(e):X(e):it(e),n=new d(e),n._nextDay&&(n.add(1,"d"),n._nextDay=t),n))}function dt(t,e){var n,i;if(1===e.length&&k(e[0])&&(e=e[0]),!e.length)return xt();for(n=e[0],i=1;i<e.length;++i)e[i][t](n)&&(n=e[i]);return n}function ft(t,e){var n;return"string"==typeof e&&"number"!=typeof(e=t.localeData().monthsParse(e))?t:(n=Math.min(t.date(),L(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function pt(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function mt(t,e,n){return"Month"===e?ft(t,n):t._d["set"+(t._isUTC?"UTC":"")+e](n)}function gt(t,e){return function(n){return null!=n?(mt(this,t,n),xt.updateOffset(this,e),this):pt(this,t)}}function vt(t){return 400*t/146097}function yt(t){return 146097*t/400}function bt(t){xt.duration.fn[t]=function(){return this._data[t]}}function wt(t){"undefined"==typeof ender&&(kt=St.moment,St.moment=t?o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",xt):xt)}for(var xt,kt,_t,Ct="2.9.0",St="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,Dt=Math.round,Mt=Object.prototype.hasOwnProperty,Tt=0,Lt=1,Et=2,At=3,$t=4,It=5,Nt=6,Ot={},Pt=[],Ft="undefined"!=typeof module&&module&&module.exports,Ht=/^\/?Date\((\-?\d+)/i,zt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Rt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,jt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Wt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Bt=/\d\d?/,Yt=/\d{1,3}/,Ut=/\d{1,4}/,qt=/[+\-]?\d{1,6}/,Vt=/\d+/,Gt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Kt=/Z|[\+\-]\d\d:?\d\d/gi,Xt=/T/i,Zt=/[\+\-]?\d+/,Qt=/[\+\-]?\d+(\.\d{1,3})?/,Jt=/\d/,te=/\d\d/,ee=/\d{3}/,ne=/\d{4}/,ie=/[+-]?\d{6}/,re=/[+-]?\d+/,oe=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,se="YYYY-MM-DDTHH:mm:ssZ",ae=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],le=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ce=/([\+\-]|\d\d)/gi,ue=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),he={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},de={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},fe={},pe={s:45,m:45,h:22,d:26,M:11},me="DDD w W M D d".split(" "),ge="M D H h m s w W".split(" "),ve={M:function(){return this.month()+1},MMM:function(t){return this.localeData().monthsShort(this,t)},MMMM:function(t){return this.localeData().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.localeData().weekdaysMin(this,t)},ddd:function(t){return this.localeData().weekdaysShort(this,t)},dddd:function(t){return this.localeData().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var t=this.year();return(t>=0?"+":"-")+v(Math.abs(t),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return T(this.milliseconds()/100)},SS:function(){return v(T(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var t=this.utcOffset(),e="+";return 0>t&&(t=-t,e="-"),e+v(T(t/60),2)+":"+v(T(t)%60,2)},ZZ:function(){var t=this.utcOffset(),e="+";return 0>t&&(t=-t,e="-"),e+v(T(t/60),2)+v(T(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},ye={},be=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],we=!1;me.length;)_t=me.pop(),ve[_t+"o"]=l(ve[_t],_t);for(;ge.length;)_t=ge.pop(),ve[_t+_t]=a(ve[_t],2);ve.DDDD=a(ve.DDD,3),p(h.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t,e,n){var i,r,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=xt.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=xt([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e,n){var i=this._calendar[t];return"function"==typeof i?i.apply(e,[n]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(t){return t},postformat:function(t){return t},week:function(t){return ct(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),xt=function(e,n,r,o){var s;return"boolean"==typeof r&&(o=r,r=t),s={},s._isAMomentObject=!0,s._i=e,s._f=n,s._l=r,s._strict=o,s._isUTC=!1,s._pf=i(),ht(s)},xt.suppressDeprecationWarnings=!1,xt.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),xt.min=function(){return dt("isBefore",[].slice.call(arguments,0))},xt.max=function(){return dt("isAfter",[].slice.call(arguments,0))},xt.utc=function(e,n,r,o){var s;return"boolean"==typeof r&&(o=r,r=t),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=e,s._f=n,s._strict=o,s._pf=i(),ht(s).utc()},xt.unix=function(t){return xt(1e3*t)},xt.duration=function(t,e){var i,r,o,s,a=t,l=null;return xt.isDuration(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(l=zt.exec(t))?(i="-"===l[1]?-1:1,a={y:0,d:T(l[Et])*i,h:T(l[At])*i,m:T(l[$t])*i,s:T(l[It])*i,ms:T(l[Nt])*i}):(l=Rt.exec(t))?(i="-"===l[1]?-1:1,o=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i},a={y:o(l[2]),M:o(l[3]),d:o(l[4]),h:o(l[5]),m:o(l[6]),s:o(l[7]),w:o(l[8])}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(s=b(xt(a.from),xt(a.to)),a={},a.ms=s.milliseconds,a.M=s.months),r=new f(a),xt.isDuration(t)&&n(t,"_locale")&&(r._locale=t._locale),r},xt.version=Ct,xt.defaultFormat=se,xt.ISO_8601=function(){},xt.momentProperties=Pt,xt.updateOffset=function(){},xt.relativeTimeThreshold=function(e,n){return pe[e]!==t&&(n===t?pe[e]:(pe[e]=n,!0))},xt.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(t,e){return xt.locale(t,e)}),xt.locale=function(t,e){var n;return t&&(n=void 0!==e?xt.defineLocale(t,e):xt.localeData(t))&&(xt.duration._locale=xt._locale=n),xt._locale._abbr},xt.defineLocale=function(t,e){return null!==e?(e.abbr=t,Ot[t]||(Ot[t]=new h),Ot[t].set(e),xt.locale(t),Ot[t]):(delete Ot[t],null)},xt.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(t){return xt.localeData(t)}),xt.localeData=function(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return xt._locale;if(!k(t)){if(e=F(t))return e;t=[t]}return P(t)},xt.isMoment=function(t){return t instanceof d||null!=t&&n(t,"_isAMomentObject")},xt.isDuration=function(t){return t instanceof f};for(_t=be.length-1;_t>=0;--_t)M(be[_t]);xt.normalizeUnits=function(t){return S(t)},xt.invalid=function(t){var e=xt.utc(NaN);return null!=t?p(e._pf,t):e._pf.userInvalidated=!0,e},xt.parseZone=function(){return xt.apply(null,arguments).parseZone()},xt.parseTwoDigitYear=function(t){return T(t)+(T(t)>68?1900:2e3)},xt.isDate=_,p(xt.fn=d.prototype,{clone:function(){return xt(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=xt(this).utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():j(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):j(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return N(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&C(this._a,(this._isUTC?xt.utc(this._a):xt(this._a)).toArray())>0)},parsingFlags:function(){return p({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(t){return this.utcOffset(0,t)},local:function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(t){var e=j(this,t||xt.defaultFormat);return this.localeData().postformat(e)},add:w(1,"add"),subtract:w(-1,"subtract"),diff:function(t,e,n){var i,r,o=H(t,this),s=6e4*(o.utcOffset()-this.utcOffset());return e=S(e),"year"===e||"month"===e||"quarter"===e?(r=c(this,o),"quarter"===e?r/=3:"year"===e&&(r/=12)):(i=this-o,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-s)/864e5:"week"===e?(i-s)/6048e5:i),n?r:g(r)},from:function(t,e){return xt.duration({to:this,from:t}).locale(this.locale()).humanize(!e)},fromNow:function(t){return this.from(xt(),t)},calendar:function(t){var e=t||xt(),n=H(e,this).startOf("day"),i=this.diff(n,"days",!0),r=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,xt(e)))},isLeapYear:function(){return $(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=st(t,this.localeData()),this.add(t-e,"d")):e},month:gt("Month",!0),startOf:function(t){switch(t=S(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=S(e),e===t||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(t,e){return e=S(void 0!==e?e:"millisecond"),"millisecond"===e?(t=xt.isMoment(t)?t:xt(t),+this>+t):(xt.isMoment(t)?+t:+xt(t))<+this.clone().startOf(e)},isBefore:function(t,e){var n;return e=S(void 0!==e?e:"millisecond"),"millisecond"===e?+(t=xt.isMoment(t)?t:xt(t))>+this:(n=xt.isMoment(t)?+t:+xt(t),+this.clone().endOf(e)<n)},isBetween:function(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)},isSame:function(t,e){var n;return e=S(e||"millisecond"),"millisecond"===e?(t=xt.isMoment(t)?t:xt(t),+this==+t):(n=+xt(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=xt.apply(null,arguments),this>t?this:t}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=xt.apply(null,arguments),t>this?this:t}),zone:o("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),utcOffset:function(t,e){var n,i=this._offset||0;return null!=t?("string"==typeof t&&(t=Y(t)),Math.abs(t)<16&&(t*=60),!this._isUTC&&e&&(n=this._dateUtcOffset()),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==t&&(!e||this._changeInProgress?x(this,xt.duration(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,xt.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Y(this._i)),this},hasAlignedHourOffset:function(t){return t=t?xt(t).utcOffset():0,(this.utcOffset()-t)%60==0},daysInMonth:function(){return L(this.year(),this.month())},dayOfYear:function(t){var e=Dt((xt(this).startOf("day")-xt(this).startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=ct(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},isoWeekYear:function(t){var e=ct(this,1,4).year;return null==t?e:this.add(t-e,"y")},week:function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},isoWeek:function(t){var e=ct(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},weekday:function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return E(this.year(),1,4)},weeksInYear:function(){var t=this.localeData()._week;return E(this.year(),t.dow,t.doy)},get:function(t){return t=S(t),this[t]()},set:function(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else t=S(t),"function"==typeof this[t]&&this[t](e);return this},locale:function(e){var n;return e===t?this._locale._abbr:(n=xt.localeData(e),
null!=n&&(this._locale=n),this)},lang:o("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===t?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),xt.fn.millisecond=xt.fn.milliseconds=gt("Milliseconds",!1),xt.fn.second=xt.fn.seconds=gt("Seconds",!1),xt.fn.minute=xt.fn.minutes=gt("Minutes",!1),xt.fn.hour=xt.fn.hours=gt("Hours",!0),xt.fn.date=gt("Date",!0),xt.fn.dates=o("dates accessor is deprecated. Use date instead.",gt("Date",!0)),xt.fn.year=gt("FullYear",!0),xt.fn.years=o("years accessor is deprecated. Use year instead.",gt("FullYear",!0)),xt.fn.days=xt.fn.day,xt.fn.months=xt.fn.month,xt.fn.weeks=xt.fn.week,xt.fn.isoWeeks=xt.fn.isoWeek,xt.fn.quarters=xt.fn.quarter,xt.fn.toJSON=xt.fn.toISOString,xt.fn.isUTC=xt.fn.isUtc,p(xt.duration.fn=f.prototype,{_bubble:function(){var t,e,n,i=this._milliseconds,r=this._days,o=this._months,s=this._data,a=0;s.milliseconds=i%1e3,t=g(i/1e3),s.seconds=t%60,e=g(t/60),s.minutes=e%60,n=g(e/60),s.hours=n%24,r+=g(n/24),a=g(vt(r)),r-=g(yt(a)),o+=g(r/30),r%=30,a+=g(o/12),o%=12,s.days=r,s.months=o,s.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return g(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*T(this._months/12)},humanize:function(t){var e=lt(this,!t,this.localeData());return t&&(e=this.localeData().pastFuture(+this,e)),this.localeData().postformat(e)},add:function(t,e){var n=xt.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=xt.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=S(t),this[t.toLowerCase()+"s"]()},as:function(t){var e,n;if("month"===(t=S(t))||"year"===t)return e=this._days+this._milliseconds/864e5,n=this._months+12*vt(e),"month"===t?n:n/12;switch(e=this._days+Math.round(yt(this._months/12)),t){case"week":return e/7+this._milliseconds/6048e5;case"day":return e+this._milliseconds/864e5;case"hour":return 24*e+this._milliseconds/36e5;case"minute":return 24*e*60+this._milliseconds/6e4;case"second":return 24*e*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+t)}},lang:xt.fn.lang,locale:xt.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||r||o?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),xt.duration.fn.toString=xt.duration.fn.toISOString;for(_t in ue)n(ue,_t)&&bt(_t.toLowerCase());xt.duration.fn.asMilliseconds=function(){return this.as("ms")},xt.duration.fn.asSeconds=function(){return this.as("s")},xt.duration.fn.asMinutes=function(){return this.as("m")},xt.duration.fn.asHours=function(){return this.as("h")},xt.duration.fn.asDays=function(){return this.as("d")},xt.duration.fn.asWeeks=function(){return this.as("weeks")},xt.duration.fn.asMonths=function(){return this.as("M")},xt.duration.fn.asYears=function(){return this.as("y")},xt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===T(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),Ft?module.exports=xt:"function"==typeof define&&define.amd?(define(function(t,e,n){return n.config&&n.config()&&!0===n.config().noGlobal&&(St.moment=kt),xt}),wt(!0)):wt()}.call(this),function(){function t(t){return document.createElementNS(c,t)}function e(t){return(t<10?"0":"")+t}function n(t){var e=++v+"";return t?t+e:e}function i(i,a){function c(t,e){var n=d.offset(),i=/^touch/.test(t.type),r=n.left+y,s=n.top+y,c=(i?t.originalEvent.touches[0]:t).pageX-r,h=(i?t.originalEvent.touches[0]:t).pageY-s,f=Math.sqrt(c*c+h*h),g=!1;if(!e||!(f<b-x||f>b+x)){t.preventDefault();var v=setTimeout(function(){o.addClass("clockpicker-moving")},200);u&&d.append(L.canvas),L.setHand(c,h,!e,!0),l.off(p).on(p,function(t){t.preventDefault();var e=/^touch/.test(t.type),n=(e?t.originalEvent.touches[0]:t).pageX-r,i=(e?t.originalEvent.touches[0]:t).pageY-s;(g||n!==c||i!==h)&&(g=!0,L.setHand(n,i,!1,!0))}),l.off(m).on(m,function(t){l.off(m),t.preventDefault();var n=/^touch/.test(t.type),i=(n?t.originalEvent.changedTouches[0]:t).pageX-r,u=(n?t.originalEvent.changedTouches[0]:t).pageY-s;(e||g)&&i===c&&u===h&&L.setHand(i,u),"hours"===L.currentView?L.toggleView("minutes",_/2):a.autoclose&&(L.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){L.done()},_/2)),d.prepend(F),clearTimeout(v),o.removeClass("clockpicker-moving"),l.off(p)})}}var h=s(C),d=h.find(".clockpicker-plate"),g=h.find(".clockpicker-hours"),v=h.find(".clockpicker-minutes"),S=h.find(".clockpicker-am-pm-block"),D="INPUT"===i.prop("tagName"),M=D?i:i.find("input"),T=i.find(".input-group-addon"),L=this;if(this.id=n("cp"),this.element=i,this.options=a,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=D,this.input=M,this.addon=T,this.popover=h,this.plate=d,this.hoursView=g,this.minutesView=v,this.amPmBlock=S,this.spanHours=h.find(".clockpicker-span-hours"),this.spanMinutes=h.find(".clockpicker-span-minutes"),this.spanAmPm=h.find(".clockpicker-span-am-pm"),this.amOrPm="PM",a.twelvehour){var E=['<div class="clockpicker-am-pm-block">','<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-am-button">',"AM</button>",'<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-pm-button">',"PM</button>","</div>"].join("");s(E);s('<button type="button" class="btn btn-sm btn-default clockpicker-button am-button">AM</button>').on("click",function(){L.amOrPm="AM",s(".clockpicker-span-am-pm").empty().append("AM")}).appendTo(this.amPmBlock),s('<button type="button" class="btn btn-sm btn-default clockpicker-button pm-button">PM</button>').on("click",function(){L.amOrPm="PM",s(".clockpicker-span-am-pm").empty().append("PM")}).appendTo(this.amPmBlock)}a.autoclose||s('<button type="button" class="btn btn-sm btn-default btn-block clockpicker-button">'+a.donetext+"</button>").click(s.proxy(this.done,this)).appendTo(h),"top"!==a.placement&&"bottom"!==a.placement||"top"!==a.align&&"bottom"!==a.align||(a.align="left"),"left"!==a.placement&&"right"!==a.placement||"left"!==a.align&&"right"!==a.align||(a.align="top"),h.addClass(a.placement),h.addClass("clockpicker-align-"+a.align),this.spanHours.click(s.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(s.proxy(this.toggleView,this,"minutes")),M.on("focus.clockpicker click.clockpicker",s.proxy(this.show,this)),T.on("click.clockpicker",s.proxy(this.toggle,this));var A,$,I,N,O=s('<div class="clockpicker-tick"></div>');if(a.twelvehour)for(A=1;A<13;A+=1)$=O.clone(),I=A/6*Math.PI,N=b,$.css("font-size","120%"),$.css({left:y+Math.sin(I)*N-x,top:y-Math.cos(I)*N-x}),$.html(0===A?"00":A),g.append($),$.on(f,c);else for(A=0;A<24;A+=1){$=O.clone(),I=A/6*Math.PI;var P=A>0&&A<13;N=P?w:b,$.css({left:y+Math.sin(I)*N-x,top:y-Math.cos(I)*N-x}),P&&$.css("font-size","120%"),$.html(0===A?"00":A),g.append($),$.on(f,c)}for(A=0;A<60;A+=5)$=O.clone(),I=A/30*Math.PI,$.css({left:y+Math.sin(I)*b-x,top:y-Math.cos(I)*b-x}),$.css("font-size","120%"),$.html(e(A)),v.append($),$.on(f,c);if(d.on(f,function(t){0===s(t.target).closest(".clockpicker-tick").length&&c(t,!0)}),u){var F=h.find(".clockpicker-canvas"),H=t("svg");H.setAttribute("class","clockpicker-svg"),H.setAttribute("width",k),H.setAttribute("height",k);var z=t("g");z.setAttribute("transform","translate("+y+","+y+")");var R=t("circle");R.setAttribute("class","clockpicker-canvas-bearing"),R.setAttribute("cx",0),R.setAttribute("cy",0),R.setAttribute("r",2);var j=t("line");j.setAttribute("x1",0),j.setAttribute("y1",0);var W=t("circle");W.setAttribute("class","clockpicker-canvas-bg"),W.setAttribute("r",x);var B=t("circle");B.setAttribute("class","clockpicker-canvas-fg"),B.setAttribute("r",3.5),z.appendChild(j),z.appendChild(W),z.appendChild(B),z.appendChild(R),H.appendChild(z),F.append(H),this.hand=j,this.bg=W,this.fg=B,this.bearing=R,this.g=z,this.canvas=F}r(this.options.init)}function r(t){t&&"function"==typeof t&&t()}var o,s=window.jQuery,a=s(window),l=s(document),c="http://www.w3.org/2000/svg",u="SVGAngle"in window&&function(){var t,e=document.createElement("div");return e.innerHTML="<svg/>",t=(e.firstChild&&e.firstChild.namespaceURI)==c,e.innerHTML="",t}(),h=function(){var t=document.createElement("div").style;return"transition"in t||"WebkitTransition"in t||"MozTransition"in t||"msTransition"in t||"OTransition"in t}(),d="ontouchstart"in window,f="mousedown"+(d?" touchstart":""),p="mousemove.clockpicker"+(d?" touchmove.clockpicker":""),m="mouseup.clockpicker"+(d?" touchend.clockpicker":""),g=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,v=0,y=100,b=80,w=54,x=13,k=2*y,_=h?350:1,C=['<div class="popover clockpicker-popover">','<div class="arrow"></div>','<div class="popover-title">','<span class="clockpicker-span-hours text-primary"></span>'," : ",'<span class="clockpicker-span-minutes"></span>','<span class="clockpicker-span-am-pm"></span>',"</div>",'<div class="popover-content">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<span class="clockpicker-am-pm-block">',"</span>","</div>","</div>"].join("");i.DEFAULTS={"default":"",fromnow:0,placement:"bottom",align:"left",donetext:"\u5b8c\u6210",autoclose:!1,twelvehour:!1,vibrate:!0},i.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},i.prototype.locate=function(){var t=this.element,e=this.popover,n=t.offset(),i=t.outerWidth(),r=t.outerHeight(),o=this.options.placement,s=this.options.align,a={};switch(e.show(),o){case"bottom":a.top=n.top+r;break;case"right":a.left=n.left+i;break;case"top":a.top=n.top-e.outerHeight();break;case"left":a.left=n.left-e.outerWidth()}switch(s){case"left":a.left=n.left;break;case"right":a.left=n.left+i-e.outerWidth();break;case"top":a.top=n.top;break;case"bottom":a.top=n.top+r-e.outerHeight()}e.css(a)},i.prototype.show=function(){if(!this.isShown){r(this.options.beforeShow);var t=this;this.isAppended||(o=s(document.body).append(this.popover),a.on("resize.clockpicker"+this.id,function(){t.isShown&&t.locate()}),this.isAppended=!0);var n=((this.input.prop("value")||this.options["default"]||"")+"").split(":");if("now"===n[0]){var i=new Date(+new Date+this.options.fromnow);n=[i.getHours(),i.getMinutes()]}this.hours=+n[0]||0,this.minutes=+n[1]||0,this.spanHours.html(e(this.hours)),this.spanMinutes.html(e(this.minutes)),this.toggleView("hours"),this.locate(),this.isShown=!0,l.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(e){var n=s(e.target);0===n.closest(t.popover).length&&0===n.closest(t.addon).length&&0===n.closest(t.input).length&&t.hide()}),l.on("keyup.clockpicker."+this.id,function(e){27===e.keyCode&&t.hide()}),r(this.options.afterShow)}},i.prototype.hide=function(){r(this.options.beforeHide),this.isShown=!1,l.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),l.off("keyup.clockpicker."+this.id),this.popover.hide(),r(this.options.afterHide)},i.prototype.toggleView=function(t,e){var n=!1;"minutes"===t&&"visible"===s(this.hoursView).css("visibility")&&(r(this.options.beforeHourSelect),n=!0);var i="hours"===t,o=i?this.hoursView:this.minutesView,a=i?this.minutesView:this.hoursView;this.currentView=t,this.spanHours.toggleClass("text-primary",i),this.spanMinutes.toggleClass("text-primary",!i),a.addClass("clockpicker-dial-out"),o.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(e),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){a.css("visibility","hidden")},_),n&&r(this.options.afterHourSelect)},i.prototype.resetClock=function(t){var e=this.currentView,n=this[e],i="hours"===e,r=Math.PI/(i?6:30),o=n*r,s=i&&n>0&&n<13?w:b,a=Math.sin(o)*s,l=-Math.cos(o)*s,c=this;u&&t?(c.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){c.canvas.removeClass("clockpicker-canvas-out"),c.setHand(a,l)},t)):this.setHand(a,l)},i.prototype.setHand=function(t,n,i,r){var o,a=Math.atan2(t,-n),l="hours"===this.currentView,c=Math.PI/(l||i?6:30),h=Math.sqrt(t*t+n*n),d=this.options,f=l&&h<(b+w)/2,p=f?w:b;if(d.twelvehour&&(p=b),a<0&&(a=2*Math.PI+a),o=Math.round(a/c),a=o*c,d.twelvehour?l?0===o&&(o=12):(i&&(o*=5),60===o&&(o=0)):l?(12===o&&(o=0),o=f?0===o?12:o:0===o?0:o+12):(i&&(o*=5),60===o&&(o=0)),this[this.currentView]!==o&&g&&this.options.vibrate&&(this.vibrateTimer||(navigator[g](10),this.vibrateTimer=setTimeout(s.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=o,this[l?"spanHours":"spanMinutes"].html(e(o)),!u)return void this[l?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var t=s(this);t.toggleClass("active",o===+t.html())});r||!l&&o%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg"));var m=Math.sin(a)*p,v=-Math.cos(a)*p;this.hand.setAttribute("x2",m),this.hand.setAttribute("y2",v),this.bg.setAttribute("cx",m),this.bg.setAttribute("cy",v),this.fg.setAttribute("cx",m),this.fg.setAttribute("cy",v)},i.prototype.done=function(){r(this.options.beforeDone),this.hide();var t=this.input.prop("value"),n=e(this.hours)+":"+e(this.minutes);this.options.twelvehour&&(n+=this.amOrPm),this.input.prop("value",n),n!==t&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur"),r(this.options.afterDone)},i.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.addon.off("click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(a.off("resize.clockpicker"+this.id),this.popover.remove())},s.fn.clockpicker=function(t){var e=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=s(this),r=n.data("clockpicker");if(r)"function"==typeof r[t]&&r[t].apply(r,e);else{var o=s.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);n.data("clockpicker",new i(n,o))}})}}(),function(t,e){if("function"==typeof define&&define.amd)define(["moment","jquery","exports"],function(n,i,r){t.daterangepicker=e(t,r,n,i)});else if("undefined"!=typeof exports){var n,i=require("moment");try{n=require("jquery")}catch(t){if(!(n=window.jQuery))throw new Error("jQuery dependency not found")}e(t,exports,i,n)}else t.daterangepicker=e(t,{},t.moment,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,i){var r=function(t,e,n){this.parentEl="body",this.element=i(t),this.isShowing=!1,"object"==typeof e&&null!==e||(e={}),this.parentEl=i("object"==typeof e&&e.parentEl&&i(e.parentEl).length?e.parentEl:this.parentEl),this.container=i('<div class="daterangepicker dropdown-menu"><div class="calendar first left"></div><div class="calendar second right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start"></label><input class="input-mini" type="text" name="daterangepicker_start" value="" /></div><div class="daterangepicker_end_input"><label for="daterangepicker_end"></label><input class="input-mini" type="text" name="daterangepicker_end" value="" /></div><button class="applyBtn" disabled="disabled"></button>&nbsp;<button class="cancelBtn"></button></div></div></div>').appendTo(this.parentEl),this.setOptions(e,n),this.container.find(".calendar").on("click.daterangepicker",".prev",i.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",i.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",i.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",i.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",i.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",i.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.monthselect",i.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",i.proxy(this.updateTime,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",i.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",i.proxy(this.clickCancel,this)).on("click.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",i.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",i.proxy(this.inputsChanged,this)).on("keydown.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",i.proxy(this.inputsKeydown,this)).on("click.daterangepicker","li",i.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",i.proxy(this.enterRange,this)).on("mouseleave.daterangepicker","li",i.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":i.proxy(this.show,this),"focus.daterangepicker":i.proxy(this.show,this),"keyup.daterangepicker":i.proxy(this.updateFromControl,this),"keydown.daterangepicker":i.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",i.proxy(this.toggle,this))};r.prototype={constructor:r,setOptions:function(t,e){if(this.startDate=n().startOf("day"),this.endDate=n().endOf("day"),this.timeZone=n().utcOffset(),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerSeconds=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.singleDatePicker=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses=["btn","btn-small btn-sm"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="MM/DD/YYYY",this.separator=" - ",this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:n.weekdaysMin(),monthNames:n.monthsShort(),firstDay:n.localeData()._week.dow},this.cb=function(){},"string"==typeof t.format&&(this.format=t.format),"string"==typeof t.separator&&(this.separator=t.separator),"string"==typeof t.startDate&&(this.startDate=n(t.startDate,this.format)),"string"==typeof t.endDate&&(this.endDate=n(t.endDate,this.format)),"string"==typeof t.minDate&&(this.minDate=n(t.minDate,this.format)),"string"==typeof t.maxDate&&(this.maxDate=n(t.maxDate,this.format)),"object"==typeof t.startDate&&(this.startDate=n(t.startDate)),"object"==typeof t.endDate&&(this.endDate=n(t.endDate)),"object"==typeof t.minDate&&(this.minDate=n(t.minDate)),"object"==typeof t.maxDate&&(this.maxDate=n(t.maxDate)),"string"==typeof t.applyClass&&(this.applyClass=t.applyClass),"string"==typeof t.cancelClass&&(this.cancelClass=t.cancelClass),"object"==typeof t.dateLimit&&(this.dateLimit=t.dateLimit),"object"==typeof t.locale&&("object"==typeof t.locale.daysOfWeek&&(this.locale.daysOfWeek=t.locale.daysOfWeek.slice()),"object"==typeof t.locale.monthNames&&(this.locale.monthNames=t.locale.monthNames.slice()),"number"==typeof t.locale.firstDay&&(this.locale.firstDay=t.locale.firstDay),"string"==typeof t.locale.applyLabel&&(this.locale.applyLabel=t.locale.applyLabel),"string"==typeof t.locale.cancelLabel&&(this.locale.cancelLabel=t.locale.cancelLabel),"string"==typeof t.locale.fromLabel&&(this.locale.fromLabel=t.locale.fromLabel),"string"==typeof t.locale.toLabel&&(this.locale.toLabel=t.locale.toLabel),"string"==typeof t.locale.weekLabel&&(this.locale.weekLabel=t.locale.weekLabel),"string"==typeof t.locale.customRangeLabel&&(this.locale.customRangeLabel=t.locale.customRangeLabel)),"string"==typeof t.opens&&(this.opens=t.opens),"string"==typeof t.drops&&(this.drops=t.drops),"boolean"==typeof t.showWeekNumbers&&(this.showWeekNumbers=t.showWeekNumbers),"string"==typeof t.buttonClasses&&(this.buttonClasses=[t.buttonClasses]),"object"==typeof t.buttonClasses&&(this.buttonClasses=t.buttonClasses),"boolean"==typeof t.showDropdowns&&(this.showDropdowns=t.showDropdowns),"boolean"==typeof t.singleDatePicker&&(this.singleDatePicker=t.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof t.timePicker&&(this.timePicker=t.timePicker),"boolean"==typeof t.timePickerSeconds&&(this.timePickerSeconds=t.timePickerSeconds),"number"==typeof t.timePickerIncrement&&(this.timePickerIncrement=t.timePickerIncrement),"boolean"==typeof t.timePicker12Hour&&(this.timePicker12Hour=t.timePicker12Hour),0!=this.locale.firstDay)for(var r=this.locale.firstDay;r>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),r--;var o,s,a;if("undefined"==typeof t.startDate&&"undefined"==typeof t.endDate&&i(this.element).is("input[type=text]")){var l=i(this.element).val(),c=l.split(this.separator);o=s=null,2==c.length?(o=n(c[0],this.format),s=n(c[1],this.format)):this.singleDatePicker&&""!==l&&(o=n(l,this.format),s=n(l,this.format)),null!==o&&null!==s&&(this.startDate=o,this.endDate=s)}if("string"==typeof t.timeZone||"number"==typeof t.timeZone?("string"==typeof t.timeZone&&"undefined"!=typeof n.tz?this.timeZone=-1*n.tz.zone(t.timeZone).parse(new Date):this.timeZone=t.timeZone,this.startDate.utcOffset(this.timeZone),this.endDate.utcOffset(this.timeZone)):this.timeZone=n(this.startDate).utcOffset(),"object"==typeof t.ranges){for(a in t.ranges)o="string"==typeof t.ranges[a][0]?n(t.ranges[a][0],this.format):n(t.ranges[a][0]),s="string"==typeof t.ranges[a][1]?n(t.ranges[a][1],this.format):n(t.ranges[a][1]),this.minDate&&o.isBefore(this.minDate)&&(o=n(this.minDate)),this.maxDate&&s.isAfter(this.maxDate)&&(s=n(this.maxDate)),this.minDate&&s.isBefore(this.minDate)||this.maxDate&&o.isAfter(this.maxDate)||(this.ranges[a]=[o,s]);var u="<ul>";for(a in this.ranges)u+="<li>"+a+"</li>";u+="<li>"+this.locale.customRangeLabel+"</li>",u+="</ul>",this.container.find(".ranges ul").remove(),this.container.find(".ranges").prepend(u)}if("function"==typeof e&&(this.cb=e),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day")),this.singleDatePicker?(this.opens="right",this.container.addClass("single"),this.container.find(".calendar.right").show(),this.container.find(".calendar.left").hide(),this.timePicker?this.container.find(".ranges .daterangepicker_start_input, .ranges .daterangepicker_end_input").hide():this.container.find(".ranges").hide(),this.container.find(".calendar.right").hasClass("single")||this.container.find(".calendar.right").addClass("single")):(this.container.removeClass("single"),this.container.find(".calendar.right").removeClass("single"),this.container.find(".ranges").show()),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.oldChosenLabel=this.chosenLabel,this.leftCalendar={month:n([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute(),this.startDate.second()]),calendar:[]},this.rightCalendar={month:n([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute(),this.endDate.second()]),calendar:[]},"right"==this.opens||"center"==this.opens){var h=this.container.find(".calendar.first"),d=this.container.find(".calendar.second");d.hasClass("single")&&(d.removeClass("single"),h.addClass("single")),h.removeClass("left").addClass("right"),d.removeClass("right").addClass("left"),this.singleDatePicker&&(h.show(),d.hide())}"undefined"!=typeof t.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.removeClass("opensleft opensright").addClass("opens"+this.opens),this.updateView(),this.updateCalendars();var f=this.container;i.each(this.buttonClasses,function(t,e){f.find("button").addClass(e)}),this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel),this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel)},setStartDate:function(t){"string"==typeof t&&(this.startDate=n(t,this.format).utcOffset(this.timeZone)),"object"==typeof t&&(this.startDate=n(t)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.oldStartDate=this.startDate.clone(),this.updateView(),this.updateCalendars(),this.updateInputText()},setEndDate:function(t){"string"==typeof t&&(this.endDate=n(t,this.format).utcOffset(this.timeZone)),"object"==typeof t&&(this.endDate=n(t)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.oldEndDate=this.endDate.clone(),this.updateView(),this.updateCalendars(),this.updateInputText()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format)),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")&&this.element.val().length){var t=this.element.val().split(this.separator),e=null,i=null;2===t.length&&(e=n(t[0],this.format).utcOffset(this.timeZone),i=n(t[1],this.format).utcOffset(this.timeZone)),(this.singleDatePicker||null===e||null===i)&&(e=n(this.element.val(),this.format).utcOffset(this.timeZone),i=e),i.isBefore(e)||(this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.startDate=e,this.endDate=i,this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.updateCalendars())}},keydown:function(t){9!==t.keyCode&&13!==t.keyCode||this.hide()},notify:function(){this.updateView(),this.cb(this.startDate,this.endDate,this.chosenLabel)},move:function(){var t,e={top:0,left:0},n=i(window).width();this.parentEl.is("body")||(e={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},n=this.parentEl[0].clientWidth+this.parentEl.offset().left),t="up"==this.drops?this.element.offset().top-this.container.outerHeight()-e.top:this.element.offset().top+this.element.outerHeight()-e.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:t,right:n-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:t,left:this.element.offset().left-e.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:t,left:this.element.offset().left-e.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>i(window).width()&&this.container.css({left:"auto",right:0}))},toggle:function(){this.element.hasClass("active")?this.hide():this.show()},show:function(){this.isShowing||(this.element.addClass("active"),this.container.show(),this.move(),this._outsideClickProxy=i.proxy(function(t){this.outsideClick(t)},this),i(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),this.isShowing=!0,this.element.trigger("show.daterangepicker",this))},outsideClick:function(t){var e=i(t.target);"focusin"==t.type||e.closest(this.element).length||e.closest(this.container).length||e.closest(".calendar-date").length||this.hide()},hide:function(){this.isShowing&&(i(document).off(".daterangepicker"),this.element.removeClass("active"),this.container.hide(),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.isShowing=!1,this.element.trigger("hide.daterangepicker",this))},enterRange:function(t){var e=t.target.innerHTML;if(e==this.locale.customRangeLabel)this.updateView();else{var n=this.ranges[e];this.container.find("input[name=daterangepicker_start]").val(n[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(n[1].format(this.format))}},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},inputsChanged:function(t){var e=i(t.target),r=n(e.val(),this.format);if(r.isValid()){var o,s;"daterangepicker_start"===e.attr("name")?(o=!1!==this.minDate&&r.isBefore(this.minDate)?this.minDate:r,s=this.endDate):(o=this.startDate,s=!1!==this.maxDate&&r.isAfter(this.maxDate)?this.maxDate:r),this.setCustomDates(o,s)}},inputsKeydown:function(t){13===t.keyCode&&(this.inputsChanged(t),this.notify())},updateInputText:function(){this.element.is("input")&&!this.singleDatePicker?(this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format)),this.element.trigger("change")):this.element.is("input")&&(this.element.val(this.endDate.format(this.format)),this.element.trigger("change"))},clickRange:function(t){var e=t.target.innerHTML;if(this.chosenLabel=e,e==this.locale.customRangeLabel)this.showCalendars();else{var n=this.ranges[e];this.startDate=n[0],this.endDate=n[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.hideCalendars(),this.hide(),this.element.trigger("apply.daterangepicker",this)}},clickPrev:function(t){i(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.subtract(1,"month"):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(t){i(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):this.rightCalendar.month.add(1,"month"),this.updateCalendars()},hoverDate:function(t){var e=i(t.target).attr("data-title"),n=e.substr(1,1),r=e.substr(3,1);i(t.target).parents(".calendar").hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[n][r].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[n][r].format(this.format))},setCustomDates:function(t,e){if(this.chosenLabel=this.locale.customRangeLabel,t.isAfter(e)){var i=this.endDate.diff(this.startDate);e=n(t).add(i,"ms"),
this.maxDate&&e.isAfter(this.maxDate)&&(e=this.maxDate.clone())}this.startDate=t,this.endDate=e,this.updateView(),this.updateCalendars()},clickDate:function(t){var e,r,o=i(t.target).attr("data-title"),s=o.substr(1,1),a=o.substr(3,1),l=i(t.target).parents(".calendar");if(l.hasClass("left")){if(e=this.leftCalendar.calendar[s][a],r=this.endDate,"object"==typeof this.dateLimit){var c=n(e).add(this.dateLimit).startOf("day");r.isAfter(c)&&(r=c)}}else if(e=this.startDate,r=this.rightCalendar.calendar[s][a],"object"==typeof this.dateLimit){var u=n(r).subtract(this.dateLimit).startOf("day");e.isBefore(u)&&(e=u)}this.singleDatePicker&&l.hasClass("left")?r=e.clone():this.singleDatePicker&&l.hasClass("right")&&(e=r.clone()),l.find("td").removeClass("active"),i(t.target).addClass("active"),this.setCustomDates(e,r),this.timePicker||r.endOf("day"),this.singleDatePicker&&!this.timePicker&&this.clickApply()},clickApply:function(){this.updateInputText(),this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.chosenLabel=this.oldChosenLabel,this.updateView(),this.updateCalendars(),this.hide(),this.element.trigger("cancel.daterangepicker",this)},updateMonthYear:function(t){var e=i(t.target).closest(".calendar").hasClass("left"),n=e?"left":"right",r=this.container.find(".calendar."+n),o=parseInt(r.find(".monthselect").val(),10),s=r.find(".yearselect").val();e||this.singleDatePicker||(s<this.startDate.year()||s==this.startDate.year()&&o<this.startDate.month())&&(o=this.startDate.month(),s=this.startDate.year()),this.minDate&&(s<this.minDate.year()||s==this.minDate.year()&&o<this.minDate.month())&&(o=this.minDate.month(),s=this.minDate.year()),this.maxDate&&(s>this.maxDate.year()||s==this.maxDate.year()&&o>this.maxDate.month())&&(o=this.maxDate.month(),s=this.maxDate.year()),this[n+"Calendar"].month.month(o).year(s),this.updateCalendars()},updateTime:function(t){var e=i(t.target).closest(".calendar"),n=e.hasClass("left"),r=parseInt(e.find(".hourselect").val(),10),o=parseInt(e.find(".minuteselect").val(),10),s=0;if(this.timePickerSeconds&&(s=parseInt(e.find(".secondselect").val(),10)),this.timePicker12Hour){var a=e.find(".ampmselect").val();"PM"===a&&r<12&&(r+=12),"AM"===a&&12===r&&(r=0)}if(n){var l=this.startDate.clone();l.hour(r),l.minute(o),l.second(s),this.startDate=l,this.leftCalendar.month.hour(r).minute(o).second(s),this.singleDatePicker&&(this.endDate=l.clone())}else{var c=this.endDate.clone();c.hour(r),c.minute(o),c.second(s),this.endDate=c,this.singleDatePicker&&(this.startDate=c.clone()),this.rightCalendar.month.hour(r).minute(o).second(s)}this.updateView(),this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),this.leftCalendar.month.second(),"left"),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),this.rightCalendar.month.second(),"right"),this.container.find(".calendar.left").empty().html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate,"left")),this.container.find(".calendar.right").empty().html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.singleDatePicker?this.minDate:this.startDate,this.maxDate,"right")),this.container.find(".ranges li").removeClass("active");var t=!0,e=0;for(var n in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[n][0])&&this.endDate.isSame(this.ranges[n][1])&&(t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").html()):this.startDate.format("YYYY-MM-DD")==this.ranges[n][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[n][1].format("YYYY-MM-DD")&&(t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").html()),e++;t&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars())},buildCalendar:function(t,e,i,r,o,s){var a,l=n([e,t]).daysInMonth(),c=n([e,t,1]),u=n([e,t,l]),h=n(c).subtract(1,"month").month(),d=n(c).subtract(1,"month").year(),f=n([d,h]).daysInMonth(),p=c.day(),m=[];for(m.firstDay=c,m.lastDay=u,a=0;a<6;a++)m[a]=[];var g=f-p+this.locale.firstDay+1;g>f&&(g-=7),p==this.locale.firstDay&&(g=f-6);var v,y,b=n([d,h,g,12,r,o]).utcOffset(this.timeZone);for(a=0,v=0,y=0;a<42;a++,v++,b=n(b).add(24,"hour"))a>0&&v%7==0&&(v=0,y++),m[y][v]=b.clone().hour(i),b.hour(12),this.minDate&&m[y][v].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&m[y][v].isBefore(this.minDate)&&"left"==s&&(m[y][v]=this.minDate.clone()),this.maxDate&&m[y][v].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&m[y][v].isAfter(this.maxDate)&&"right"==s&&(m[y][v]=this.maxDate.clone());return m},renderDropdowns:function(t,e,n){for(var i=t.month(),r=t.year(),o=n&&n.year()||r+5,s=e&&e.year()||r-50,a='<select class="monthselect">',l=r==s,c=r==o,u=0;u<12;u++)(!l||u>=e.month())&&(!c||u<=n.month())&&(a+="<option value='"+u+"'"+(u===i?" selected='selected'":"")+">"+this.locale.monthNames[u]+"</option>");a+="</select>";for(var h='<select class="yearselect">',d=s;d<=o;d++)h+='<option value="'+d+'"'+(d===r?' selected="selected"':"")+">"+d+"</option>";return h+="</select>",a+h},renderCalendar:function(t,e,n,r,o){var s='<div class="calendar-date">';s+='<table class="table-condensed">',s+="<thead>",s+="<tr>",this.showWeekNumbers&&(s+="<th></th>"),!n||n.isBefore(t.firstDay)?s+='<th class="prev available"><i class="fa fa-arrow-left icon icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>':s+="<th></th>";var a=this.locale.monthNames[t[1][1].month()]+t[1][1].format(" YYYY");this.showDropdowns&&(a=this.renderDropdowns(t[1][1],n,r)),s+='<th colspan="5" class="month">'+a+"</th>",!r||r.isAfter(t.lastDay)?s+='<th class="next available"><i class="fa fa-arrow-right icon icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>':s+="<th></th>",s+="</tr>",s+="<tr>",this.showWeekNumbers&&(s+='<th class="week">'+this.locale.weekLabel+"</th>"),i.each(this.locale.daysOfWeek,function(t,e){s+="<th>"+e+"</th>"}),s+="</tr>",s+="</thead>",s+="<tbody>";for(var l=0;l<6;l++){s+="<tr>",this.showWeekNumbers&&(s+='<td class="week">'+t[l][0].week()+"</td>");for(var c=0;c<7;c++){var u="available ";u+=t[l][c].month()==t[1][1].month()?"":"off",n&&t[l][c].isBefore(n,"day")||r&&t[l][c].isAfter(r,"day")?u=" off disabled ":t[l][c].format("YYYY-MM-DD")==e.format("YYYY-MM-DD")?(u+=" active ",t[l][c].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(u+=" start-date "),t[l][c].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(u+=" end-date ")):t[l][c]>=this.startDate&&t[l][c]<=this.endDate&&(u+=" in-range ",t[l][c].isSame(this.startDate)&&(u+=" start-date "),t[l][c].isSame(this.endDate)&&(u+=" end-date "));var h="r"+l+"c"+c;s+='<td class="'+u.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+h+'">'+t[l][c].date()+"</td>"}s+="</tr>"}s+="</tbody>",s+="</table>",s+="</div>";var d;if(this.timePicker){s+='<div class="calendar-time">',s+='<select class="hourselect">';var f=0,p=23;n&&("left"==o||this.singleDatePicker)&&e.format("YYYY-MM-DD")==n.format("YYYY-MM-DD")&&(f=n.hour(),e.hour()<f&&e.hour(f),this.timePicker12Hour&&f>=12&&e.hour()>=12&&(f-=12),this.timePicker12Hour&&12==f&&(f=1)),r&&("right"==o||this.singleDatePicker)&&e.format("YYYY-MM-DD")==r.format("YYYY-MM-DD")&&(p=r.hour(),e.hour()>p&&e.hour(p),this.timePicker12Hour&&p>=12&&e.hour()>=12&&(p-=12));var m=0,g=23,v=e.hour();for(this.timePicker12Hour&&(m=1,g=12,v>=12&&(v-=12),0===v&&(v=12)),d=m;d<=g;d++)s+=d==v?'<option value="'+d+'" selected="selected">'+d+"</option>":d<f||d>p?'<option value="'+d+'" disabled="disabled" class="disabled">'+d+"</option>":'<option value="'+d+'">'+d+"</option>";s+="</select> : ",s+='<select class="minuteselect">';var y=0,b=59;for(n&&("left"==o||this.singleDatePicker)&&e.format("YYYY-MM-DD h A")==n.format("YYYY-MM-DD h A")&&(y=n.minute(),e.minute()<y&&e.minute(y)),r&&("right"==o||this.singleDatePicker)&&e.format("YYYY-MM-DD h A")==r.format("YYYY-MM-DD h A")&&(b=r.minute(),e.minute()>b&&e.minute(b)),d=0;d<60;d+=this.timePickerIncrement){var w=d;w<10&&(w="0"+w),d==e.minute()?s+='<option value="'+d+'" selected="selected">'+w+"</option>":s+=d<y||d>b?'<option value="'+d+'" disabled="disabled" class="disabled">'+w+"</option>":'<option value="'+d+'">'+w+"</option>"}if(s+="</select> ",this.timePickerSeconds){for(s+=': <select class="secondselect">',d=0;d<60;d+=this.timePickerIncrement){var w=d;w<10&&(w="0"+w),d==e.second()?s+='<option value="'+d+'" selected="selected">'+w+"</option>":s+='<option value="'+d+'">'+w+"</option>"}s+="</select>"}if(this.timePicker12Hour){s+='<select class="ampmselect">';var x="",k="";n&&("left"==o||this.singleDatePicker)&&e.format("YYYY-MM-DD")==n.format("YYYY-MM-DD")&&n.hour()>=12&&(x=' disabled="disabled" class="disabled"'),r&&("right"==o||this.singleDatePicker)&&e.format("YYYY-MM-DD")==r.format("YYYY-MM-DD")&&r.hour()<12&&(k=' disabled="disabled" class="disabled"'),e.hour()>=12?s+='<option value="AM"'+x+'>AM</option><option value="PM" selected="selected"'+k+">PM</option>":s+='<option value="AM" selected="selected"'+x+'>AM</option><option value="PM"'+k+">PM</option>",s+="</select>"}s+="</div>"}return s},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData("daterangepicker")}},i.fn.daterangepicker=function(t,e){return this.each(function(){var n=i(this);n.data("daterangepicker")&&n.data("daterangepicker").remove(),n.data("daterangepicker",new r(n,t,e))}),this}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var e;return function(){if(!e||!e.requirejs){e?n=e:e={};var t,n,i;!function(e){function r(t,e){return w.call(t,e)}function o(t,e){var n,i,r,o,s,a,l,c,u,h,d,f=e&&e.split("/"),p=y.map,m=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(f=f.slice(0,f.length-1),t=t.split("/"),s=t.length-1,y.nodeIdCompat&&k.test(t[s])&&(t[s]=t[s].replace(k,"")),t=f.concat(t),u=0;u<t.length;u+=1)if("."===(d=t[u]))t.splice(u,1),u-=1;else if(".."===d){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||m)&&p){for(n=t.split("/"),u=n.length;u>0;u-=1){if(i=n.slice(0,u).join("/"),f)for(h=f.length;h>0;h-=1)if((r=p[f.slice(0,h).join("/")])&&(r=r[i])){o=r,a=u;break}if(o)break;!l&&m&&m[i]&&(l=m[i],c=u)}!o&&l&&(o=l,a=c),o&&(n.splice(0,a,o),t=n.join("/"))}return t}function s(t,n){return function(){return f.apply(e,x.call(arguments,0).concat([t,n]))}}function a(t){return function(e){return o(e,t)}}function l(t){return function(e){g[t]=e}}function c(t){if(r(v,t)){var n=v[t];delete v[t],b[t]=!0,d.apply(e,n)}if(!r(g,t)&&!r(b,t))throw new Error("No "+t);return g[t]}function u(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function h(t){return function(){return y&&y.config&&y.config[t]||{}}}var d,f,p,m,g={},v={},y={},b={},w=Object.prototype.hasOwnProperty,x=[].slice,k=/\.js$/;p=function(t,e){var n,i=u(t),r=i[0];return t=i[1],r&&(r=o(r,e),n=c(r)),r?t=n&&n.normalize?n.normalize(t,a(e)):o(t,e):(t=o(t,e),i=u(t),r=i[0],t=i[1],r&&(n=c(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},m={require:function(t){return s(t)},exports:function(t){var e=g[t];return void 0!==e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:h(t)}}},d=function(t,n,i,o){var a,u,h,d,f,y,w=[],x=typeof i;if(o=o||t,"undefined"===x||"function"===x){for(n=!n.length&&i.length?["require","exports","module"]:n,f=0;f<n.length;f+=1)if(d=p(n[f],o),"require"===(u=d.f))w[f]=m.require(t);else if("exports"===u)w[f]=m.exports(t),y=!0;else if("module"===u)a=w[f]=m.module(t);else if(r(g,u)||r(v,u)||r(b,u))w[f]=c(u);else{if(!d.p)throw new Error(t+" missing "+u);d.p.load(d.n,s(o,!0),l(u),{}),w[f]=g[u]}h=i?i.apply(g[t],w):void 0,t&&(a&&a.exports!==e&&a.exports!==g[t]?g[t]=a.exports:h===e&&y||(g[t]=h))}else t&&(g[t]=i)},t=n=f=function(t,n,i,r,o){if("string"==typeof t)return m[t]?m[t](n):c(p(t,n).f);if(!t.splice){if(y=t,y.deps&&f(y.deps,y.callback),!n)return;n.splice?(t=n,n=i,i=null):t=e}return n=n||function(){},"function"==typeof i&&(i=r,r=o),r?d(e,t,n,i):setTimeout(function(){d(e,t,n,i)},4),f},f.config=function(t){return f(t)},t._defined=g,i=function(t,e,n){e.splice||(n=e,e=[]),r(g,t)||r(v,t)||(v[t]=[t,e,n])},i.amd={jQuery:!0}}(),e.requirejs=t,e.require=n,e.define=i}}(),e.define("almond",function(){}),e.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(t){function e(t){var e=t.prototype,n=[];for(var i in e){"function"==typeof e[i]&&"constructor"!==i&&n.push(i)}return n}var n={};n.Extend=function(t,e){function n(){this.constructor=t}var i={}.hasOwnProperty;for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},n.Decorate=function(t,n){function i(){var e=Array.prototype.unshift,i=n.prototype.constructor.length,r=t.prototype.constructor;i>0&&(e.call(arguments,t.prototype.constructor),r=n.prototype.constructor),r.apply(this,arguments)}function r(){this.constructor=i}var o=e(n),s=e(t);n.displayName=t.displayName,i.prototype=new r;for(var a=0;a<s.length;a++){var l=s[a];i.prototype[l]=t.prototype[l]}for(var c=(function(t){var e=function(){};t in i.prototype&&(e=i.prototype[t]);var r=n.prototype[t];return function(){return Array.prototype.unshift.call(arguments,e),r.apply(this,arguments)}}),u=0;u<o.length;u++){var h=o[u];i.prototype[h]=c(h)}return i};var i=function(){this.listeners={}};return i.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},i.prototype.trigger=function(t){var e=Array.prototype.slice;this.listeners=this.listeners||{},t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(t,e){for(var n=0,i=t.length;i>n;n++)t[n].apply(this,e)},n.Observable=i,n.generateChars=function(t){for(var e="",n=0;t>n;n++){e+=Math.floor(36*Math.random()).toString(36)}return e},n.bind=function(t,e){return function(){t.apply(e,arguments)}},n._convertData=function(t){for(var e in t){var n=e.split("-"),i=t;if(1!==n.length){for(var r=0;r<n.length;r++){var o=n[r];o=o.substring(0,1).toLowerCase()+o.substring(1),o in i||(i[o]={}),r==n.length-1&&(i[o]=t[e]),i=i[o]}delete t[e]}}return t},n.hasScroll=function(e,n){var i=t(n),r=n.style.overflowX,o=n.style.overflowY;return(r!==o||"hidden"!==o&&"visible"!==o)&&("scroll"===r||"scroll"===o||(i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth))},n.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})},n.appendMany=function(e,n){if("1.7"===t.fn.jquery.substr(0,3)){var i=t();t.map(n,function(t){i=i.add(t)}),n=i}e.append(n)},n}),e.define("select2/results",["jquery","./utils"],function(t,e){function n(t,e,i){this.$element=t,this.data=i,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(e){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=t('<li role="treeitem" class="select2-results__option"></li>'),r=this.options.get("translations").get(e.message);i.append(n(r(e.args))),this.$results.append(i)},n.prototype.append=function(t){this.hideLoading();var e=[];if(null==t.results||0===t.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));t.results=this.sort(t.results);for(var n=0;n<t.results.length;n++){var i=t.results[n],r=this.option(i);e.push(r)}this.$results.append(e)},n.prototype.position=function(t,e){e.find(".select2-results").append(t)},n.prototype.sort=function(t){return this.options.get("sorter")(t)},n.prototype.setClasses=function(){var e=this;this.data.current(function(n){var i=t.map(n,function(t){return t.id.toString()}),r=e.$results.find(".select2-results__option[aria-selected]");r.each(function(){var e=t(this),n=t.data(this,"data"),r=""+n.id;null!=n.element&&n.element.selected||null==n.element&&t.inArray(r,i)>-1?e.attr("aria-selected","true"):e.attr("aria-selected","false")});var o=r.filter("[aria-selected=true]");o.length>0?o.first().trigger("mouseenter"):r.first().trigger("mouseenter")})},n.prototype.showLoading=function(t){this.hideLoading();var e=this.options.get("translations").get("searching"),n={disabled:!0,loading:!0,text:e(t)},i=this.option(n);i.className+=" loading-results",this.$results.prepend(i)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(e){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};e.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==e.id&&delete i["aria-selected"],null!=e._resultId&&(n.id=e._resultId),e.title&&(n.title=e.title),e.children&&(i.role="group",i["aria-label"]=e.text,delete i["aria-selected"]);for(var r in i){var o=i[r];n.setAttribute(r,o)}if(e.children){var s=t(n),a=document.createElement("strong");a.className="select2-results__group",t(a),this.template(e,a);for(var l=[],c=0;c<e.children.length;c++){var u=e.children[c],h=this.option(u);l.push(h)}var d=t("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});d.append(l),s.append(a),s.append(d)}else this.template(e,n);return t.data(n,"data",e),n},n.prototype.bind=function(e){var n=this,i=e.id+"-results";this.$results.attr("id",i),e.on("results:all",function(t){n.clear(),n.append(t.data),e.isOpen()&&n.setClasses()}),e.on("results:append",function(t){n.append(t.data),e.isOpen()&&n.setClasses()}),e.on("query",function(t){n.showLoading(t)}),e.on("select",function(){e.isOpen()&&n.setClasses()}),e.on("unselect",function(){e.isOpen()&&n.setClasses()}),e.on("open",function(){n.$results.attr("aria-expanded","true"),n.$results.attr("aria-hidden","false"),n.setClasses(),n.ensureHighlightVisible()}),e.on("close",function(){n.$results.attr("aria-expanded","false"),n.$results.attr("aria-hidden","true"),n.$results.removeAttr("aria-activedescendant")}),e.on("results:toggle",function(){var t=n.getHighlightedResults();0!==t.length&&t.trigger("mouseup")}),e.on("results:select",function(){var t=n.getHighlightedResults();if(0!==t.length){var e=t.data("data");"true"==t.attr("aria-selected")?n.trigger("close"):n.trigger("select",{data:e})}}),e.on("results:previous",function(){var t=n.getHighlightedResults(),e=n.$results.find("[aria-selected]"),i=e.index(t);if(0!==i){var r=i-1;0===t.length&&(r=0);var o=e.eq(r);o.trigger("mouseenter");var s=n.$results.offset().top,a=o.offset().top,l=n.$results.scrollTop()+(a-s);0===r?n.$results.scrollTop(0):0>a-s&&n.$results.scrollTop(l)}}),e.on("results:next",function(){var t=n.getHighlightedResults(),e=n.$results.find("[aria-selected]"),i=e.index(t),r=i+1;if(!(r>=e.length)){var o=e.eq(r);o.trigger("mouseenter");var s=n.$results.offset().top+n.$results.outerHeight(!1),a=o.offset().top+o.outerHeight(!1),l=n.$results.scrollTop()+a-s;0===r?n.$results.scrollTop(0):a>s&&n.$results.scrollTop(l)}}),e.on("results:focus",function(t){t.element.addClass("select2-results__option--highlighted")}),e.on("results:message",function(t){n.displayMessage(t)}),t.fn.mousewheel&&this.$results.on("mousewheel",function(t){var e=n.$results.scrollTop(),i=n.$results.get(0).scrollHeight-n.$results.scrollTop()+t.deltaY,r=t.deltaY>0&&e-t.deltaY<=0,o=t.deltaY<0&&i<=n.$results.height();r?(n.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):o&&(n.$results.scrollTop(n.$results.get(0).scrollHeight-n.$results.height()),t.preventDefault(),t.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var i=t(this),r=i.data("data");return"true"===i.attr("aria-selected")?void(n.options.get("multiple")?n.trigger("unselect",{originalEvent:e,data:r}):n.trigger("close")):void n.trigger("select",{originalEvent:e,data:r})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var e=t(this).data("data");n.getHighlightedResults().removeClass("select2-results__option--highlighted"),n.trigger("results:focus",{data:e,element:t(this)})})},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]"),n=e.index(t),i=this.$results.offset().top,r=t.offset().top,o=this.$results.scrollTop()+(r-i),s=r-i;o-=2*t.outerHeight(!1),2>=n?this.$results.scrollTop(0):(s>this.$results.outerHeight()||0>s)&&this.$results.scrollTop(o)}},n.prototype.template=function(e,n){var i=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),o=i(e);null==o?n.style.display="none":"string"==typeof o?n.innerHTML=r(o):t(n).append(o)},n}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e,e},i.prototype.bind=function(t){var e=this,i=(t.id,t.id+"-results");this.container=t,this.$selection.on("focus",function(t){e.trigger("focus",t)}),this.$selection.on("blur",function(t){e.trigger("blur",t)}),this.$selection.on("keydown",function(t){e.trigger("keypress",t),t.which===n.SPACE&&t.preventDefault()}),t.on("results:focus",function(t){e.$selection.attr("aria-activedescendant",t.data._resultId)}),t.on("selection:update",function(t){e.update(t.data)}),t.on("open",function(){e.$selection.attr("aria-expanded","true"),e.$selection.attr("aria-owns",i),e._attachCloseHandler(t)}),t.on("close",function(){e.$selection.attr("aria-expanded","false"),e.$selection.removeAttr("aria-activedescendant"),e.$selection.removeAttr("aria-owns"),e.$selection.focus(),e._detachCloseHandler(t)}),t.on("enable",function(){e.$selection.attr("tabindex",e._tabindex)}),t.on("disable",function(){e.$selection.attr("tabindex","-1")})},i.prototype._attachCloseHandler=function(e){t(document.body).on("mousedown.select2."+e.id,function(e){var n=t(e.target),i=n.closest(".select2");t(".select2.select2-container--open").each(function(){var e=t(this);this!=i[0]&&e.data("element").select2("close")})})},i.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(t,e){e.find(".selection").append(t)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.")},i}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(t,e,n){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,e),i.prototype.render=function(){var t=i.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},i.prototype.bind=function(t){var e=this;i.__super__.bind.apply(this,arguments);var n=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n),this.$selection.attr("aria-labelledby",n),this.$selection.on("mousedown",function(t){1===t.which&&e.trigger("toggle",{originalEvent:t})}),this.$selection.on("focus",function(){}),this.$selection.on("blur",function(){}),t.on("selection:update",function(t){e.update(t.data)})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(t){var e=this.options.get("templateSelection");return this.options.get("escapeMarkup")(e(t))},i.prototype.selectionContainer=function(){return t("<span></span>")},i.prototype.update=function(t){if(0===t.length)return void this.clear();var e=t[0],n=this.display(e),i=this.$selection.find(".select2-selection__rendered");i.empty().append(n),i.prop("title",e.title||e.text)},i}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(t,e,n){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,e),i.prototype.render=function(){var t=i.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},i.prototype.bind=function(){var e=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",function(t){e.trigger("toggle",{originalEvent:t})}),this.$selection.on("click",".select2-selection__choice__remove",function(n){var i=t(this),r=i.parent(),o=r.data("data");e.trigger("unselect",{originalEvent:n,data:o})})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(t){var e=this.options.get("templateSelection");return this.options.get("escapeMarkup")(e(t))},i.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},i.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],i=0;i<t.length;i++){var r=t[i],o=this.display(r),s=this.selectionContainer();s.append(o),s.prop("title",r.title||r.text),s.data("data",r),e.push(s)}var a=this.$selection.find(".select2-selection__rendered");n.appendMany(a,e)}},i}),e.define("select2/selection/placeholder",["../utils"],function(){function t(t,e,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n)}return t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.createPlaceholder=function(t,e){var n=this.selectionContainer();return n.html(this.display(e)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(t,e){var n=1==e.length&&e[0].id!=this.placeholder.id;if(e.length>1||n)return t.call(this,e);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t}),e.define("select2/selection/allowClear",["jquery","../keys"],function(t,e){function n(){}return n.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(t){i._handleClear(t)}),e.on("keypress",function(t){i._handleKeyboardClear(t,e)})},n.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){e.stopPropagation();for(var i=n.data("data"),r=0;r<i.length;r++){var o={data:i[r]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle")}}},n.prototype._handleKeyboardClear=function(t,n,i){i.isOpen()||(n.which==e.DELETE||n.which==e.BACKSPACE)&&this._handleClear(n)},n.prototype.update=function(e,n){if(e.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=t('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(t,e,n){function i(t,e,n){t.call(this,e,n)}return i.prototype.render=function(e){var n=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></li>');return this.$searchContainer=n,this.$search=n.find("input"),e.call(this)},i.prototype.bind=function(t,e,i){var r=this;t.call(this,e,i),e.on("open",function(){r.$search.attr("tabindex",0),r.$search.focus()}),e.on("close",function(){r.$search.attr("tabindex",-1),r.$search.val(""),r.$search.focus()}),e.on("enable",function(){r.$search.prop("disabled",!1)}),e.on("disable",function(){r.$search.prop("disabled",!0)}),this.$selection.on("focusin",".select2-search--inline",function(t){r.trigger("focus",t)}),this.$selection.on("focusout",".select2-search--inline",function(t){r.trigger("blur",t)}),this.$selection.on("keydown",".select2-search--inline",function(t){if(t.stopPropagation(),r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented(),t.which===n.BACKSPACE&&""===r.$search.val()){var e=r.$searchContainer.prev(".select2-selection__choice");if(e.length>0){var i=e.data("data");r.searchRemoveChoice(i),t.preventDefault()}}}),this.$selection.on("input",".select2-search--inline",function(){r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input",".select2-search--inline",function(t){r.handleSearch(t)})},i.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},i.prototype.update=function(t,e){this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch()},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.trigger("open"),this.$search.val(e.text+" ")},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";if(""!==this.$search.attr("placeholder"))t=this.$selection.find(".select2-selection__rendered").innerWidth();else{t=.75*(this.$search.val().length+1)+"em"}this.$search.css("width",t)},i}),e.define("select2/selection/eventRelay",["jquery"],function(t){function e(){}return e.prototype.bind=function(e,n,i){var r=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],s=["opening","closing","selecting","unselecting"];e.call(this,n,i),n.on("*",function(e,n){if(-1!==t.inArray(e,o)){n=n||{};var i=t.Event("select2:"+e,{params:n});r.$element.trigger(i),-1!==t.inArray(e,s)&&(n.prevented=i.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,e){function n(t){this.dict=t||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(t){return this.dict[t]},n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},n._cache={},n.loadPath=function(t){if(!(t in n._cache)){var i=e(t);n._cache[t]=i}return new n(n._cache[t])},n}),e.define("select2/diacritics",[],function(){return{"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV",
"\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"}}),e.define("select2/data/base",["../utils"],function(t){function e(){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,n){var i=e.id+"-result-";return i+=t.generateChars(4),i+=null!=n.id?"-"+n.id.toString():"-"+t.generateChars(4)},e}),e.define("select2/data/select",["./base","../utils","jquery"],function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,t),i.prototype.current=function(t){var e=[],i=this;this.$element.find(":selected").each(function(){var t=n(this),r=i.item(t);e.push(r)}),t(e)},i.prototype.select=function(t){var e=this;if(t.selected=!0,n(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(i){var r=[];t=[t],t.push.apply(t,i);for(var o=0;o<t.length;o++){var s=t[o].id;-1===n.inArray(s,r)&&r.push(s)}e.$element.val(r),e.$element.trigger("change")});else{var i=t.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple"))return t.selected=!1,n(t.element).is("option")?(t.element.selected=!1,void this.$element.trigger("change")):void this.current(function(i){for(var r=[],o=0;o<i.length;o++){var s=i[o].id;s!==t.id&&-1===n.inArray(s,r)&&r.push(s)}e.$element.val(r),e.$element.trigger("change")})},i.prototype.bind=function(t){var e=this;this.container=t,t.on("select",function(t){e.select(t.data)}),t.on("unselect",function(t){e.unselect(t.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},i.prototype.query=function(t,e){var i=[],r=this;this.$element.children().each(function(){var e=n(this);if(e.is("option")||e.is("optgroup")){var o=r.item(e),s=r.matches(t,o);null!==s&&i.push(s)}}),e({results:i})},i.prototype.addOptions=function(t){e.appendMany(this.$element,t)},i.prototype.option=function(t){var e;t.children?(e=document.createElement("optgroup"),e.label=t.text):(e=document.createElement("option"),void 0!==e.textContent?e.textContent=t.text:e.innerText=t.text),t.id&&(e.value=t.id),t.disabled&&(e.disabled=!0),t.selected&&(e.selected=!0),t.title&&(e.title=t.title);var i=n(e),r=this._normalizeItem(t);return r.element=e,n.data(e,"data",r),i},i.prototype.item=function(t){var e={};if(null!=(e=n.data(t[0],"data")))return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};for(var i=t.children("option"),r=[],o=0;o<i.length;o++){var s=n(i[o]),a=this.item(s);r.push(a)}e.children=r}return e=this._normalizeItem(e),e.element=t[0],n.data(t[0],"data",e),e},i.prototype._normalizeItem=function(t){n.isPlainObject(t)||(t={id:t,text:t}),t=n.extend({},{text:""},t);var e={selected:!1,disabled:!1};return null!=t.id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),n.extend({},e,t)},i.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},i}),e.define("select2/data/array",["./select","../utils","jquery"],function(t,e,n){function i(t,e){var n=e.get("data")||[];i.__super__.constructor.call(this,t,e),this.addOptions(this.convertToOptions(n))}return e.Extend(i,t),i.prototype.select=function(t){var e=this.$element.find("option").filter(function(e,n){return n.value==t.id.toString()});0===e.length&&(e=this.option(t),this.addOptions(e)),i.__super__.select.call(this,t)},i.prototype.convertToOptions=function(t){function i(t){return function(){return n(this).val()==t.id}}for(var r=this,o=this.$element.find("option"),s=o.map(function(){return r.item(n(this)).id}).get(),a=[],l=0;l<t.length;l++){var c=this._normalizeItem(t[l]);if(n.inArray(c.id,s)>=0){var u=o.filter(i(c)),h=this.item(u),d=(n.extend(!0,{},h,c),this.option(h));u.replaceWith(d)}else{var f=this.option(c);if(c.children){var p=this.convertToOptions(c.children);e.appendMany(f,p)}a.push(f)}}return a},i}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(t,e,n){function i(e,n){this.ajaxOptions=this._applyDefaults(n.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),t.__super__.constructor.call(this,e,n)}return e.Extend(i,t),i.prototype._applyDefaults=function(t){var e={data:function(t){return{q:t.term}},transport:function(t,e,i){var r=n.ajax(t);return r.then(e),r.fail(i),r}};return n.extend({},e,t,!0)},i.prototype.processResults=function(t){return t},i.prototype.query=function(t,e){function i(){var i=o.transport(o,function(i){var o=r.processResults(i,t);r.options.get("debug")&&window.console&&console.error&&(o&&o.results&&n.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(o)},function(){});r._request=i}var r=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=n.extend({type:"GET"},this.ajaxOptions);"function"==typeof o.url&&(o.url=o.url(t)),"function"==typeof o.data&&(o.data=o.data(t)),this.ajaxOptions.delay&&""!==t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)):i()},i}),e.define("select2/data/tags",["jquery"],function(t){function e(e,n,i){var r=i.get("tags"),o=i.get("createTag");if(void 0!==o&&(this.createTag=o),e.call(this,n,i),t.isArray(r))for(var s=0;s<r.length;s++){var a=r[s],l=this._normalizeItem(a),c=this.option(l);this.$element.append(c)}}return e.prototype.query=function(t,e,n){function i(t,o){for(var s=t.results,a=0;a<s.length;a++){var l=s[a],c=null!=l.children&&!i({results:l.children},!0);if(l.text===e.term||c)return!o&&(t.data=s,void n(t))}if(o)return!0;var u=r.createTag(e);if(null!=u){var h=r.option(u);h.attr("data-select2-tag",!0),r.addOptions([h]),r.insertTag(s,u)}t.results=s,n(t)}var r=this;return this._removeOldTags(),null==e.term||null!=e.page?void t.call(this,e,n):void t.call(this,e,i)},e.prototype.createTag=function(e,n){var i=t.trim(n.term);return""===i?null:{id:i,text:i}},e.prototype.insertTag=function(t,e,n){e.unshift(n)},e.prototype._removeOldTags=function(){(this._lastTag,this.$element.find("option[data-select2-tag]")).each(function(){this.selected||t(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(t){function e(t,e,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),t.call(this,e,n)}return e.prototype.bind=function(t,e,n){t.call(this,e,n),this.$search=e.dropdown.$search||e.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(t,e,n){function i(t){r.select(t)}var r=this;e.term=e.term||"";var o=this.tokenizer(e,this.options,i);o.term!==e.term&&(this.$search.length&&(this.$search.val(o.term),this.$search.focus()),e.term=o.term),t.call(this,e,n)},e.prototype.tokenizer=function(e,n,i,r){for(var o=i.get("tokenSeparators")||[],s=n.term,a=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};a<s.length;){var c=s[a];if(-1!==t.inArray(c,o)){var u=s.substr(0,a);r(l(t.extend({},n,{term:u}))),s=s.substr(a+1)||"",a=0}else a++}return{term:s}},e}),e.define("select2/data/minimumInputLength",[],function(){function t(t,e,n){this.minimumInputLength=n.get("minimumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){return e.term=e.term||"",e.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):void t.call(this,e,n)},t}),e.define("select2/data/maximumInputLength",[],function(){function t(t,e,n){this.maximumInputLength=n.get("maximumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){return e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):void t.call(this,e,n)},t}),e.define("select2/data/maximumSelectionLength",[],function(){function t(t,e,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){var i=this;this.current(function(r){var o=null!=r?r.length:0;return i.maximumSelectionLength>0&&o>=i.maximumSelectionLength?void i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):void t.call(i,e,n)})},t}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},n.prototype.position=function(){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),e.define("select2/dropdown/search",["jquery","../utils"],function(t){function e(){}return e.prototype.render=function(e){var n=e.call(this),i=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},e.prototype.bind=function(e,n,i){var r=this;e.call(this,n,i),this.$search.on("keydown",function(t){r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented()}),this.$search.on("input",function(){t(this).off("keyup")}),this.$search.on("keyup input",function(t){r.handleSearch(t)}),n.on("open",function(){r.$search.attr("tabindex",0),r.$search.focus(),window.setTimeout(function(){r.$search.focus()},0)}),n.on("close",function(){r.$search.attr("tabindex",-1),r.$search.val("")}),n.on("results:all",function(t){if(null==t.query.term||""===t.query.term){r.showSearch(t)?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide")}})},e.prototype.handleSearch=function(){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},e.prototype.showSearch=function(){return!0},e}),e.define("select2/dropdown/hidePlaceholder",[],function(){function t(t,e,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n,i)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var n=e.slice(0),i=e.length-1;i>=0;i--){var r=e[i];this.placeholder.id===r.id&&n.splice(i,1)}return n},t}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(t){function e(t,e,n,i){this.lastParams={},t.call(this,e,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,n,i){var r=this;e.call(this,n,i),n.on("query",function(t){r.lastParams=t,r.loading=!0}),n.on("query:append",function(t){r.lastParams=t,r.loading=!0}),this.$results.on("scroll",function(){var e=t.contains(document.documentElement,r.$loadingMore[0]);if(!r.loading&&e){r.$results.offset().top+r.$results.outerHeight(!1)+50>=r.$loadingMore.offset().top+r.$loadingMore.outerHeight(!1)&&r.loadMore()}})},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="option load-more" role="treeitem"></li>'),n=this.options.get("translations").get("loadingMore");return e.html(n(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(t,e){function n(t,e,n){this.$dropdownParent=n.get("dropdownParent")||document.body,t.call(this,e,n)}return n.prototype.bind=function(t,e,n){var i=this,r=!1;t.call(this,e,n),e.on("open",function(){i._showDropdown(),i._attachPositioningHandler(e),r||(r=!0,e.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),e.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),e.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(e)}),this.$dropdownContainer.on("mousedown",function(t){t.stopPropagation()})},n.prototype.position=function(t,e,n){e.attr("class",n.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(e){var n=t("<span></span>"),i=e.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n){var i=this,r="scroll.select2."+n.id,o="resize.select2."+n.id,s="orientationchange.select2."+n.id,a=this.$container.parents().filter(e.hasScroll);a.each(function(){t(this).data("select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})}),a.on(r,function(){var e=t(this).data("select2-scroll-position");t(this).scrollTop(e.y)}),t(window).on(r+" "+o+" "+s,function(){i._positionDropdown(),i._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n){var i="scroll.select2."+n.id,r="resize.select2."+n.id,o="orientationchange.select2."+n.id;this.$container.parents().filter(e.hasScroll).off(i),t(window).off(i+" "+r+" "+o)},n.prototype._positionDropdown=function(){var e=t(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),r=null,o=(this.$container.position(),this.$container.offset());o.bottom=o.top+this.$container.outerHeight(!1);var s={height:this.$container.outerHeight(!1)};s.top=o.top,s.bottom=o.top+s.height;var a={height:this.$dropdown.outerHeight(!1)},l={top:e.scrollTop(),bottom:e.scrollTop()+e.height()},c=l.top<o.top-a.height,u=l.bottom>o.bottom+a.height,h={left:o.left,top:s.bottom};n||i||(r="below"),u||!c||n?!c&&u&&n&&(r="below"):r="above",("above"==r||n&&"below"!==r)&&(h.top=s.top-a.height),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(h)},n.prototype._resizeDropdown=function(){this.$dropdownContainer.width();var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.width="auto"),this.$dropdown.css(t)},n.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function t(e){for(var n=0,i=0;i<e.length;i++){var r=e[i];r.children?n+=t(r.children):n++}return n}function e(t,e,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,n,i)}return e.prototype.showSearch=function(e,n){return!(t(n.data.results)<this.minimumResultsForSearch)&&e.call(this,n)},e}),e.define("select2/dropdown/selectOnClose",[],function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("close",function(){i._handleSelectOnClose()})},t.prototype._handleSelectOnClose=function(){var t=this.getHighlightedResults();t.length<1||this.trigger("select",{data:t.data("data")})},t}),e.define("select2/dropdown/closeOnSelect",[],function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("select",function(t){i._selectTriggered(t)}),e.on("unselect",function(t){i._selectTriggered(t)})},t.prototype._selectTriggered=function(t,e){var n=e.originalEvent;n&&n.ctrlKey||this.trigger("close")},t}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,n="Please delete "+e+" character";return 1!=e&&(n+="s"),n},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results\u2026"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching\u2026"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(t,e,n,i,r,o,s,a,l,c,u,h,d,f,p,m,g,v,y,b,w,x,k,_,C,S,D,M,T){function L(){this.reset()}return L.prototype.apply=function(h){if(h=t.extend({},this.defaults,h),null==h.dataAdapter){if(h.dataAdapter=null!=h.ajax?p:null!=h.data?f:d,h.minimumInputLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,v)),h.maximumInputLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,y)),h.maximumSelectionLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,b)),h.tags&&(h.dataAdapter=c.Decorate(h.dataAdapter,m)),(null!=h.tokenSeparators||null!=h.tokenizer)&&(h.dataAdapter=c.Decorate(h.dataAdapter,g)),null!=h.query){var T=e(h.amdBase+"compat/query");h.dataAdapter=c.Decorate(h.dataAdapter,T)}if(null!=h.initSelection){var L=e(h.amdBase+"compat/initSelection");h.dataAdapter=c.Decorate(h.dataAdapter,L)}}if(null==h.resultsAdapter&&(h.resultsAdapter=n,null!=h.ajax&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,_)),null!=h.placeholder&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,k)),h.selectOnClose&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,D))),null==h.dropdownAdapter){if(h.multiple)h.dropdownAdapter=w;else{var E=c.Decorate(w,x);h.dropdownAdapter=E}if(0!==h.minimumResultsForSearch&&(h.dropdownAdapter=c.Decorate(h.dropdownAdapter,S)),h.closeOnSelect&&(h.dropdownAdapter=c.Decorate(h.dropdownAdapter,M)),null!=h.dropdownCssClass||null!=h.dropdownCss||null!=h.adaptDropdownCssClass){var A=e(h.amdBase+"compat/dropdownCss");h.dropdownAdapter=c.Decorate(h.dropdownAdapter,A)}h.dropdownAdapter=c.Decorate(h.dropdownAdapter,C)}if(null==h.selectionAdapter){if(h.selectionAdapter=h.multiple?r:i,null!=h.placeholder&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,o)),h.allowClear&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,s)),h.multiple&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,a)),null!=h.containerCssClass||null!=h.containerCss||null!=h.adaptContainerCssClass){var $=e(h.amdBase+"compat/containerCss");h.selectionAdapter=c.Decorate(h.selectionAdapter,$)}h.selectionAdapter=c.Decorate(h.selectionAdapter,l)}if("string"==typeof h.language)if(h.language.indexOf("-")>0){var I=h.language.split("-"),N=I[0];h.language=[h.language,N]}else h.language=[h.language];if(t.isArray(h.language)){var O=new u;h.language.push("en");for(var P=h.language,F=0;F<P.length;F++){var H=P[F],z={};try{z=u.loadPath(H)}catch(t){try{H=this.defaults.amdLanguageBase+H,z=u.loadPath(H)}catch(t){h.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+H+'" could not be automatically loaded. A fallback will be used instead.');continue}}O.extend(z)}h.translations=O}else{var R=u.loadPath(this.defaults.amdLanguageBase+"en"),j=new u(h.language);j.extend(R),h.translations=j}return h},L.prototype.reset=function(){function e(t){function e(t){return h[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function n(i,r){if(""===t.trim(i.term))return r;if(r.children&&r.children.length>0){for(var o=t.extend(!0,{},r),s=r.children.length-1;s>=0;s--){null==n(i,r.children[s])&&o.children.splice(s,1)}return o.children.length>0?o:n(i,o)}var a=e(r.text).toUpperCase(),l=e(i.term).toUpperCase();return a.indexOf(l)>-1?r:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:T,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},L.prototype.set=function(e,n){var i=t.camelCase(e),r={};r[i]=n;var o=c._convertData(r);t.extend(this.defaults,o)},new L}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(t,e,n,i){function r(e,r){if(this.options=e,null!=r&&this.fromElement(r),this.options=n.apply(this.options),r&&r.is("input")){var o=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,o)}}return r.prototype.fromElement=function(t){var n=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.language&&(t.prop("lang")?this.options.language=t.prop("lang").toLowerCase():t.closest("[lang]").prop("lang")&&(this.options.language=t.closest("[lang]").prop("lang"))),null==this.options.dir&&(this.options.dir=t.prop("dir")?t.prop("dir"):t.closest("[dir]").prop("dir")?t.closest("[dir]").prop("dir"):"ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),
t.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),t.data("data",t.data("select2Tags")),t.data("tags",!0)),t.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",t.data("ajaxUrl")),t.data("ajax--url",t.data("ajaxUrl")));var r={};r=e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset?e.extend(!0,{},t[0].dataset,t.data()):t.data();var o=e.extend(!0,{},r);o=i._convertData(o);for(var s in o)e.inArray(s,n)>-1||(e.isPlainObject(this.options[s])?e.extend(this.options[s],o[s]):this.options[s]=o[s]);return this},r.prototype.get=function(t){return this.options[t]},r.prototype.set=function(t,e){this.options[t]=e},r}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(t,e,n,i){var r=function(t,n){null!=t.data("select2")&&t.data("select2").destroy(),this.$element=t,this.id=this._generateId(t),n=n||{},this.options=new e(n,t),r.__super__.constructor.call(this);var i=t.attr("tabindex")||0;t.data("old-tabindex",i),t.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(t,this.options);var s=this.render();this._placeContainer(s);var a=this.options.get("selectionAdapter");this.selection=new a(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var l=this.options.get("dropdownAdapter");this.dropdown=new l(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var c=this.options.get("resultsAdapter");this.results=new c(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(t){u.trigger("selection:update",{data:t})}),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),t.data("select2",this)};return n.Extend(r,n.Observable),r.prototype._generateId=function(t){var e="";return e=null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+n.generateChars(2):n.generateChars(4),e="select2-"+e},r.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},r.prototype._resolveWidth=function(t,e){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var i=this._resolveWidth(t,"style");return null!=i?i:this._resolveWidth(t,"element")}if("element"==e){var r=t.outerWidth(!1);return 0>=r?"auto":r+"px"}if("style"==e){var o=t.attr("style");if("string"!=typeof o)return null;for(var s=o.split(";"),a=0,l=s.length;l>a;a+=1){var c=s[a].replace(/\s/g,""),u=c.match(n);if(null!==u&&u.length>=1)return u[1]}return null}return e},r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},r.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",function(){e.dataAdapter.current(function(t){e.trigger("selection:update",{data:t})})}),this._sync=n.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i(function(n){t.each(n,e._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",e._sync,!1)},r.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",function(e,n){t.trigger(e,n)})},r.prototype._registerSelectionEvents=function(){var e=this,n=["toggle"];this.selection.on("toggle",function(){e.toggleDropdown()}),this.selection.on("*",function(i,r){-1===t.inArray(i,n)&&e.trigger(i,r)})},r.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",function(e,n){t.trigger(e,n)})},r.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",function(e,n){t.trigger(e,n)})},r.prototype._registerEvents=function(){var t=this;this.on("open",function(){t.$container.addClass("select2-container--open")}),this.on("close",function(){t.$container.removeClass("select2-container--open")}),this.on("enable",function(){t.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){t.$container.addClass("select2-container--disabled")}),this.on("focus",function(){t.$container.addClass("select2-container--focus")}),this.on("blur",function(){t.$container.removeClass("select2-container--focus")}),this.on("query",function(e){t.isOpen()||t.trigger("open"),this.dataAdapter.query(e,function(n){t.trigger("results:all",{data:n,query:e})})}),this.on("query:append",function(e){this.dataAdapter.query(e,function(n){t.trigger("results:append",{data:n,query:e})})}),this.on("keypress",function(e){var n=e.which;t.isOpen()?n===i.ENTER?(t.trigger("results:select"),e.preventDefault()):n===i.SPACE&&e.ctrlKey?(t.trigger("results:toggle"),e.preventDefault()):n===i.UP?(t.trigger("results:previous"),e.preventDefault()):n===i.DOWN?(t.trigger("results:next"),e.preventDefault()):(n===i.ESC||n===i.TAB)&&(t.close(),e.preventDefault()):(n===i.ENTER||n===i.SPACE||(n===i.DOWN||n===i.UP)&&e.altKey)&&(t.open(),e.preventDefault())})},r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable")):this.trigger("enable")},r.prototype.trigger=function(t,e){var n=r.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(t in i){var o=i[t],s={prevented:!1,name:t,args:e};if(n.call(this,o,s),s.prevented)return void(e.prevented=!0)}n.call(this,t,e)},r.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},r.prototype.open=function(){this.isOpen()||(this.trigger("query",{}),this.trigger("open"))},r.prototype.close=function(){this.isOpen()&&this.trigger("close")},r.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},r.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==t||0===t.length)&&(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},r.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},r.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var n=e[0];t.isArray(n)&&(n=t.map(n,function(t){return t.toString()})),this.$element.val(n).trigger("change")},r.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},r.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},r}),e.define("select2/compat/utils",["jquery"],function(t){function e(e,n,i){var r,o,s=[];r=t.trim(e.attr("class")),r&&(r=""+r,t(r.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&s.push(this)})),r=t.trim(n.attr("class")),r&&(r=""+r,t(r.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&null!=(o=i(this))&&s.push(o)})),e.attr("class",s.join(" "))}return{syncCssClasses:e}}),e.define("select2/compat/containerCss",["jquery","./utils"],function(t,e){function n(){return null}function i(){}return i.prototype.render=function(i){var r=i.call(this),o=this.options.get("containerCssClass")||"";t.isFunction(o)&&(o=o(this.$element));var s=this.options.get("adaptContainerCssClass");if(s=s||n,-1!==o.indexOf(":all:")){o=o.replace(":all","");var a=s;s=function(t){var e=a(t);return null!=e?e+" "+t:t}}var l=this.options.get("containerCss")||{};return t.isFunction(l)&&(l=l(this.$element)),e.syncCssClasses(r,this.$element,s),r.css(l),r.addClass(o),r},i}),e.define("select2/compat/dropdownCss",["jquery","./utils"],function(t,e){function n(){return null}function i(){}return i.prototype.render=function(i){var r=i.call(this),o=this.options.get("dropdownCssClass")||"";t.isFunction(o)&&(o=o(this.$element));var s=this.options.get("adaptDropdownCssClass");if(s=s||n,-1!==o.indexOf(":all:")){o=o.replace(":all","");var a=s;s=function(t){var e=a(t);return null!=e?e+" "+t:t}}var l=this.options.get("dropdownCss")||{};return t.isFunction(l)&&(l=l(this.$element)),e.syncCssClasses(r,this.$element,s),r.css(l),r.addClass(o),r},i}),e.define("select2/compat/initSelection",["jquery"],function(t){function e(t,e,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=n.get("initSelection"),this._isInitialized=!1,t.call(this,e,n)}return e.prototype.current=function(e,n){var i=this;return this._isInitialized?void e.call(this,n):void this.initSelection.call(null,this.$element,function(e){i._isInitialized=!0,t.isArray(e)||(e=[e]),n(e)})},e}),e.define("select2/compat/inputData",["jquery"],function(t){function e(t,e,n){this._currentData=[],this._valueSeparator=n.get("valueSeparator")||",","hidden"===e.prop("type")&&n.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),t.call(this,e,n)}return e.prototype.current=function(e,n){function i(e,n){var r=[];return e.selected||-1!==t.inArray(e.id,n)?(e.selected=!0,r.push(e)):e.selected=!1,e.children&&r.push.apply(r,i(e.children,n)),r}for(var r=[],o=0;o<this._currentData.length;o++){var s=this._currentData[o];r.push.apply(r,i(s,this.$element.val().split(this._valueSeparator)))}n(r)},e.prototype.select=function(e,n){if(this.options.get("multiple")){var i=this.$element.val();i+=this._valueSeparator+n.id,this.$element.val(i),this.$element.trigger("change")}else this.current(function(e){t.map(e,function(t){t.selected=!1})}),this.$element.val(n.id),this.$element.trigger("change")},e.prototype.unselect=function(t,e){var n=this;e.selected=!1,this.current(function(t){for(var i=[],r=0;r<t.length;r++){var o=t[r];e.id!=o.id&&i.push(o.id)}n.$element.val(i.join(n._valueSeparator)),n.$element.trigger("change")})},e.prototype.query=function(t,e,n){for(var i=[],r=0;r<this._currentData.length;r++){var o=this._currentData[r],s=this.matches(e,o);null!==s&&i.push(s)}n({results:i})},e.prototype.addOptions=function(e,n){var i=t.map(n,function(e){return t.data(e[0],"data")});this._currentData.push.apply(this._currentData,i)},e}),e.define("select2/compat/matcher",["jquery"],function(t){function e(e){function n(n,i){var r=t.extend(!0,{},i);if(null==n.term||""===t.trim(n.term))return r;if(i.children){for(var o=i.children.length-1;o>=0;o--){var s=i.children[o];e(n.term,s.text,s)||r.children.splice(o,1)}if(r.children.length>0)return r}return e(n.term,i.text,i)?r:null}return n}return e}),e.define("select2/compat/query",[],function(){function t(t,e,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.callback=n,this.options.get("query").call(null,e)},t}),e.define("select2/dropdown/attachContainer",[],function(){function t(t,e,n){t.call(this,e,n)}return t.prototype.position=function(t,e,n){n.find(".dropdown-wrapper").append(e),e.addClass("select2-dropdown--below"),n.addClass("select2-container--below")},t}),e.define("select2/dropdown/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,n){t.call(this,e,n);var i=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(i.join(" "),function(t){t.stopPropagation()})},t}),e.define("select2/selection/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,n){t.call(this,e,n);var i=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(i.join(" "),function(t){t.stopPropagation()})},t}),e.define("jquery.select2",["jquery","require","./select2/core","./select2/defaults"],function(t,e,n,i){if(e("jquery.mousewheel"),null==t.fn.select2){var r=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each(function(){var i=t.extend({},e,!0);new n(t(this),i)}),this;if("string"==typeof e){var i=this.data("select2");null==i&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2.");var o=Array.prototype.slice.call(arguments,1),s=i[e](o);return t.inArray(e,r)>-1?this:s}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=i),n}),function(n){"function"==typeof e.define&&e.define.amd?e.define("jquery.mousewheel",["jquery"],n):"object"==typeof exports?module.exports=n:n(t)}(function(t){function e(e){var s=e||window.event,a=l.call(arguments,1),c=0,h=0,d=0,f=0,p=0,m=0;if(e=t.event.fix(s),e.type="mousewheel","detail"in s&&(d=-1*s.detail),"wheelDelta"in s&&(d=s.wheelDelta),"wheelDeltaY"in s&&(d=s.wheelDeltaY),"wheelDeltaX"in s&&(h=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(h=-1*d,d=0),c=0===d?h:d,"deltaY"in s&&(d=-1*s.deltaY,c=d),"deltaX"in s&&(h=s.deltaX,0===d&&(c=-1*h)),0!==d||0!==h){if(1===s.deltaMode){var g=t.data(this,"mousewheel-line-height");c*=g,d*=g,h*=g}else if(2===s.deltaMode){var v=t.data(this,"mousewheel-page-height");c*=v,d*=v,h*=v}if(f=Math.max(Math.abs(d),Math.abs(h)),(!o||o>f)&&(o=f,i(s,f)&&(o/=40)),i(s,f)&&(c/=40,h/=40,d/=40),c=Math[c>=1?"floor":"ceil"](c/o),h=Math[h>=1?"floor":"ceil"](h/o),d=Math[d>=1?"floor":"ceil"](d/o),u.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();p=e.clientX-y.left,m=e.clientY-y.top}return e.deltaX=h,e.deltaY=d,e.deltaFactor=o,e.offsetX=p,e.offsetY=m,e.deltaMode=0,a.unshift(e,c,h,d),r&&clearTimeout(r),r=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function n(){o=null}function i(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var r,o,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=s.length;c;)t.event.fixHooks[s[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=a.length;n;)this.removeEventListener(a[--n],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),{define:e.define,require:e.require}}(),n=e.require("jquery.select2");return t.fn.select2.amd=e,n}),function(t){"use strict";function e(t,e){return t+".touchspin_"+e}function n(n,i){return t.map(n,function(t){return e(t,i)})}var i=0;t.fn.TouchSpin=function(e){if("destroy"===e)return void this.each(function(){var e=t(this),i=e.data();t(document).off(n(["mouseup","touchend","touchcancel","mousemove","touchmove","scroll","scrollstart"],i.spinnerid).join(" "))});var r={min:0,max:100,initval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalupclass:"glyphicon glyphicon-chevron-up",verticaldownclass:"glyphicon glyphicon-chevron-down",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default",buttondown_txt:"-",buttonup_txt:"+"},o={min:"min",max:"max",initval:"init-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){function s(){if(!O.data("alreadyinitialized")){if(O.data("alreadyinitialized",!0),i+=1,O.data("spinnerid",i),!O.is("input"))return void console.log("Must be an input.");c(),a(),w(),d(),m(),g(),v(),y(),L.input.css("display","block")}}function a(){""!==M.initval&&""===O.val()&&O.val(M.initval)}function l(t){h(t),w();var e=L.input.val();""!==e&&(e=Number(L.input.val()),L.input.val(e.toFixed(M.decimals)))}function c(){M=t.extend({},r,P,u(),e)}function u(){var e={};return t.each(o,function(t,n){var i="bts-"+n;O.is("[data-"+i+"]")&&(e[t]=O.data(i))}),e}function h(e){M=t.extend({},M,e)}function d(){var t=O.val(),e=O.parent();""!==t&&(t=Number(t).toFixed(M.decimals)),O.data("initvalue",t).val(t),O.addClass("form-control"),e.hasClass("input-group")?f(e):p()}function f(e){e.addClass("bootstrap-touchspin");var n,i,r=O.prev(),o=O.next(),s='<span class="input-group-addon bootstrap-touchspin-prefix">'+M.prefix+"</span>",a='<span class="input-group-addon bootstrap-touchspin-postfix">'+M.postfix+"</span>";r.hasClass("input-group-btn")?(n='<button class="'+M.buttondown_class+' bootstrap-touchspin-down" type="button">'+M.buttondown_txt+"</button>",r.append(n)):(n='<span class="input-group-btn"><button class="'+M.buttondown_class+' bootstrap-touchspin-down" type="button">'+M.buttondown_txt+"</button></span>",t(n).insertBefore(O)),o.hasClass("input-group-btn")?(i='<button class="'+M.buttonup_class+' bootstrap-touchspin-up" type="button">'+M.buttonup_txt+"</button>",o.prepend(i)):(i='<span class="input-group-btn"><button class="'+M.buttonup_class+' bootstrap-touchspin-up" type="button">'+M.buttonup_txt+"</button></span>",t(i).insertAfter(O)),t(s).insertBefore(O),t(a).insertAfter(O),T=e}function p(){var e;e=M.verticalbuttons?'<div class="input-group bootstrap-touchspin"><span class="input-group-addon bootstrap-touchspin-prefix">'+M.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+M.postfix+'</span><span class="input-group-btn-vertical"><button class="'+M.buttondown_class+' bootstrap-touchspin-up" type="button"><i class="'+M.verticalupclass+'"></i></button><button class="'+M.buttonup_class+' bootstrap-touchspin-down" type="button"><i class="'+M.verticaldownclass+'"></i></button></span></div>':'<div class="input-group bootstrap-touchspin"><span class="input-group-btn"><button class="'+M.buttondown_class+' bootstrap-touchspin-down" type="button">'+M.buttondown_txt+'</button></span><span class="input-group-addon bootstrap-touchspin-prefix">'+M.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+M.postfix+'</span><span class="input-group-btn"><button class="'+M.buttonup_class+' bootstrap-touchspin-up" type="button">'+M.buttonup_txt+"</button></span></div>",T=t(e).insertBefore(O),t(".bootstrap-touchspin-prefix",T).after(O),O.hasClass("input-sm")?T.addClass("input-group-sm"):O.hasClass("input-lg")&&T.addClass("input-group-lg")}function m(){L={down:t(".bootstrap-touchspin-down",T),up:t(".bootstrap-touchspin-up",T),input:t("input",T),prefix:t(".bootstrap-touchspin-prefix",T).addClass(M.prefix_extraclass),postfix:t(".bootstrap-touchspin-postfix",T).addClass(M.postfix_extraclass)}}function g(){""===M.prefix&&L.prefix.hide(),""===M.postfix&&L.postfix.hide()}function v(){O.on("keydown",function(t){var e=t.keyCode||t.which;38===e?("up"!==H&&(k(),S()),t.preventDefault()):40===e&&("down"!==H&&(_(),C()),t.preventDefault())}),O.on("keyup",function(t){var e=t.keyCode||t.which;38===e?D():40===e&&D()}),O.on("blur",function(){w()}),L.down.on("keydown",function(t){var e=t.keyCode||t.which;(32===e||13===e)&&("down"!==H&&(_(),C()),t.preventDefault())}),L.down.on("keyup",function(t){var e=t.keyCode||t.which;(32===e||13===e)&&D()}),L.up.on("keydown",function(t){var e=t.keyCode||t.which;(32===e||13===e)&&("up"!==H&&(k(),S()),t.preventDefault())}),L.up.on("keyup",function(t){var e=t.keyCode||t.which;(32===e||13===e)&&D()}),L.down.on("mousedown.touchspin",function(t){L.down.off("touchstart.touchspin"),O.is(":disabled")||(_(),C(),t.preventDefault(),t.stopPropagation())}),L.down.on("touchstart.touchspin",function(t){L.down.off("mousedown.touchspin"),O.is(":disabled")||(_(),C(),t.preventDefault(),t.stopPropagation())}),L.up.on("mousedown.touchspin",function(t){L.up.off("touchstart.touchspin"),O.is(":disabled")||(k(),S(),t.preventDefault(),t.stopPropagation())}),L.up.on("touchstart.touchspin",function(t){L.up.off("mousedown.touchspin"),O.is(":disabled")||(k(),S(),t.preventDefault(),t.stopPropagation())}),L.up.on("mouseout touchleave touchend touchcancel",function(t){H&&(t.stopPropagation(),D())}),L.down.on("mouseout touchleave touchend touchcancel",function(t){H&&(t.stopPropagation(),D())}),L.down.on("mousemove touchmove",function(t){H&&(t.stopPropagation(),t.preventDefault())}),L.up.on("mousemove touchmove",function(t){H&&(t.stopPropagation(),t.preventDefault())}),t(document).on(n(["mouseup","touchend","touchcancel"],i).join(" "),function(t){H&&(t.preventDefault(),D())}),t(document).on(n(["mousemove","touchmove","scroll","scrollstart"],i).join(" "),function(t){H&&(t.preventDefault(),D())}),O.on("mousewheel DOMMouseScroll",function(t){if(M.mousewheel&&O.is(":focus")){var e=t.originalEvent.wheelDelta||-t.originalEvent.deltaY||-t.originalEvent.detail;t.stopPropagation(),t.preventDefault(),0>e?_():k()}})}function y(){O.on("touchspin.uponce",function(){D(),k()}),O.on("touchspin.downonce",function(){D(),_()}),O.on("touchspin.startupspin",function(){S()}),O.on("touchspin.startdownspin",function(){C()}),O.on("touchspin.stopspin",function(){D()}),O.on("touchspin.updatesettings",function(t,e){l(e)})}function b(t){switch(M.forcestepdivisibility){case"round":return(Math.round(t/M.step)*M.step).toFixed(M.decimals);case"floor":return(Math.floor(t/M.step)*M.step).toFixed(M.decimals);case"ceil":return(Math.ceil(t/M.step)*M.step).toFixed(M.decimals);default:return t}}function w(){var t,e,n;""!==(t=O.val())&&(M.decimals>0&&"."===t||(e=parseFloat(t),isNaN(e)&&(e=0),n=e,e.toString()!==t&&(n=e),e<M.min&&(n=M.min),e>M.max&&(n=M.max),n=b(n),Number(t).toString()!==n.toString()&&(O.val(n),O.trigger("change"))))}function x(){if(M.booster){var t=Math.pow(2,Math.floor(F/M.boostat))*M.step;return M.maxboostedstep&&t>M.maxboostedstep&&(t=M.maxboostedstep,E=Math.round(E/t)*t),Math.max(M.step,t)}return M.step}function k(){w(),E=parseFloat(L.input.val()),isNaN(E)&&(E=0);var t=E,e=x();E+=e,E>M.max&&(E=M.max,O.trigger("touchspin.on.max"),D()),L.input.val(Number(E).toFixed(M.decimals)),t!==E&&O.trigger("change")}function _(){w(),E=parseFloat(L.input.val()),isNaN(E)&&(E=0);var t=E,e=x();E-=e,E<M.min&&(E=M.min,O.trigger("touchspin.on.min"),D()),L.input.val(E.toFixed(M.decimals)),t!==E&&O.trigger("change")}function C(){D(),F=0,H="down",O.trigger("touchspin.on.startspin"),O.trigger("touchspin.on.startdownspin"),I=setTimeout(function(){A=setInterval(function(){F++,_()},M.stepinterval)},M.stepintervaldelay)}function S(){D(),F=0,H="up",O.trigger("touchspin.on.startspin"),O.trigger("touchspin.on.startupspin"),N=setTimeout(function(){$=setInterval(function(){F++,k()},M.stepinterval)},M.stepintervaldelay)}function D(){switch(clearTimeout(I),clearTimeout(N),clearInterval(A),clearInterval($),H){case"up":O.trigger("touchspin.on.stopupspin"),O.trigger("touchspin.on.stopspin");break;case"down":O.trigger("touchspin.on.stopdownspin"),O.trigger("touchspin.on.stopspin")}F=0,H=!1}var M,T,L,E,A,$,I,N,O=t(this),P=O.data(),F=0,H=!1;s()})}}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";var e=function(e,n){var i=["autofocus","savable","hideable","width","height","resize","iconlibrary","language","footer","fullscreen","hiddenButtons","disabledButtons"];t.each(i,function(i,r){void 0!==t(e).data(r)&&(n="object"==typeof n?n:{},n[r]=t(e).data(r))}),this.$ns="bootstrap-markdown",this.$element=t(e),this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null},this.$options=t.extend(!0,{},t.fn.markdown.defaults,n,this.$element.data("options")),this.$oldContent=null,this.$isPreview=!1,this.$isFullscreen=!1,this.$editor=null,this.$textarea=null,this.$handler=[],this.$callback=[],this.$nextTab=[],this.showEditor()};e.prototype={constructor:e,__alterButtons:function(e,n){var i=this.$handler,r="all"==e,o=this;t.each(i,function(t,i){var s=!0;!1===(s=!r&&i.indexOf(e)<0)&&n(o.$editor.find('button[data-handler="'+i+'"]'))})},__buildButtons:function(e,n){var i,r=this.$ns,o=this.$handler,s=this.$callback;for(i=0;i<e.length;i++){var a,l=e[i];for(a=0;a<l.length;a++){var c,u=l[a].data,h=t("<div/>",{"class":"btn-group"});for(c=0;c<u.length;c++){var d,f,p=u[c],m=r+"-"+p.name,g=this.__getIcon(p.icon),v=p.btnText?p.btnText:"",y=p.btnClass?p.btnClass:"btn",b=p.tabIndex?p.tabIndex:"-1",w="undefined"!=typeof p.hotkey?p.hotkey:"",x="undefined"!=typeof jQuery.hotkeys&&""!==w?" ("+w+")":"";d=t("<button></button>"),d.text(" "+this.__localize(v)).addClass("btn-default btn-sm").addClass(y),y.match(/btn\-(primary|success|info|warning|danger|link)/)&&d.removeClass("btn-default"),d.attr({type:"button",title:this.__localize(p.title)+x,tabindex:b,"data-provider":r,"data-handler":m,"data-hotkey":w}),!0===p.toggle&&d.attr("data-toggle","button"),f=t("<span/>"),f.addClass(g),f.prependTo(d),h.append(d),o.push(m),s.push(p.callback)}n.append(h)}}return n},__setListener:function(){var e=void 0!==this.$textarea.attr("rows"),n=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",i=e?this.$textarea.attr("rows"):n;this.$textarea.attr("rows",i),this.$options.resize&&this.$textarea.css("resize",this.$options.resize),this.$textarea.on("focus",t.proxy(this.focus,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)).on("change",t.proxy(this.change,this)).on("select",t.proxy(this.select,this)),this.eventSupported("keydown")&&this.$textarea.on("keydown",t.proxy(this.keydown,this)),this.$textarea.data("markdown",this)},__handle:function(e){var n=t(e.currentTarget),i=this.$handler,r=this.$callback,o=n.attr("data-handler"),s=i.indexOf(o),a=r[s];t(e.currentTarget).focus(),a(this),this.change(this),o.indexOf("cmdSave")<0&&this.$textarea.focus(),e.preventDefault()},__localize:function(e){var n=t.fn.markdown.messages,i=this.$options.language;return void 0!==n&&"undefined"!=typeof n[i]&&"undefined"!=typeof n[i][e]?n[i][e]:e},__getIcon:function(t){return"object"==typeof t?t[this.$options.iconlibrary]:t},setFullscreen:function(e){var n=this.$editor,i=this.$textarea;!0===e?(n.addClass("md-fullscreen-mode"),t("body").addClass("md-nooverflow"),this.$options.onFullscreen(this)):(n.removeClass("md-fullscreen-mode"),t("body").removeClass("md-nooverflow"),1==this.$isPreview&&this.hidePreview().showPreview()),this.$isFullscreen=e,i.focus()},showEditor:function(){var e,n=this,i=this.$ns,r=this.$element,o=(r.css("height"),r.css("width"),this.$editable),s=this.$handler,a=this.$callback,l=this.$options,c=t("<div/>",{"class":"md-editor",click:function(){n.focus()}});if(null===this.$editor){var u=t("<div/>",{"class":"md-header btn-toolbar"}),h=[];if(l.buttons.length>0&&(h=h.concat(l.buttons[0])),l.additionalButtons.length>0&&t.each(l.additionalButtons[0],function(e,n){var i=t.grep(h,function(t){return t.name===n.name});i.length>0?i[0].data=i[0].data.concat(n.data):h.push(l.additionalButtons[0][e])}),l.reorderButtonGroups.length>0&&(h=h.filter(function(t){return l.reorderButtonGroups.indexOf(t.name)>-1}).sort(function(t,e){return l.reorderButtonGroups.indexOf(t.name)<l.reorderButtonGroups.indexOf(e.name)?-1:l.reorderButtonGroups.indexOf(t.name)>l.reorderButtonGroups.indexOf(e.name)?1:0})),h.length>0&&(u=this.__buildButtons([h],u)),l.fullscreen.enable&&u.append('<div class="md-controls"><a class="md-control md-control-fullscreen" href="#"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOn)+'"></span></a></div>').on("click",".md-control-fullscreen",function(t){t.preventDefault(),n.setFullscreen(!0)}),c.append(u),r.is("textarea"))r.before(c),e=r,e.addClass("md-input"),c.append(e);else{var d="function"==typeof toMarkdown?toMarkdown(r.html()):r.html(),f=t.trim(d);e=t("<textarea/>",{"class":"md-input",val:f}),c.append(e),o.el=r,o.type=r.prop("tagName").toLowerCase(),o.content=r.html(),t(r[0].attributes).each(function(){o.attrKeys.push(this.nodeName),o.attrValues.push(this.nodeValue)}),r.replaceWith(c)}var p=t("<div/>",{"class":"md-footer"}),m=!1,g="";if(l.savable){m=!0;var v="cmdSave";s.push(v),a.push(l.onSave),p.append('<button class="btn btn-success" data-provider="'+i+'" data-handler="'+v+'"><i class="icon icon-white icon-ok"></i> '+this.__localize("Save")+"</button>")}if(g="function"==typeof l.footer?l.footer(this):l.footer,""!==t.trim(g)&&(m=!0,p.append(g)),m&&c.append(p),l.width&&"inherit"!==l.width&&(jQuery.isNumeric(l.width)?(c.css("display","table"),e.css("width",l.width+"px")):c.addClass(l.width)),l.height&&"inherit"!==l.height)if(jQuery.isNumeric(l.height)){var y=l.height;u&&(y=Math.max(0,y-u.outerHeight())),p&&(y=Math.max(0,y-p.outerHeight())),e.css("height",y+"px")}else c.addClass(l.height);this.$editor=c,this.$textarea=e,this.$editable=o,this.$oldContent=this.getContent(),this.__setListener(),
this.$editor.attr("id",(new Date).getTime()),this.$editor.on("click",'[data-provider="bootstrap-markdown"]',t.proxy(this.__handle,this)),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this.eventSupported("keydown")&&"object"==typeof jQuery.hotkeys&&u.find('[data-provider="bootstrap-markdown"]').each(function(){var n=t(this),i=n.attr("data-hotkey");""!==i.toLowerCase()&&e.bind("keydown",i,function(){return n.trigger("click"),!1})}),"preview"===l.initialstate?this.showPreview():"fullscreen"===l.initialstate&&l.fullscreen.enable&&this.setFullscreen(!0)}else this.$editor.show();return l.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active")),l.fullscreen.enable&&!1!==l.fullscreen&&(this.$editor.append('<div class="md-fullscreen-controls"><a href="#" class="exit-fullscreen" title="Exit fullscreen"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOff)+'"></span></a></div>'),this.$editor.on("click",".exit-fullscreen",function(t){t.preventDefault(),n.setFullscreen(!1)})),this.hideButtons(l.hiddenButtons),this.disableButtons(l.disabledButtons),l.onShow(this),this},parseContent:function(t){var t=t||this.$textarea.val();return this.$options.parser?this.$options.parser(t):"object"==typeof markdown?markdown.toHTML(t):"function"==typeof marked?marked(t):t},showPreview:function(){var e,n,i=this.$options,r=this.$textarea,o=r.next(),s=t("<div/>",{"class":"md-preview","data-provider":"markdown-preview"});return 1==this.$isPreview?this:(this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview"),n=i.onPreview(this),e="string"==typeof n?n:this.parseContent(),s.html(e),o&&"md-footer"==o.attr("class")?s.insertBefore(o):r.parent().append(s),s.css({width:r.outerWidth()+"px",height:r.outerHeight()+"px"}),this.$options.resize&&s.css("resize",this.$options.resize),r.hide(),s.data("markdown",this),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this)},hidePreview:function(){return this.$isPreview=!1,this.$editor.find('div[data-provider="markdown-preview"]').remove(),this.enableButtons("all"),this.disableButtons(this.$options.disabledButtons),this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(t){return this.$textarea.val(t),this},findSelection:function(t){var e,n=this.getContent();if((e=n.indexOf(t))>=0&&t.length>0){var i,r=this.getSelection();return this.setSelection(e,e+t.length),i=this.getSelection(),this.setSelection(r.start,r.end),i}return null},getSelection:function(){var t=this.$textarea[0];return("selectionStart"in t&&function(){var e=t.selectionEnd-t.selectionStart;return{start:t.selectionStart,end:t.selectionEnd,length:e,text:t.value.substr(t.selectionStart,e)}}||function(){return null})()},setSelection:function(t,e){var n=this.$textarea[0];return("selectionStart"in n&&function(){n.selectionStart=t,n.selectionEnd=e}||function(){return null})()},replaceSelection:function(t){var e=this.$textarea[0];return("selectionStart"in e&&function(){return e.value=e.value.substr(0,e.selectionStart)+t+e.value.substr(e.selectionEnd,e.value.length),e.selectionStart=e.value.length,this}||function(){return e.value+=t,jQuery(e)})()},getNextTab:function(){if(0===this.$nextTab.length)return null;var t,e=this.$nextTab.shift();return"function"==typeof e?t=e():"object"==typeof e&&e.length>0&&(t=e),t},setNextTab:function(t,e){if("string"==typeof t){var n=this;this.$nextTab.push(function(){return n.findSelection(t)})}else if("number"==typeof t&&"number"==typeof e){var i=this.getSelection();this.setSelection(t,e),this.$nextTab.push(this.getSelection()),this.setSelection(i.start,i.end)}},__parseButtonNameParam:function(t){return"string"==typeof t?t.split(" "):t},enableButtons:function(e){var n=this.__parseButtonNameParam(e),i=this;return t.each(n,function(t){i.__alterButtons(n[t],function(t){t.removeAttr("disabled")})}),this},disableButtons:function(e){var n=this.__parseButtonNameParam(e),i=this;return t.each(n,function(t){i.__alterButtons(n[t],function(t){t.attr("disabled","disabled")})}),this},hideButtons:function(e){var n=this.__parseButtonNameParam(e),i=this;return t.each(n,function(t){i.__alterButtons(n[t],function(t){t.addClass("hidden")})}),this},showButtons:function(e){var n=this.__parseButtonNameParam(e),i=this;return t.each(n,function(t){i.__alterButtons(n[t],function(t){t.removeClass("hidden")})}),this},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},keyup:function(t){var e=!1;switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:var n;if(null!==(n=this.getNextTab())){var i=this;setTimeout(function(){i.setSelection(n.start,n.end)},500),e=!0}else{var r=this.getSelection();r.start==r.end&&r.end==this.getContent().length?e=!1:(this.setSelection(this.getContent().length,this.getContent().length),e=!0)}break;case 13:e=!1;break;case 27:this.$isFullscreen&&this.setFullscreen(!1),e=!1;break;default:e=!1}e&&(t.stopPropagation(),t.preventDefault()),this.$options.onChange(this)},change:function(){return this.$options.onChange(this),this},select:function(){return this.$options.onSelect(this),this},focus:function(){var e=this.$options,n=(e.hideable,this.$editor);return n.addClass("active"),t(document).find(".md-editor").each(function(){if(t(this).attr("id")!==n.attr("id")){var e;null===(e=t(this).find("textarea").data("markdown"))&&(e=t(this).find('div[data-provider="markdown-preview"]').data("markdown")),e&&e.blur()}}),e.onFocus(this),this},blur:function(){var e=this.$options,n=e.hideable,i=this.$editor,r=this.$editable;if(i.hasClass("active")||0===this.$element.parent().length){if(i.removeClass("active"),n)if(null!==r.el){var o=t("<"+r.type+"/>"),s=this.getContent(),a=this.parseContent(s);t(r.attrKeys).each(function(t){o.attr(r.attrKeys[t],r.attrValues[t])}),o.html(a),i.replaceWith(o)}else i.hide();e.onBlur(this)}return this}};var n=t.fn.markdown;t.fn.markdown=function(n){return this.each(function(){var i=t(this),r=i.data("markdown"),o="object"==typeof n&&n;r||i.data("markdown",r=new e(this,o))})},t.fn.markdown.messages={},t.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",language:"en",initialstate:"editor",parser:null,buttons:[[{name:"groupFont",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:"glyphicon glyphicon-bold",fa:"fa fa-bold","fa-3":"icon-bold"},callback:function(t){var e,n,i=t.getSelection(),r=t.getContent();e=0===i.length?t.__localize("strong text"):i.text,"**"===r.substr(i.start-2,2)&&"**"===r.substr(i.end,2)?(t.setSelection(i.start-2,i.end+2),t.replaceSelection(e),n=i.start-2):(t.replaceSelection("**"+e+"**"),n=i.start+2),t.setSelection(n,n+e.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:"glyphicon glyphicon-italic",fa:"fa fa-italic","fa-3":"icon-italic"},callback:function(t){var e,n,i=t.getSelection(),r=t.getContent();e=0===i.length?t.__localize("emphasized text"):i.text,"_"===r.substr(i.start-1,1)&&"_"===r.substr(i.end,1)?(t.setSelection(i.start-1,i.end+1),t.replaceSelection(e),n=i.start-1):(t.replaceSelection("_"+e+"_"),n=i.start+1),t.setSelection(n,n+e.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",icon:{glyph:"glyphicon glyphicon-header",fa:"fa fa-header","fa-3":"icon-font"},callback:function(t){var e,n,i,r,o=t.getSelection(),s=t.getContent();e=0===o.length?t.__localize("heading text"):o.text+"\n",i=4,"### "===s.substr(o.start-i,i)||(i=3,"###"===s.substr(o.start-i,i))?(t.setSelection(o.start-i,o.end),t.replaceSelection(e),n=o.start-i):o.start>0&&!!(r=s.substr(o.start-1,1))&&"\n"!=r?(t.replaceSelection("\n\n### "+e),n=o.start+6):(t.replaceSelection("### "+e),n=o.start+4),t.setSelection(n,n+e.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",hotkey:"Ctrl+L",icon:{glyph:"glyphicon glyphicon-link",fa:"fa fa-link","fa-3":"icon-link"},callback:function(e){var n,i,r,o=e.getSelection();e.getContent();n=0===o.length?e.__localize("enter link description here"):o.text,r=prompt(e.__localize("Insert Hyperlink"),"http://");var s=new RegExp("^((http|https)://|(mailto:)|(//))[a-z0-9]","i");if(null!==r&&""!==r&&"http://"!==r&&s.test(r)){var a=t("<div>"+r+"</div>").text();e.replaceSelection("["+n+"]("+a+")"),i=o.start+1,e.setSelection(i,i+n.length)}}},{name:"cmdImage",title:"Image",hotkey:"Ctrl+G",icon:{glyph:"glyphicon glyphicon-picture",fa:"fa fa-picture-o","fa-3":"icon-picture"},callback:function(e){var n,i,r,o=e.getSelection();e.getContent();n=0===o.length?e.__localize("enter image description here"):o.text,r=prompt(e.__localize("Insert Image Hyperlink"),"http://");var s=new RegExp("^((http|https)://|(//))[a-z0-9]","i");if(null!==r&&""!==r&&"http://"!==r&&s.test(r)){var a=t("<div>"+r+"</div>").text();e.replaceSelection("!["+n+"]("+a+' "'+e.__localize("enter image title here")+'")'),i=o.start+2,e.setNextTab(e.__localize("enter image title here")),e.setSelection(i,i+n.length)}}}]},{name:"groupMisc",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:"glyphicon glyphicon-list",fa:"fa fa-list","fa-3":"icon-list-ul"},callback:function(e){var n,i,r=e.getSelection();e.getContent();if(0===r.length)n=e.__localize("list text here"),e.replaceSelection("- "+n),i=r.start+2;else if(r.text.indexOf("\n")<0)n=r.text,e.replaceSelection("- "+n),i=r.start+2;else{var o=[];o=r.text.split("\n"),n=o[0],t.each(o,function(t,e){o[t]="- "+e}),e.replaceSelection("\n\n"+o.join("\n")),i=r.start+4}e.setSelection(i,i+n.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:"glyphicon glyphicon-th-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol"},callback:function(e){var n,i,r=e.getSelection();e.getContent();if(0===r.length)n=e.__localize("list text here"),e.replaceSelection("1. "+n),i=r.start+3;else if(r.text.indexOf("\n")<0)n=r.text,e.replaceSelection("1. "+n),i=r.start+3;else{var o=[];o=r.text.split("\n"),n=o[0],t.each(o,function(t,e){o[t]="1. "+e}),e.replaceSelection("\n\n"+o.join("\n")),i=r.start+5}e.setSelection(i,i+n.length)}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:"glyphicon glyphicon-asterisk",fa:"fa fa-code","fa-3":"icon-code"},callback:function(t){var e,n,i=t.getSelection(),r=t.getContent();e=0===i.length?t.__localize("code text here"):i.text,"```\n"===r.substr(i.start-4,4)&&"\n```"===r.substr(i.end,4)?(t.setSelection(i.start-4,i.end+4),t.replaceSelection(e),n=i.start-4):"`"===r.substr(i.start-1,1)&&"`"===r.substr(i.end,1)?(t.setSelection(i.start-1,i.end+1),t.replaceSelection(e),n=i.start-1):r.indexOf("\n")>-1?(t.replaceSelection("```\n"+e+"\n```"),n=i.start+4):(t.replaceSelection("`"+e+"`"),n=i.start+1),t.setSelection(n,n+e.length)}},{name:"cmdQuote",hotkey:"Ctrl+Q",title:"Quote",icon:{glyph:"glyphicon glyphicon-comment",fa:"fa fa-quote-left","fa-3":"icon-quote-left"},callback:function(e){var n,i,r=e.getSelection();e.getContent();if(0===r.length)n=e.__localize("quote here"),e.replaceSelection("> "+n),i=r.start+2;else if(r.text.indexOf("\n")<0)n=r.text,e.replaceSelection("> "+n),i=r.start+2;else{var o=[];o=r.text.split("\n"),n=o[0],t.each(o,function(t,e){o[t]="> "+e}),e.replaceSelection("\n\n"+o.join("\n")),i=r.start+4}e.setSelection(i,i+n.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:!0,hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-primary btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search","fa-3":"icon-search"},callback:function(t){var e=t.$isPreview;!1===e?t.showPreview():t.hidePreview()}}]}]],additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",fullscreen:{enable:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full"},fullscreenOff:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small"}}},onShow:function(){},onPreview:function(){},onSave:function(){},onBlur:function(){},onFocus:function(){},onChange:function(){},onFullscreen:function(){},onSelect:function(){}},t.fn.markdown.Constructor=e,t.fn.markdown.noConflict=function(){return t.fn.markdown=n,this};var i=function(t){var e=t;if(e.data("markdown"))return void e.data("markdown").showEditor();e.markdown()},r=function(){var e=t(document.activeElement);t(document).find(".md-editor").each(function(){var n=t(this),i=e.closest(".md-editor")[0]===this,r=n.find("textarea").data("markdown")||n.find('div[data-provider="markdown-preview"]').data("markdown");r&&!i&&r.blur()})};t(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(e){i(t(this)),e.preventDefault()}).on("click focusin",function(t){r(t)}).ready(function(){t('textarea[data-provide="markdown"]').each(function(){i(t(this))})})}),function(t){function e(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function n(){var t=require("util");return"Markdown.mk_block( "+t.inspect(this.toString())+", "+t.inspect(this.trailing)+", "+t.inspect(this.lineNumber)+" )"}function i(t){for(var e=0,n=-1;-1!==(n=t.indexOf("\n",n+1));)e++;return e}function r(t,e){function n(t){this.len_after=t,this.name="close_"+e}var i=t+"_state",r="strong"==t?"em_state":"strong_state";return function(o){if(this[i][0]==e)return this[i].shift(),[o.length,new n(o.length-e.length)];var s=this[r].slice(),a=this[i].slice();this[i].unshift(e);var l=this.processInline(o.substr(e.length)),c=l[l.length-1];this[i].shift();if(c instanceof n){l.pop();return[o.length-c.len_after,[t].concat(l)]}return this[r]=s,this[i]=a,[e.length,e]}}function o(t){for(var e=t.split(""),n=[""],i=!1;e.length;){var r=e.shift();switch(r){case" ":i?n[n.length-1]+=r:n.push("");break;case"'":case'"':i=!i;break;case"\\":r=e.shift();default:n[n.length-1]+=r}}return n}function s(t){return g(t)&&t.length>1&&"object"==typeof t[1]&&!g(t[1])?t[1]:undefined}function l(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function c(t){if("string"==typeof t)return l(t);var e=t.shift(),n={},i=[];for(!t.length||"object"!=typeof t[0]||t[0]instanceof Array||(n=t.shift());t.length;)i.push(arguments.callee(t.shift()));var r="";for(var o in n)r+=" "+o+'="'+l(n[o])+'"';return"img"==e||"br"==e||"hr"==e?"<"+e+r+"/>":"<"+e+r+">"+i.join("")+"</"+e+">"}function u(t,e,n){var i;n=n||{};var r=t.slice(0);"function"==typeof n.preprocessTreeNode&&(r=n.preprocessTreeNode(r,e));var o=s(r);if(o){r[1]={};for(i in o)r[1][i]=o[i];o=r[1]}if("string"==typeof r)return r;switch(r[0]){case"header":r[0]="h"+r[1].level,delete r[1].level;break;case"bulletlist":r[0]="ul";break;case"numberlist":r[0]="ol";break;case"listitem":r[0]="li";break;case"para":r[0]="p";break;case"markdown":r[0]="html",o&&delete o.references;break;case"code_block":r[0]="pre",i=o?2:1;var a=["code"];a.push.apply(a,r.splice(i)),r[i]=a;break;case"inlinecode":r[0]="code";break;case"img":r[1].src=r[1].href,delete r[1].href;break;case"linebreak":r[0]="br";break;case"link":r[0]="a";break;case"link_ref":r[0]="a";var l=e[o.ref];if(!l)return o.original;delete o.ref,o.href=l.href,l.title&&(o.title=l.title),delete o.original;break;case"img_ref":r[0]="img";var l=e[o.ref];if(!l)return o.original;delete o.ref,o.src=l.href,l.title&&(o.title=l.title),delete o.original}if(i=1,o){for(var c in r[1])i=2;1===i&&r.splice(i,1)}for(;i<r.length;++i)r[i]=arguments.callee(r[i],e,n);return r}function h(t){for(var e=s(t)?2:1;e<t.length;)"string"==typeof t[e]?e+1<t.length&&"string"==typeof t[e+1]?t[e]+=t.splice(e+1,1)[0]:++e:(arguments.callee(t[e]),++e)}var d=t.Markdown=function t(e){switch(typeof e){case"undefined":this.dialect=t.dialects.Gruber;break;case"object":this.dialect=e;break;default:if(!(e in t.dialects))throw new Error("Unknown Markdown dialect '"+String(e)+"'");this.dialect=t.dialects[e]}this.em_state=[],this.strong_state=[],this.debug_indent=""};t.parse=function(t,e){return new d(e).toTree(t)},t.toHTML=function(e,n,i){var r=t.toHTMLTree(e,n,i);return t.renderJsonML(r)},t.toHTMLTree=function(t,e,n){"string"==typeof t&&(t=this.parse(t,e));var i=s(t),r={};i&&i.references&&(r=i.references);var o=u(t,r,n);return h(o),o};var f=d.mk_block=function(t,i,r){1==arguments.length&&(i="\n\n");var o=new String(t);return o.trailing=i,o.inspect=n,o.toSource=e,r!=undefined&&(o.lineNumber=r),o};d.prototype.split_blocks=function(t){var e,n=/([\s\S]+?)($|\n(?:\s*\n|$)+)/g,r=[],o=1;for(null!=(e=/^(\s*\n)/.exec(t))&&(o+=i(e[0]),n.lastIndex=e[0].length);null!==(e=n.exec(t));)r.push(f(e[1],e[2],o)),o+=i(e[0]);return r},d.prototype.processBlock=function(t,e){var n=this.dialect.block,i=n.__order__;if("__call__"in n)return n.__call__.call(this,t,e);for(var r=0;r<i.length;r++){var o=n[i[r]].call(this,t,e);if(o)return(!g(o)||o.length>0&&!g(o[0]))&&this.debug(i[r],"didn't return a proper array"),o}return[]},d.prototype.processInline=function(t){return this.dialect.inline.__call__.call(this,String(t))},d.prototype.toTree=function(t,e){var n=t instanceof Array?t:this.split_blocks(t),i=this.tree;try{for(this.tree=e||this.tree||["markdown"];n.length;){var r=this.processBlock(n.shift(),n);r.length&&this.tree.push.apply(this.tree,r)}return this.tree}finally{e&&(this.tree=i)}},d.prototype.debug=function(){var t=Array.prototype.slice.call(arguments);t.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,t),"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log.apply(null,t)},d.prototype.loop_re_over_block=function(t,e,n){for(var i,r=e.valueOf();r.length&&null!=(i=t.exec(r));)r=r.substr(i[0].length),n.call(this,i);return r},d.dialects={},d.dialects.Gruber={block:{atxHeader:function(t,e){var n=t.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!n)return undefined;var i=["header",{level:n[1].length}];return Array.prototype.push.apply(i,this.processInline(n[2])),n[0].length<t.length&&e.unshift(f(t.substr(n[0].length),t.trailing,t.lineNumber+2)),[i]},setextHeader:function(t,e){var n=t.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!n)return undefined;var i="="===n[2]?1:2,r=["header",{level:i},n[1]];return n[0].length<t.length&&e.unshift(f(t.substr(n[0].length),t.trailing,t.lineNumber+2)),[r]},code:function(t,e){var n=[],i=/^(?: {0,3}\t| {4})(.*)\n?/;if(!t.match(i))return undefined;t:for(;;){var r=this.loop_re_over_block(i,t.valueOf(),function(t){n.push(t[1])});if(r.length){e.unshift(f(r,t.trailing));break t}if(!e.length)break t;if(!e[0].match(i))break t;n.push(t.trailing.replace(/[^\n]/g,"").substring(2)),t=e.shift()}return[["code_block",n.join("\n")]]},horizRule:function(t,e){var n=t.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!n)return undefined;var i=[["hr"]];return n[1]&&i.unshift.apply(i,this.processBlock(n[1],[])),n[3]&&e.unshift(f(n[3])),i},lists:function(){function t(t){return new RegExp("(?:^("+l+"{0,"+t+"} {0,3})("+o+")\\s+)|(^"+l+"{0,"+(t-1)+"}[ ]{0,4})")}function e(t){return t.replace(/ {0,3}\t/g,"    ")}function n(t,e,n,i){if(e)return void t.push(["para"].concat(n));var r=t[t.length-1]instanceof Array&&"para"==t[t.length-1][0]?t[t.length-1]:t;i&&t.length>1&&n.unshift(i);for(var o=0;o<n.length;o++){var s=n[o];"string"==typeof s&&r.length>1&&"string"==typeof r[r.length-1]?r[r.length-1]+=s:r.push(s)}}function i(t,e){for(var n=new RegExp("^("+l+"{"+t+"}.*?\\n?)*$"),i=new RegExp("^"+l+"{"+t+"}","gm"),r=[];e.length>0;){if(n.exec(e[0])){var o=e.shift(),s=o.replace(i,"");r.push(f(s,o.trailing,o.lineNumber))}break}return r}function r(t,e,n){var i=t.list,r=i[i.length-1];if(!(r[1]instanceof Array&&"para"==r[1][0]))if(e+1==n.length)r.push(["para"].concat(r.splice(1)));else{var o=r.pop();r.push(["para"].concat(r.splice(1)),o)}}var o="[*+-]|\\d+\\.",s=/[*+-]/,a=new RegExp("^( {0,3})("+o+")[ \t]+"),l="(?: {0,3}\\t| {4})";return function(o,l){function c(t){var e=s.exec(t[2])?["bulletlist"]:["numberlist"];return f.push({list:e,indent:t[1]}),e}var u=o.match(a);if(!u)return undefined;for(var h,d,f=[],p=c(u),g=!1,v=[f[0].list];;){for(var y=o.split(/(?=\n)/),b="",w=0;w<y.length;w++){var x="",k=y[w].replace(/^\n/,function(t){return x=t,""}),_=t(f.length);if(u=k.match(_),u[1]!==undefined){b.length&&(n(h,g,this.processInline(b),x),g=!1,b=""),u[1]=e(u[1]);var C=Math.floor(u[1].length/4)+1;if(C>f.length)p=c(u),h.push(p),h=p[1]=["listitem"];else{var S=!1;for(d=0;d<f.length;d++)if(f[d].indent==u[1]){p=f[d].list,f.splice(d+1),S=!0;break}S||(C++,C<=f.length?(f.splice(C),p=f[C-1].list):(p=c(u),h.push(p))),h=["listitem"],p.push(h)}x=""}k.length>u[0].length&&(b+=x+k.substr(u[0].length))}b.length&&(n(h,g,this.processInline(b),x),g=!1,b="");var D=i(f.length,l);D.length>0&&(m(f,r,this),h.push.apply(h,this.toTree(D,[])));var M=l[0]&&l[0].valueOf()||"";if(!M.match(a)&&!M.match(/^ /))break;o=l.shift();var T=this.dialect.block.horizRule(o,l);if(T){v.push.apply(v,T);break}m(f,r,this),g=!0}return v}}(),blockquote:function(t,e){if(!t.match(/^>/m))return undefined;var n=[];if(">"!=t[0]){for(var i=t.split(/\n/),r=[];i.length&&">"!=i[0][0];)r.push(i.shift());t=i.join("\n"),n.push.apply(n,this.processBlock(r.join("\n"),[]))}for(;e.length&&">"==e[0][0];){var o=e.shift();t=new String(t+t.trailing+o),t.trailing=o.trailing}var s=t.replace(/^> ?/gm,"");this.tree;return n.push(this.toTree(s,["blockquote"])),n},referenceDefn:function(t,e){var n=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!t.match(n))return undefined;s(this.tree)||this.tree.splice(1,0,{});var i=s(this.tree);i.references===undefined&&(i.references={});var r=this.loop_re_over_block(n,t,function(t){t[2]&&"<"==t[2][0]&&">"==t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1));var e=i.references[t[1].toLowerCase()]={href:t[2]};t[4]!==undefined?e.title=t[4]:t[5]!==undefined&&(e.title=t[5])});return r.length&&e.unshift(f(r,t.trailing)),[]},para:function(t){return[["para"].concat(this.processInline(t))]}}},d.dialects.Gruber.inline={__oneElement__:function(t,e,n){var i,r;if(e=e||this.dialect.inline.__patterns__,!(i=new RegExp("([\\s\\S]*?)("+(e.source||e)+")").exec(t)))return[t.length,t];if(i[1])return[i[1].length,i[1]];var r;return i[2]in this.dialect.inline&&(r=this.dialect.inline[i[2]].call(this,t.substr(i.index),i,n||[])),r=r||[i[2].length,i[2]]},__call__:function(t,e){function n(t){"string"==typeof t&&"string"==typeof r[r.length-1]?r[r.length-1]+=t:r.push(t)}for(var i,r=[];t.length>0;)i=this.dialect.inline.__oneElement__.call(this,t,e,r),t=t.substr(i.shift()),m(i,n);return r},"]":function(){},"}":function(){},"\\":function(t){return t.match(/^\\[\\`\*_{}\[\]()#\+.!\-]/)?[2,t[1]]:[1,"\\"]},"![":function(t){var e=t.match(/^!\[(.*?)\][ \t]*\([ \t]*(\S*)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(e){e[2]&&"<"==e[2][0]&&">"==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1)),e[2]=this.dialect.inline.__call__.call(this,e[2],/\\/)[0];var n={alt:e[1],href:e[2]||""};return e[4]!==undefined&&(n.title=e[4]),[e[0].length,["img",n]]}return e=t.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),e?[e[0].length,["img_ref",{alt:e[1],ref:e[2].toLowerCase(),original:e[0]}]]:[2,"!["]},"[":function(t){var e=String(t),n=d.DialectHelpers.inline_until_char.call(this,t.substr(1),"]");if(!n)return[1,"["];var i,r,o=1+n[0],s=n[1];t=t.substr(o);var a=t.match(/^\s*\([ \t]*(\S+)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(a){var l=a[1];if(o+=a[0].length,l&&"<"==l[0]&&">"==l[l.length-1]&&(l=l.substring(1,l.length-1)),!a[3])for(var c=1,u=0;u<l.length;u++)switch(l[u]){case"(":c++;break;case")":0==--c&&(o-=l.length-u,l=l.substring(0,u))}return l=this.dialect.inline.__call__.call(this,l,/\\/)[0],r={href:l||""},a[3]!==undefined&&(r.title=a[3]),i=["link",r].concat(s),[o,i]}return a=t.match(/^\s*\[(.*?)\]/),a?(o+=a[0].length,r={ref:(a[1]||String(s)).toLowerCase(),original:e.substr(0,o)},i=["link_ref",r].concat(s),[o,i]):1==s.length&&"string"==typeof s[0]?(r={ref:s[0].toLowerCase(),original:e.substr(0,o)},i=["link_ref",r,s[0]],[o,i]):[1,"["]},"<":function(t){var e;return null!=(e=t.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?e[3]?[e[0].length,["link",{href:"mailto:"+e[3]},e[3]]]:"mailto"==e[2]?[e[0].length,["link",{href:e[1]},e[1].substr("mailto:".length)]]:[e[0].length,["link",{href:e[1]},e[1]]]:[1,"<"]},"`":function(t){var e=t.match(/(`+)(([\s\S]*?)\1)/);return e&&e[2]?[e[1].length+e[2].length,["inlinecode",e[3]]]:[1,"`"]},"  \n":function(){return[3,["linebreak"]]}},d.dialects.Gruber.inline["**"]=r("strong","**"),d.dialects.Gruber.inline.__=r("strong","__"),d.dialects.Gruber.inline["*"]=r("em","*"),d.dialects.Gruber.inline._=r("em","_"),d.buildBlockOrder=function(t){var e=[];for(var n in t)"__order__"!=n&&"__call__"!=n&&e.push(n);t.__order__=e},d.buildInlinePatterns=function(t){var e=[];for(var n in t)if(!n.match(/^__.*__$/)){var i=n.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");e.push(1==n.length?i:"(?:"+i+")")}e=e.join("|"),t.__patterns__=e;var r=t.__call__;t.__call__=function(t,n){return n!=undefined?r.call(this,t,n):r.call(this,t,e)}},d.DialectHelpers={},d.DialectHelpers.inline_until_char=function(t,e){for(var n=0,i=[];;){if(t[n]==e)return n++,[n,i];if(n>=t.length)return null;var r=this.dialect.inline.__oneElement__.call(this,t.substr(n));n+=r[0],i.push.apply(i,r.slice(1))}},d.subclassDialect=function(t){function e(){}function n(){}return e.prototype=t.block,n.prototype=t.inline,{block:new e,inline:new n}},d.buildBlockOrder(d.dialects.Gruber.block),d.buildInlinePatterns(d.dialects.Gruber.inline),d.dialects.Maruku=d.subclassDialect(d.dialects.Gruber),d.dialects.Maruku.processMetaHash=function(t){for(var e=o(t),n={},i=0;i<e.length;++i)if(/^#/.test(e[i]))n.id=e[i].substring(1);else if(/^\./.test(e[i]))n["class"]?n["class"]=n["class"]+e[i].replace(/./," "):n["class"]=e[i].substring(1);else if(/\=/.test(e[i])){var r=e[i].split(/\=/);n[r[0]]=r[1]}return n},d.dialects.Maruku.block.document_meta=function(t){if(t.lineNumber>1)return undefined;if(!t.match(/^(?:\w+:.*\n)*\w+:.*$/))return undefined;s(this.tree)||this.tree.splice(1,0,{});var e=t.split(/\n/);for(p in e){var n=e[p].match(/(\w+):\s*(.*)$/),i=n[1].toLowerCase(),r=n[2];this.tree[1][i]=r}return[]},d.dialects.Maruku.block.block_meta=function(t){var e=t.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!e)return undefined;var n,i=this.dialect.processMetaHash(e[2]);if(""===e[1]){var r=this.tree[this.tree.length-1];if(n=s(r),"string"==typeof r)return undefined;n||(n={},r.splice(1,0,n));for(a in i)n[a]=i[a];return[]}var o=t.replace(/\n.*$/,""),l=this.processBlock(o,[]);(n=s(l[0]))||(n={},l[0].splice(1,0,n));for(a in i)n[a]=i[a];return l},d.dialects.Maruku.block.definition_list=function(t,e){var n,i=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,r=["dl"];if(!(a=t.match(i)))return undefined;for(var o=[t];e.length&&i.exec(e[0]);)o.push(e.shift());for(var s=0;s<o.length;++s){var a=o[s].match(i),l=a[1].replace(/\n$/,"").split(/\n/),c=a[2].split(/\n:\s+/);for(n=0;n<l.length;++n)r.push(["dt",l[n]]);for(n=0;n<c.length;++n)r.push(["dd"].concat(this.processInline(c[n].replace(/(\n)\s+/,"$1"))))}return[r]},d.dialects.Maruku.inline["{:"]=function(t,e,n){if(!n.length)return[2,"{:"];var i=n[n.length-1];if("string"==typeof i)return[2,"{:"];var r=t.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!r)return[2,"{:"];var o=this.dialect.processMetaHash(r[1]),a=s(i);a||(a={},i.splice(1,0,a));for(var l in o)a[l]=o[l];return[r[0].length,""]},d.buildBlockOrder(d.dialects.Maruku.block),d.buildInlinePatterns(d.dialects.Maruku.inline);var m,g=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)};m=Array.prototype.forEach?function(t,e,n){return t.forEach(e,n)}:function(t,e,n){for(var i=0;i<t.length;i++)e.call(n||t,t[i],i,t)},t.renderJsonML=function(t,e){e=e||{},e.root=e.root||!1;var n=[];if(e.root)n.push(c(t));else for(t.shift(),!t.length||"object"!=typeof t[0]||t[0]instanceof Array||t.shift();t.length;)n.push(c(t.shift()));return n.join("\n\n")}}(function(){return"undefined"==typeof exports?(window.markdown={},window.markdown):exports}()),function(t){"use strict";function e(e,n){this.itemsArray=[],this.$element=t(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=e.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=t('<div class="bootstrap-tagsinput"></div>'),this.$input=t('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(n)}function n(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(t){return t[n]}}}function i(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(){return n}}}function r(t){return t?l.text(t).html():""}function o(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e}function s(e,n){var i=!1;return t.each(n,function(t,n){if("number"==typeof n&&e.which===n)return i=!0,!1;if(e.which===n.which){var r=!n.hasOwnProperty("altKey")||e.altKey===n.altKey,o=!n.hasOwnProperty("shiftKey")||e.shiftKey===n.shiftKey,s=!n.hasOwnProperty("ctrlKey")||e.ctrlKey===n.ctrlKey;if(r&&o&&s)return i=!0,!1}}),i}var a={tagClass:function(){return"label label-info"},itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},itemTitle:function(){return null},freeInput:!0,addOnBlur:!0,maxTags:undefined,maxChars:undefined,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!0,onTagExists:function(t,e){e.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};e.prototype={constructor:e,add:function(e,n,i){var o=this;if(!(o.options.maxTags&&o.itemsArray.length>=o.options.maxTags)&&(!1===e||e)){if("string"==typeof e&&o.options.trimValue&&(e=t.trim(e)),"object"==typeof e&&!o.objectItems)throw"Can't add objects when itemValue option is not set";if(!e.toString().match(/^\s*$/)){if(o.isSelect&&!o.multiple&&o.itemsArray.length>0&&o.remove(o.itemsArray[0]),"string"==typeof e&&"INPUT"===this.$element[0].tagName){var s=o.options.delimiterRegex?o.options.delimiterRegex:o.options.delimiter,a=e.split(s);if(a.length>1){for(var l=0;l<a.length;l++)this.add(a[l],!0);return void(n||o.pushVal())}}var c=o.options.itemValue(e),u=o.options.itemText(e),h=o.options.tagClass(e),d=o.options.itemTitle(e),f=t.grep(o.itemsArray,function(t){return o.options.itemValue(t)===c})[0];if(!f||o.options.allowDuplicates){if(!(o.items().toString().length+e.length+1>o.options.maxInputLength)){var p=t.Event("beforeItemAdd",{item:e,cancel:!1,options:i});if(o.$element.trigger(p),!p.cancel){o.itemsArray.push(e);var m=t('<span class="tag '+r(h)+(null!==d?'" title="'+d:"")+'">'+r(u)+'<span data-role="remove"></span></span>');if(m.data("item",e),o.findInputWrapper().before(m),m.after(" "),o.isSelect&&!t('option[value="'+encodeURIComponent(c)+'"]',o.$element)[0]){var g=t("<option selected>"+r(u)+"</option>");g.data("item",e),g.attr("value",c),o.$element.append(g)}n||o.pushVal(),o.options.maxTags!==o.itemsArray.length&&o.items().toString().length!==o.options.maxInputLength||o.$container.addClass("bootstrap-tagsinput-max"),o.$element.trigger(t.Event("itemAdded",{item:e,options:i}))}}}else if(o.options.onTagExists){var v=t(".tag",o.$container).filter(function(){return t(this).data("item")===f});o.options.onTagExists(e,v)}}}},remove:function(e,n,i){var r=this;if(r.objectItems&&(e="object"==typeof e?t.grep(r.itemsArray,function(t){return r.options.itemValue(t)==r.options.itemValue(e)}):t.grep(r.itemsArray,function(t){return r.options.itemValue(t)==e}),e=e[e.length-1]),e){var o=t.Event("beforeItemRemove",{item:e,cancel:!1,options:i});if(r.$element.trigger(o),o.cancel)return;t(".tag",r.$container).filter(function(){return t(this).data("item")===e}).remove(),t("option",r.$element).filter(function(){return t(this).data("item")===e}).remove(),-1!==t.inArray(e,r.itemsArray)&&r.itemsArray.splice(t.inArray(e,r.itemsArray),1)}n||r.pushVal(),r.options.maxTags>r.itemsArray.length&&r.$container.removeClass("bootstrap-tagsinput-max"),r.$element.trigger(t.Event("itemRemoved",{item:e,options:i}))},removeAll:function(){var e=this;for(t(".tag",e.$container).remove(),t("option",e.$element).remove();e.itemsArray.length>0;)e.itemsArray.pop();e.pushVal()},refresh:function(){var e=this;t(".tag",e.$container).each(function(){var n=t(this),i=n.data("item"),o=e.options.itemValue(i),s=e.options.itemText(i),a=e.options.tagClass(i);if(n.attr("class",null),
n.addClass("tag "+r(a)),n.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=r(s),e.isSelect){t("option",e.$element).filter(function(){return t(this).data("item")===i}).attr("value",o)}})},items:function(){return this.itemsArray},pushVal:function(){var e=this,n=t.map(e.items(),function(t){return e.options.itemValue(t).toString()});e.$element.val(n,!0).trigger("change")},build:function(e){var r=this;if(r.options=t.extend({},a,e),r.objectItems&&(r.options.freeInput=!1),n(r.options,"itemValue"),n(r.options,"itemText"),i(r.options,"tagClass"),r.options.typeahead){var l=r.options.typeahead||{};i(l,"source"),r.$input.typeahead(t.extend({},l,{source:function(e,n){function i(t){for(var e=[],i=0;i<t.length;i++){var s=r.options.itemText(t[i]);o[s]=t[i],e.push(s)}n(e)}this.map={};var o=this.map,s=l.source(e);t.isFunction(s.success)?s.success(i):t.isFunction(s.then)?s.then(i):t.when(s).then(i)},updater:function(t){return r.add(this.map[t]),this.map[t]},matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(t){var e=new RegExp("("+this.query+")","gi");return t.replace(e,"<strong>$1</strong>")}}))}if(r.options.typeaheadjs){var c=null,u={},h=r.options.typeaheadjs;t.isArray(h)?(c=h[0],u=h[1]):u=h,r.$input.typeahead(c,u).on("typeahead:selected",t.proxy(function(t,e){u.valueKey?r.add(e[u.valueKey]):r.add(e),r.$input.typeahead("val","")},r))}r.$container.on("click",t.proxy(function(){r.$element.attr("disabled")||r.$input.removeAttr("disabled"),r.$input.focus()},r)),r.options.addOnBlur&&r.options.freeInput&&r.$input.on("focusout",t.proxy(function(){0===t(".typeahead, .twitter-typeahead",r.$container).length&&(r.add(r.$input.val()),r.$input.val(""))},r)),r.$container.on("keydown","input",t.proxy(function(e){var n=t(e.target),i=r.findInputWrapper();if(r.$element.attr("disabled"))return void r.$input.attr("disabled","disabled");switch(e.which){case 8:if(0===o(n[0])){var s=i.prev();s.length&&r.remove(s.data("item"))}break;case 46:if(0===o(n[0])){var a=i.next();a.length&&r.remove(a.data("item"))}break;case 37:var l=i.prev();0===n.val().length&&l[0]&&(l.before(i),n.focus());break;case 39:var c=i.next();0===n.val().length&&c[0]&&(c.after(i),n.focus())}var u=n.val().length;Math.ceil(u/5);n.attr("size",Math.max(this.inputSize,n.val().length))},r)),r.$container.on("keypress","input",t.proxy(function(e){var n=t(e.target);if(r.$element.attr("disabled"))return void r.$input.attr("disabled","disabled");var i=n.val(),o=r.options.maxChars&&i.length>=r.options.maxChars;r.options.freeInput&&(s(e,r.options.confirmKeys)||o)&&(0!==i.length&&(r.add(o?i.substr(0,r.options.maxChars):i),n.val("")),!1===r.options.cancelConfirmKeysOnEmpty&&e.preventDefault());var a=n.val().length;Math.ceil(a/5);n.attr("size",Math.max(this.inputSize,n.val().length))},r)),r.$container.on("click","[data-role=remove]",t.proxy(function(e){r.$element.attr("disabled")||r.remove(t(e.target).closest(".tag").data("item"))},r)),r.options.itemValue===a.itemValue&&("INPUT"===r.$element[0].tagName?r.add(r.$element.val()):t("option",r.$element).each(function(){r.add(t(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],n=this.$container[0];e&&e.parentNode!==n;)e=e.parentNode;return t(e)}},t.fn.tagsinput=function(n,i,r){var o=[];return this.each(function(){var s=t(this).data("tagsinput");if(s)if(n||i){if(s[n]!==undefined){if(3===s[n].length&&r!==undefined)var a=s[n](i,null,r);else var a=s[n](i);a!==undefined&&o.push(a)}}else o.push(s);else s=new e(this,n),t(this).data("tagsinput",s),o.push(s),"SELECT"===this.tagName&&t("option",t(this)).attr("selected","selected"),t(this).val(t(this).val())}),"string"==typeof n?o.length>1?o:o[0]:o},t.fn.tagsinput.Constructor=e;var l=t("<div />");t(function(){t("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),function(t,e,n,i){function r(e,n){this.element=t(e),this.settings=t.extend({},k,n),this._defaults=k,this._name=x,this.init()}function o(t){t.element.trigger("change")}function s(e){e.element.find("option").each(function(n,i){var r=t(i);void 0===r.data("original-index")&&r.data("original-index",e.elementCount++),void 0===r.data("_selected")&&r.data("_selected",!1)})}function a(e,n,i){e.element.find("option").each(function(r,o){var s=t(o);s.data("original-index")===n&&(s.prop("selected",i),i?(s.attr("data-sortindex",e.sortIndex),e.sortIndex++):s.removeAttr("data-sortindex"))})}function l(t,e){return t.replace(/\{(\d+)\}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})}function c(t){if(t.settings.infoText){var e=t.elements.select1.find("option").length,n=t.elements.select2.find("option").length,i=t.element.find("option").length-t.selectedElements,r=t.selectedElements,o="";o=0===i?t.settings.infoTextEmpty:e===i?l(t.settings.infoText,[e,i]):l(t.settings.infoTextFiltered,[e,i]),t.elements.info1.html(o),t.elements.box1.toggleClass("filtered",!(e===i||0===i)),o=0===r?t.settings.infoTextEmpty:n===r?l(t.settings.infoText,[n,r]):l(t.settings.infoTextFiltered,[n,r]),t.elements.info2.html(o),t.elements.box2.toggleClass("filtered",!(n===r||0===r))}}function u(e){e.selectedElements=0,e.elements.select1.empty(),e.elements.select2.empty(),e.element.find("option").each(function(n,i){var r=t(i);r.prop("selected")?(e.selectedElements++,e.elements.select2.append(r.clone(!0).prop("selected",r.data("_selected")))):e.elements.select1.append(r.clone(!0).prop("selected",r.data("_selected")))}),e.settings.showFilterInputs&&(h(e,1),h(e,2)),c(e)}function h(e,n){if(e.settings.showFilterInputs){d(e,n),e.elements["select"+n].empty().scrollTop(0);var i=new RegExp(t.trim(e.elements["filterInput"+n].val()),"gi"),r=e.element.find("option"),o=e.element;o=1===n?r.not(":selected"):o.find("option:selected"),o.each(function(o,s){var a=t(s),l=!0;(s.text.match(i)||e.settings.filterOnValues&&a.attr("value").match(i))&&(l=!1,e.elements["select"+n].append(a.clone(!0).prop("selected",a.data("_selected")))),r.eq(a.data("original-index")).data("filtered"+n,l)}),c(e)}}function d(e,n){var i=e.element.find("option");e.elements["select"+n].find("option").each(function(e,n){var r=t(n);i.eq(r.data("original-index")).data("_selected",r.prop("selected"))})}function f(t){var e=t.children("option");e.sort(function(t,e){var n=parseInt(t.getAttribute("data-sortindex")),i=parseInt(e.getAttribute("data-sortindex"));return n>i?1:n<i?-1:0}),e.detach().appendTo(t)}function p(e){e.find("option").sort(function(e,n){return t(e).data("original-index")>t(n).data("original-index")?1:-1}).appendTo(e)}function m(t){t.elements.select1.find("option").each(function(){t.element.find("option").data("_selected",!1)})}function g(e){"all"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect?"moved"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect||d(e,1):(d(e,1),d(e,2)),e.elements.select1.find("option:selected").each(function(n,i){var r=t(i);r.data("filtered1")||a(e,r.data("original-index"),!0)}),u(e),o(e),e.settings.sortByInputOrder?f(e.elements.select2):p(e.elements.select2)}function v(e){"all"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect?"moved"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect||d(e,2):(d(e,1),d(e,2)),e.elements.select2.find("option:selected").each(function(n,i){var r=t(i);r.data("filtered2")||a(e,r.data("original-index"),!1)}),u(e),o(e),p(e.elements.select1)}function y(e){"all"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect?"moved"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect||d(e,1):(d(e,1),d(e,2)),e.element.find("option").each(function(n,i){var r=t(i);r.data("filtered1")||(r.prop("selected",!0),r.attr("data-sortindex",e.sortIndex),e.sortIndex++)}),u(e),o(e)}function b(e){"all"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect?"moved"!==e.settings.preserveSelectionOnMove||e.settings.moveOnSelect||d(e,2):(d(e,1),d(e,2)),e.element.find("option").each(function(e,n){var i=t(n);i.data("filtered2")||(i.prop("selected",!1),i.removeAttr("data-sortindex"))}),u(e),o(e)}function w(t){t.elements.form.submit(function(e){t.elements.filterInput1.is(":focus")?(e.preventDefault(),t.elements.filterInput1.focusout()):t.elements.filterInput2.is(":focus")&&(e.preventDefault(),t.elements.filterInput2.focusout())}),t.element.on("bootstrapDualListbox.refresh",function(e,n){t.refresh(n)}),t.elements.filterClear1.on("click",function(){t.setNonSelectedFilter("",!0)}),t.elements.filterClear2.on("click",function(){t.setSelectedFilter("",!0)}),t.elements.moveButton.on("click",function(){g(t)}),t.elements.moveAllButton.on("click",function(){y(t)}),t.elements.removeButton.on("click",function(){v(t)}),t.elements.removeAllButton.on("click",function(){b(t)}),t.elements.filterInput1.on("change keyup",function(){h(t,1)}),t.elements.filterInput2.on("change keyup",function(){h(t,2)})}var x="bootstrapDualListbox",k={bootstrap2Compatible:!1,filterTextClear:"show all",filterPlaceHolder:"Filter",moveSelectedLabel:"Move selected",moveAllLabel:"Move all",removeSelectedLabel:"Remove selected",removeAllLabel:"Remove all",moveOnSelect:!0,preserveSelectionOnMove:!1,selectedListLabel:!1,nonSelectedListLabel:!1,helperSelectNamePostfix:"_helper",selectorMinimalHeight:100,showFilterInputs:!0,nonSelectedFilter:"",selectedFilter:"",infoText:"Showing all {0}",infoTextFiltered:'<span class="label label-warning">Filtered</span> {0} from {1}',infoTextEmpty:"Empty list",filterOnValues:!1,sortByInputOrder:!1},_=/android/i.test(navigator.userAgent.toLowerCase());r.prototype={init:function(){this.container=t('<div class="bootstrap-duallistbox-container"> <div class="box1">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn clear1 pull-right"></button>   </span>   <input class="filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn moveall">       <i></i>       <i></i>     </button>     <button type="button" class="btn move">       <i></i>     </button>   </div>   <select multiple="multiple"></select> </div> <div class="box2">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn clear2 pull-right"></button>   </span>   <input class="filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn remove">       <i></i>     </button>     <button type="button" class="btn removeall">       <i></i>       <i></i>     </button>   </div>   <select multiple="multiple"></select> </div></div>').insertBefore(this.element),this.elements={originalSelect:this.element,box1:t(".box1",this.container),box2:t(".box2",this.container),filterInput1:t(".box1 .filter",this.container),filterInput2:t(".box2 .filter",this.container),filterClear1:t(".box1 .clear1",this.container),filterClear2:t(".box2 .clear2",this.container),label1:t(".box1 > label",this.container),label2:t(".box2 > label",this.container),info1:t(".box1 .info",this.container),info2:t(".box2 .info",this.container),select1:t(".box1 select",this.container),select2:t(".box2 select",this.container),moveButton:t(".box1 .move",this.container),removeButton:t(".box2 .remove",this.container),moveAllButton:t(".box1 .moveall",this.container),removeAllButton:t(".box2 .removeall",this.container),form:t(t(".box1 .filter",this.container)[0].form)},this.originalSelectName=this.element.attr("name")||"";var e="bootstrap-duallistbox-nonselected-list_"+this.originalSelectName,n="bootstrap-duallistbox-selected-list_"+this.originalSelectName;return this.elements.select1.attr("id",e),this.elements.select2.attr("id",n),this.elements.label1.attr("for",e),this.elements.label2.attr("for",n),this.selectedElements=0,this.sortIndex=0,this.elementCount=0,this.setBootstrap2Compatible(this.settings.bootstrap2Compatible),this.setFilterTextClear(this.settings.filterTextClear),this.setFilterPlaceHolder(this.settings.filterPlaceHolder),this.setMoveSelectedLabel(this.settings.moveSelectedLabel),this.setMoveAllLabel(this.settings.moveAllLabel),this.setRemoveSelectedLabel(this.settings.removeSelectedLabel),this.setRemoveAllLabel(this.settings.removeAllLabel),this.setMoveOnSelect(this.settings.moveOnSelect),this.setPreserveSelectionOnMove(this.settings.preserveSelectionOnMove),this.setSelectedListLabel(this.settings.selectedListLabel),this.setNonSelectedListLabel(this.settings.nonSelectedListLabel),this.setHelperSelectNamePostfix(this.settings.helperSelectNamePostfix),this.setSelectOrMinimalHeight(this.settings.selectorMinimalHeight),s(this),this.setShowFilterInputs(this.settings.showFilterInputs),this.setNonSelectedFilter(this.settings.nonSelectedFilter),this.setSelectedFilter(this.settings.selectedFilter),this.setInfoText(this.settings.infoText),this.setInfoTextFiltered(this.settings.infoTextFiltered),this.setInfoTextEmpty(this.settings.infoTextEmpty),this.setFilterOnValues(this.settings.filterOnValues),this.setSortByInputOrder(this.settings.sortByInputOrder),this.element.hide(),w(this),u(this),this.element},setBootstrap2Compatible:function(t,e){return this.settings.bootstrap2Compatible=t,t?(this.container.removeClass("row").addClass("row-fluid bs2compatible"),this.container.find(".box1, .box2").removeClass("col-md-6").addClass("span6"),this.container.find(".clear1, .clear2").removeClass("btn-default btn-xs").addClass("btn-mini"),this.container.find("input, select").removeClass("form-control"),this.container.find(".btn").removeClass("btn-default"),this.container.find(".moveall > i, .move > i").removeClass("glyphicon glyphicon-arrow-right").addClass("icon-arrow-right"),this.container.find(".removeall > i, .remove > i").removeClass("glyphicon glyphicon-arrow-left").addClass("icon-arrow-left")):(this.container.removeClass("row-fluid bs2compatible").addClass("row"),this.container.find(".box1, .box2").removeClass("span6").addClass("col-md-6"),this.container.find(".clear1, .clear2").removeClass("btn-mini").addClass("btn-default btn-xs"),this.container.find("input, select").addClass("form-control"),this.container.find(".btn").addClass("btn-default"),this.container.find(".moveall > i, .move > i").removeClass("icon-arrow-right").addClass("glyphicon glyphicon-arrow-right"),this.container.find(".removeall > i, .remove > i").removeClass("icon-arrow-left").addClass("glyphicon glyphicon-arrow-left")),e&&u(this),this.element},setFilterTextClear:function(t,e){return this.settings.filterTextClear=t,this.elements.filterClear1.html(t),this.elements.filterClear2.html(t),e&&u(this),this.element},setFilterPlaceHolder:function(t,e){return this.settings.filterPlaceHolder=t,this.elements.filterInput1.attr("placeholder",t),this.elements.filterInput2.attr("placeholder",t),e&&u(this),this.element},setMoveSelectedLabel:function(t,e){return this.settings.moveSelectedLabel=t,this.elements.moveButton.attr("title",t),e&&u(this),this.element},setMoveAllLabel:function(t,e){return this.settings.moveAllLabel=t,this.elements.moveAllButton.attr("title",t),e&&u(this),this.element},setRemoveSelectedLabel:function(t,e){return this.settings.removeSelectedLabel=t,this.elements.removeButton.attr("title",t),e&&u(this),this.element},setRemoveAllLabel:function(t,e){return this.settings.removeAllLabel=t,this.elements.removeAllButton.attr("title",t),e&&u(this),this.element},setMoveOnSelect:function(t,e){if(_&&(t=!0),this.settings.moveOnSelect=t,this.settings.moveOnSelect){this.container.addClass("moveonselect");var n=this;this.elements.select1.on("change",function(){g(n)}),this.elements.select2.on("change",function(){v(n)})}else this.container.removeClass("moveonselect"),this.elements.select1.off("change"),this.elements.select2.off("change");return e&&u(this),this.element},setPreserveSelectionOnMove:function(t,e){return _&&(t=!1),this.settings.preserveSelectionOnMove=t,e&&u(this),this.element},setSelectedListLabel:function(t,e){return this.settings.selectedListLabel=t,t?this.elements.label2.show().html(t):this.elements.label2.hide().html(t),e&&u(this),this.element},setNonSelectedListLabel:function(t,e){return this.settings.nonSelectedListLabel=t,t?this.elements.label1.show().html(t):this.elements.label1.hide().html(t),e&&u(this),this.element},setHelperSelectNamePostfix:function(t,e){return this.settings.helperSelectNamePostfix=t,t?(this.elements.select1.attr("name",this.originalSelectName+t+"1"),this.elements.select2.attr("name",this.originalSelectName+t+"2")):(this.elements.select1.removeAttr("name"),this.elements.select2.removeAttr("name")),e&&u(this),this.element},setSelectOrMinimalHeight:function(t,e){this.settings.selectorMinimalHeight=t;var n=this.element.height();return this.element.height()<t&&(n=t),this.elements.select1.height(n),this.elements.select2.height(n),e&&u(this),this.element},setShowFilterInputs:function(t,e){return t?(this.elements.filterInput1.show(),this.elements.filterInput2.show()):(this.setNonSelectedFilter(""),this.setSelectedFilter(""),u(this),this.elements.filterInput1.hide(),this.elements.filterInput2.hide()),this.settings.showFilterInputs=t,e&&u(this),this.element},setNonSelectedFilter:function(t,e){if(this.settings.showFilterInputs)return this.settings.nonSelectedFilter=t,this.elements.filterInput1.val(t),e&&u(this),this.element},setSelectedFilter:function(t,e){if(this.settings.showFilterInputs)return this.settings.selectedFilter=t,this.elements.filterInput2.val(t),e&&u(this),this.element},setInfoText:function(t,e){return this.settings.infoText=t,e&&u(this),this.element},setInfoTextFiltered:function(t,e){return this.settings.infoTextFiltered=t,e&&u(this),this.element},setInfoTextEmpty:function(t,e){return this.settings.infoTextEmpty=t,e&&u(this),this.element},setFilterOnValues:function(t,e){return this.settings.filterOnValues=t,e&&u(this),this.element},setSortByInputOrder:function(t,e){return this.settings.sortByInputOrder=t,e&&u(this),this.element},getContainer:function(){return this.container},refresh:function(t){s(this),t?m(this):(d(this,1),d(this,2)),u(this)},destroy:function(){return this.container.remove(),this.element.show(),t.data(this,"plugin_"+x,null),this.element}},t.fn[x]=function(e){var n=arguments;if(e===i||"object"==typeof e)return this.each(function(){t(this).is("select")?t.data(this,"plugin_"+x)||t.data(this,"plugin_"+x,new r(this,e)):t(this).find("select").each(function(n,i){t(i).bootstrapDualListbox(e)})});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var o;return this.each(function(){var i=t.data(this,"plugin_"+x);i instanceof r&&"function"==typeof i[e]&&(o=i[e].apply(i,Array.prototype.slice.call(n,1)))}),o!==i?o:this}}}(jQuery,window,document),function(t,e){"use strict";"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):e(t.jQuery)}(this,function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"!=typeof this.options.autoSelect||this.options.autoSelect,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=t(this.options.menu),this.$appendTo=this.options.appendTo?t(this.options.appendTo):null,this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus&&this.options.showHintOnFocus,this.afterSelect=this.options.afterSelect,this.addItem=!1};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").data("value");if(this.$element.data("active",t),this.autoSelect||t){var e=this.updater(t);e||(e=""),this.$element.val(this.displayText(e)||e).change(),this.afterSelect(e)}return this.hide()},updater:function(t){return t},setSource:function(t){this.source=t},show:function(){var e,n=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});e="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight;var i;return i=this.shown?this.$menu:this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element),i.css({top:n.top+n.height+e,left:n.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(e){if(this.query=void 0!==e&&null!==e?e:this.$element.val()||"",this.query.length<this.options.minLength&&!this.options.showHintOnFocus)return this.shown?this.hide():this;var n=t.proxy(function(){t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(n,this.delay)},process:function(e){var n=this;return e=t.grep(e,function(t){return n.matcher(t)}),e=this.sorter(e),e.length||this.options.addItem?(e.length>0?this.$element.data("active",e[0]):this.$element.data("active",null),this.options.addItem&&e.push(this.options.addItem),"all"==this.options.items?this.render(e).show():this.render(e.slice(0,this.options.items)).show()):this.shown?this.hide():this},matcher:function(t){return~this.displayText(t).toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],i=[],r=[];e=t.shift();){var o=this.displayText(e);o.toLowerCase().indexOf(this.query.toLowerCase())?~o.indexOf(this.query)?i.push(e):r.push(e):n.push(e)}return n.concat(i,r)},highlighter:function(e){var n,i,r,o,s,a=t("<div></div>"),l=this.query,c=e.toLowerCase().indexOf(l.toLowerCase());if(0===(n=l.length))return a.text(e).html();for(;c>-1;)i=e.substr(0,c),r=e.substr(c,n),o=e.substr(c+n),s=t("<strong></strong>").text(r),a.append(document.createTextNode(i)).append(s),e=o,c=e.toLowerCase().indexOf(l.toLowerCase());return a.append(document.createTextNode(e)).html()},render:function(e){var n=this,i=this,r=!1,o=[],s=n.options.separator;return t.each(e,function(t,n){t>0&&n[s]!==e[t-1][s]&&o.push({__type:"divider"}),!n[s]||0!==t&&n[s]===e[t-1][s]||o.push({__type:"category",name:n[s]}),o.push(n)}),e=t(o).map(function(e,o){if("category"==(o.__type||!1))return t(n.options.headerHtml).text(o.name)[0];if("divider"==(o.__type||!1))return t(n.options.headerDivider)[0];var s=i.displayText(o);return e=t(n.options.item).data("value",o),e.find("a").html(n.highlighter(s,o)),s==i.$element.val()&&(e.addClass("active"),i.$element.data("active",o),r=!0),e[0]}),this.autoSelect&&!r&&(e.filter(":not(.dropdown-header)").first().addClass("active"),this.$element.data("active",e.first().data("value"))),this.$menu.html(e),this},displayText:function(t){return void 0!==t&&"undefined"!=typeof t.name&&t.name||t},next:function(){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("input",t.proxy(this.input,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this)).on("mousedown",t.proxy(this.mousedown,this))},mousedown:function(t){this.mouseddown=!0,t.stopPropagation(),t.preventDefault()},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("input").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown)switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:if(t.shiftKey)return;t.preventDefault(),this.prev();break;case 40:if(t.shiftKey)return;t.preventDefault(),this.next()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.shown||40!=e.keyCode?this.move(e):this.lookup()},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},input:function(t){this.lookup(),t.preventDefault()},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide()}t.preventDefault()},focus:function(){this.focused||(this.focused=!0,this.options.showHintOnFocus&&this.lookup())},blur:function(t){this.focused=!1,!this.mousedover&&this.shown&&(this.mouseddown&&t.originalEvent?this.mouseddown=!1:this.hide())},click:function(t){t.preventDefault(),this.select(),this.$element.focus(),this.hide()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1}};var n=t.fn.typeahead;t.fn.typeahead=function(n){var i=arguments;return"string"==typeof n&&"getActive"==n?this.data("active"):this.each(function(){var r=t(this),o=r.data("typeahead"),s="object"==typeof n&&n;o||r.data("typeahead",o=new e(this,s)),"string"==typeof n&&o[n]&&(i.length>1?o[n].apply(o,Array.prototype.slice.call(i,1)):o[n]())})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a class="dropdown-item" href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:t.noop,addItem:!1,delay:0,separator:"category",headerHtml:'<li class="dropdown-header"></li>',headerDivider:'<li class="divider" role="separator"></li>'},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}),function(t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else{if("function"==typeof define&&define.amd)return define([],t);this.CodeMirror=t()}}(function(){"use strict";function t(n,i){if(!(this instanceof t))return new t(n,i);this.options=i=i?mr(i):{},mr(Io,i,!1),p(i);var r=i.value;"string"==typeof r&&(r=new is(r,i.mode)),this.doc=r;var o=this.display=new e(n,r);o.wrapper.CodeMirror=this,u(this),l(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),i.autofocus&&!co&&Se(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new lr},Qr&&Jr<11&&setTimeout(gr(Ce,this,!0),20),Te(this),Er(),Jt(this),this.curOp.forceUpdate=!0,Li(this,r),i.autofocus&&!co||Cr()==o.input?setTimeout(gr(Ze,this),20):Qe(this);for(var s in No)No.hasOwnProperty(s)&&No[s](this,i[s],Oo);w(this);for(var a=0;a<zo.length;++a)zo[a](this);ee(this)}function e(t,e){var n=this,i=n.input=wr("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");to?i.style.width="1000px":i.setAttribute("wrap","off"),lo&&(i.style.border="1px solid black"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),i.setAttribute("spellcheck","false"),n.inputDiv=wr("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=wr("div",[wr("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=wr("div",[wr("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=wr("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=wr("div",null,"CodeMirror-gutter-filler"),n.lineDiv=wr("div",null,"CodeMirror-code"),n.selectionDiv=wr("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=wr("div",null,"CodeMirror-cursors"),n.measure=wr("div",null,"CodeMirror-measure"),n.lineMeasure=wr("div",null,"CodeMirror-measure"),n.lineSpace=wr("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=wr("div",[wr("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=wr("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=wr("div",null,null,"position: absolute; height: "+fs+"px; width: 1px;"),n.gutters=wr("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=wr("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=wr("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),Qr&&Jr<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),lo&&(i.style.width="0px"),to||(n.scroller.draggable=!0),oo&&(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"),Qr&&Jr<8&&(n.scrollbarH.style.minHeight=n.scrollbarV.style.minWidth="18px"),t.appendChild?t.appendChild(n.wrapper):t(n.wrapper),n.viewFrom=n.viewTo=e.first,n.view=[],n.externalMeasured=null,n.viewOffset=0,n.lastSizeC=0,n.updateLineNumbers=null,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new lr,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null}function n(e){e.doc.mode=t.getMode(e.options,e.doc.modeOption),i(e)}function i(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.frontier=t.doc.first,kt(t,100),t.state.modeGen++,t.curOp&&pe(t)}function r(t){t.options.lineWrapping?(Mr(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth=""):(Dr(t.display.wrapper,"CodeMirror-wrap"),f(t)),s(t),pe(t),Rt(t),setTimeout(function(){v(t)},100)}function o(t){var e=Zt(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/Qt(t.display)-3);return function(r){if(ni(t.doc,r))return 0;var o=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(o+=r.widgets[s].height);return n?o+(Math.ceil(r.text.length/i)||1)*e:o+e}}function s(t){var e=t.doc,n=o(t);e.iter(function(t){var e=n(t);e!=t.height&&Ii(t,e)})}function a(t){var e=Yo[t.options.keyMap],n=e.style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:"")}function l(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Rt(t)}function c(t){u(t),pe(t),setTimeout(function(){b(t)},20)}function u(t){var e=t.display.gutters,n=t.options.gutters;xr(e);for(var i=0;i<n.length;++i){var r=n[i],o=e.appendChild(wr("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=i?"":"none",h(t)}function h(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px",t.display.scrollbarH.style.left=t.options.fixedGutter?e+"px":0}function d(t){if(0==t.height)return 0;for(var e,n=t.text.length,i=t;e=Kn(i);){var r=e.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=t;e=Xn(i);){var r=e.find(0,!0);n-=i.text.length-r.from.ch,i=r.to.line,n+=i.text.length-r.to.ch}return n}function f(t){var e=t.display,n=t.doc;e.maxLine=Ei(n,n.first),e.maxLineLength=d(e.maxLine),e.maxLineChanged=!0,n.iter(function(t){var n=d(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)})}function p(t){var e=dr(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function m(t){return t.display.scroller.clientHeight-t.display.wrapper.clientHeight<fs-3}function g(t){var e=t.display.scroller;return{clientHeight:e.clientHeight,barHeight:t.display.scrollbarV.clientHeight,scrollWidth:e.scrollWidth,clientWidth:e.clientWidth,hScrollbarTakesSpace:m(t),barWidth:t.display.scrollbarH.clientWidth,docHeight:Math.round(t.doc.height+Mt(t.display))}}function v(t,e){e||(e=g(t));var n=t.display,i=$r(n.measure),r=e.docHeight+fs,o=e.scrollWidth>e.clientWidth
;o&&e.scrollWidth<=e.clientWidth+1&&i>0&&!e.hScrollbarTakesSpace&&(o=!1);var s=r>e.clientHeight;if(s?(n.scrollbarV.style.display="block",n.scrollbarV.style.bottom=o?i+"px":"0",n.scrollbarV.firstChild.style.height=Math.max(0,r-e.clientHeight+(e.barHeight||n.scrollbarV.clientHeight))+"px"):(n.scrollbarV.style.display="",n.scrollbarV.firstChild.style.height="0"),o?(n.scrollbarH.style.display="block",n.scrollbarH.style.right=s?i+"px":"0",n.scrollbarH.firstChild.style.width=e.scrollWidth-e.clientWidth+(e.barWidth||n.scrollbarH.clientWidth)+"px"):(n.scrollbarH.style.display="",n.scrollbarH.firstChild.style.width="0"),o&&s?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=n.scrollbarFiller.style.width=i+"px"):n.scrollbarFiller.style.display="",o&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i+"px",n.gutterFiller.style.width=n.gutters.offsetWidth+"px"):n.gutterFiller.style.display="",!t.state.checkedOverlayScrollbar&&e.clientHeight>0){if(0===i){var a=uo&&!so?"12px":"18px";n.scrollbarV.style.minWidth=n.scrollbarH.style.minHeight=a;var l=function(e){tr(e)!=n.scrollbarV&&tr(e)!=n.scrollbarH&&ce(t,$e)(e)};cs(n.scrollbarV,"mousedown",l),cs(n.scrollbarH,"mousedown",l)}t.state.checkedOverlayScrollbar=!0}}function y(t,e,n){var i=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;i=Math.floor(i-Dt(t));var r=n&&null!=n.bottom?n.bottom:i+t.wrapper.clientHeight,o=Oi(e,i),s=Oi(e,r);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;if(a<o)return{from:a,to:Oi(e,Pi(Ei(e,a))+t.wrapper.clientHeight)};if(Math.min(l,e.lastLine())>=s)return{from:Oi(e,Pi(Ei(e,l))-t.wrapper.clientHeight),to:l}}return{from:o,to:Math.max(s,o+1)}}function b(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=k(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,o=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){t.options.fixedGutter&&n[s].gutter&&(n[s].gutter.style.left=o);var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=i+r+"px")}}function w(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=x(t.options,e.first+e.size-1),i=t.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(wr("div",[wr("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s),i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",h(t),!0}return!1}function x(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function k(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function _(t,e,n){var i=t.display;this.viewport=e,this.visible=y(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.oldViewFrom=i.viewFrom,this.oldViewTo=i.viewTo,this.oldScrollerWidth=i.scroller.clientWidth,this.force=n,this.dims=A(t)}function C(t,e){var n=t.display,i=t.doc;if(e.editorIsHidden)return ge(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&0==we(t))return!1;w(t)&&(ge(t),e.dims=A(t));var r=i.first+i.size,o=Math.max(e.visible.from-t.options.viewportMargin,i.first),s=Math.min(r,e.visible.to+t.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(r,n.viewTo)),vo&&(o=ti(t.doc,o),s=ei(t.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastSizeC!=e.wrapperHeight;be(t,o,s),n.viewOffset=Pi(Ei(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var l=we(t);if(!a&&0==l&&!e.force&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=Cr();return l>4&&(n.lineDiv.style.display="none"),$(t,n.updateLineNumbers,e.dims),l>4&&(n.lineDiv.style.display=""),c&&Cr()!=c&&c.offsetHeight&&c.focus(),xr(n.cursorDiv),xr(n.selectionDiv),a&&(n.lastSizeC=e.wrapperHeight,kt(t,400)),n.updateLineNumbers=null,!0}function S(t,e){for(var n=(e.force,e.viewport),i=!0;;i=!1){if(i&&t.options.lineWrapping&&e.oldScrollerWidth!=t.display.scroller.clientWidth)!0;else if(!1,n&&null!=n.top&&(n={top:Math.min(t.doc.height+Mt(t.display)-fs-t.display.scroller.clientHeight,n.top)}),e.visible=y(t.display,t.doc,n),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!C(t,e))break;L(t);var r=g(t);yt(t),M(t,r),v(t,r)}nr(t,"update",t),t.display.viewFrom==e.oldViewFrom&&t.display.viewTo==e.oldViewTo||nr(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo)}function D(t,e){var n=new _(t,e);if(C(t,n)){L(t),S(t,n);var i=g(t);yt(t),M(t,i),v(t,i)}}function M(t,e){t.display.sizer.style.minHeight=t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=Math.max(e.docHeight,e.clientHeight-fs)+"px"}function T(t,e){t.display.sizer.offsetWidth+t.display.gutters.offsetWidth<t.display.scroller.clientWidth-1&&(t.display.sizer.style.minHeight=t.display.heightForcer.style.top="0px",t.display.gutters.style.height=e.docHeight+"px")}function L(t){for(var e=t.display,n=e.lineDiv.offsetTop,i=0;i<e.view.length;i++){var r,o=e.view[i];if(!o.hidden){if(Qr&&Jr<8){var s=o.node.offsetTop+o.node.offsetHeight;r=s-n,n=s}else{var a=o.node.getBoundingClientRect();r=a.bottom-a.top}var l=o.line.height-r;if(r<2&&(r=Zt(e)),(l>.001||l<-.001)&&(Ii(o.line,r),E(o.line),o.rest))for(var c=0;c<o.rest.length;c++)E(o.rest[c])}}}function E(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e)t.widgets[e].height=t.widgets[e].node.offsetHeight}function A(t){for(var e=t.display,n={},i={},r=e.gutters.clientLeft,o=e.gutters.firstChild,s=0;o;o=o.nextSibling,++s)n[t.options.gutters[s]]=o.offsetLeft+o.clientLeft+r,i[t.options.gutters[s]]=o.clientWidth;return{fixedPos:k(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function $(t,e,n){function i(e){var n=e.nextSibling;return to&&uo&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var r=t.display,o=t.options.lineNumbers,s=r.lineDiv,a=s.firstChild,l=r.view,c=r.viewFrom,u=0;u<l.length;u++){var h=l[u];if(h.hidden);else if(h.node){for(;a!=h.node;)a=i(a);var d=o&&null!=e&&e<=c&&h.lineNumber;h.changes&&(dr(h.changes,"gutter")>-1&&(d=!1),I(t,h,c,n)),d&&(xr(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(x(t.options,c)))),a=h.node.nextSibling}else{var f=j(t,h,c,n);s.insertBefore(f,a)}c+=h.size}for(;a;)a=i(a)}function I(t,e,n,i){for(var r=0;r<e.changes.length;r++){var o=e.changes[r];"text"==o?F(t,e):"gutter"==o?z(t,e,n,i):"class"==o?H(e):"widget"==o&&R(e,i)}e.changes=null}function N(t){return t.node==t.text&&(t.node=wr("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),Qr&&Jr<8&&(t.node.style.zIndex=2)),t.node}function O(t){var e=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),t.background)e?t.background.className=e:(t.background.parentNode.removeChild(t.background),t.background=null);else if(e){var n=N(t);t.background=n.insertBefore(wr("div",null,e),n.firstChild)}}function P(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):vi(t,e)}function F(t,e){var n=e.text.className,i=P(t,e);e.text==e.node&&(e.node=i.pre),e.text.parentNode.replaceChild(i.pre,e.text),e.text=i.pre,i.bgClass!=e.bgClass||i.textClass!=e.textClass?(e.bgClass=i.bgClass,e.textClass=i.textClass,H(e)):n&&(e.text.className=n)}function H(t){O(t),t.line.wrapClass?N(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var e=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=e||""}function z(t,e,n,i){e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null);var r=e.line.gutterMarkers;if(t.options.lineNumbers||r){var o=N(e),s=e.gutter=o.insertBefore(wr("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),e.text);if(!t.options.lineNumbers||r&&r["CodeMirror-linenumbers"]||(e.lineNumber=s.appendChild(wr("div",x(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),r)for(var a=0;a<t.options.gutters.length;++a){var l=t.options.gutters[a],c=r.hasOwnProperty(l)&&r[l];c&&s.appendChild(wr("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[l]+"px; width: "+i.gutterWidth[l]+"px"))}}}function R(t,e){t.alignable&&(t.alignable=null);for(var n,i=t.node.firstChild;i;i=n){var n=i.nextSibling;"CodeMirror-linewidget"==i.className&&t.node.removeChild(i)}W(t,e)}function j(t,e,n,i){var r=P(t,e);return e.text=e.node=r.pre,r.bgClass&&(e.bgClass=r.bgClass),r.textClass&&(e.textClass=r.textClass),H(e),z(t,e,n,i),W(e,i),e.node}function W(t,e){if(B(t.line,t,e,!0),t.rest)for(var n=0;n<t.rest.length;n++)B(t.rest[n],t,e,!1)}function B(t,e,n,i){if(t.widgets)for(var r=N(e),o=0,s=t.widgets;o<s.length;++o){var a=s[o],l=wr("div",[a.node],"CodeMirror-linewidget");a.handleMouseEvents||(l.ignoreEvents=!0),Y(a,l,e,n),i&&a.above?r.insertBefore(l,e.gutter||e.text):r.appendChild(l),nr(a,"redraw")}}function Y(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var r=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(r-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function U(t){return yo(t.line,t.ch)}function q(t,e){return bo(t,e)<0?e:t}function V(t,e){return bo(t,e)<0?t:e}function G(t,e){this.ranges=t,this.primIndex=e}function K(t,e){this.anchor=t,this.head=e}function X(t,e){var n=t[e];t.sort(function(t,e){return bo(t.from(),e.from())}),e=dr(t,n);for(var i=1;i<t.length;i++){var r=t[i],o=t[i-1];if(bo(o.to(),r.from())>=0){var s=V(o.from(),r.from()),a=q(o.to(),r.to()),l=o.empty()?r.from()==r.head:o.from()==o.head;i<=e&&--e,t.splice(--i,2,new K(l?a:s,l?s:a))}}return new G(t,e)}function Z(t,e){return new G([new K(t,e||t)],0)}function Q(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function J(t,e){if(e.line<t.first)return yo(t.first,0);var n=t.first+t.size-1;return e.line>n?yo(n,Ei(t,n).text.length):tt(e,Ei(t,e.line).text.length)}function tt(t,e){var n=t.ch;return null==n||n>e?yo(t.line,e):n<0?yo(t.line,0):t}function et(t,e){return e>=t.first&&e<t.first+t.size}function nt(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=J(t,e[i]);return n}function it(t,e,n,i){if(t.cm&&t.cm.display.shift||t.extend){var r=e.anchor;if(i){var o=bo(n,r)<0;o!=bo(i,r)<0?(r=n,n=i):o!=bo(n,i)<0&&(n=i)}return new K(r,n)}return new K(i||n,n)}function rt(t,e,n,i){ut(t,new G([it(t,t.sel.primary(),e,n)],0),i)}function ot(t,e,n){for(var i=[],r=0;r<t.sel.ranges.length;r++)i[r]=it(t,t.sel.ranges[r],e[r],null);ut(t,X(i,t.sel.primIndex),n)}function st(t,e,n,i){var r=t.sel.ranges.slice(0);r[e]=n,ut(t,X(r,t.sel.primIndex),i)}function at(t,e,n,i){ut(t,Z(e,n),i)}function lt(t,e){var n={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new K(J(t,e[n].anchor),J(t,e[n].head))}};return hs(t,"beforeSelectionChange",t,n),t.cm&&hs(t.cm,"beforeSelectionChange",t.cm,n),n.ranges!=e.ranges?X(n.ranges,n.ranges.length-1):e}function ct(t,e,n){var i=t.history.done,r=hr(i);r&&r.ranges?(i[i.length-1]=e,ht(t,e,n)):ut(t,e,n)}function ut(t,e,n){ht(t,e,n),Yi(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function ht(t,e,n){(sr(t,"beforeSelectionChange")||t.cm&&sr(t.cm,"beforeSelectionChange"))&&(e=lt(t,e)),dt(t,pt(t,e,n&&n.bias||(bo(e.primary().head,t.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!t.cm||bn(t.cm)}function dt(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,or(t.cm)),nr(t,"cursorActivity",t))}function ft(t){dt(t,pt(t,t.sel,null,!1),ms)}function pt(t,e,n,i){for(var r,o=0;o<e.ranges.length;o++){var s=e.ranges[o],a=mt(t,s.anchor,n,i),l=mt(t,s.head,n,i);(r||a!=s.anchor||l!=s.head)&&(r||(r=e.ranges.slice(0,o)),r[o]=new K(a,l))}return r?X(r,e.primIndex):e}function mt(t,e,n,i){var r=!1,o=e,s=n||1;t.cantEdit=!1;t:for(;;){var a=Ei(t,o.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(u.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(i&&(hs(u,"beforeCursorEnter"),u.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!u.atomic)continue;var h=u.find(s<0?-1:1);if(0==bo(h,o)&&(h.ch+=s,h.ch<0?h=h.line>t.first?J(t,yo(h.line-1)):null:h.ch>a.text.length&&(h=h.line<t.first+t.size-1?yo(h.line+1,0):null),!h)){if(r)return i?(t.cantEdit=!0,yo(t.first,0)):mt(t,e,n,!0);r=!0,h=e,s=-s}o=h;continue t}}return o}}function gt(t){for(var e=t.display,n=t.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++){var a=n.sel.ranges[s],l=a.empty();(l||t.options.showCursorWhenSelecting)&&bt(t,a,r),l||wt(t,a,o)}if(t.options.moveInputWithCursor){var c=qt(t,n.sel.primary().head,"div"),u=e.wrapper.getBoundingClientRect(),h=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,c.top+h.top-u.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,c.left+h.left-u.left))}return i}function vt(t,e){kr(t.display.cursorDiv,e.cursors),kr(t.display.selectionDiv,e.selection),null!=e.teTop&&(t.display.inputDiv.style.top=e.teTop+"px",t.display.inputDiv.style.left=e.teLeft+"px")}function yt(t){vt(t,gt(t))}function bt(t,e,n){var i=qt(t,e.head,"div",null,null,!t.options.singleCursorHeightPerLine),r=n.appendChild(wr("div","\xa0","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*t.options.cursorHeight+"px",i.other){var o=n.appendChild(wr("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function wt(t,e,n){function i(t,e,n,i){e<0&&(e=0),e=Math.round(e),i=Math.round(i),a.appendChild(wr("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==n?u-t:n)+"px; height: "+(i-e)+"px"))}function r(e,n,r){function o(n,i){return Ut(t,yo(e,n),"div",h,i)}var a,l,h=Ei(s,e),d=h.text.length;return Pr(Fi(h),n||0,null==r?d:r,function(t,e,s){var h,f,p,m=o(t,"left");if(t==e)h=m,f=p=m.left;else{if(h=o(e-1,"right"),"rtl"==s){var g=m;m=h,h=g}f=m.left,p=h.right}null==n&&0==t&&(f=c),h.top-m.top>3&&(i(f,m.top,null,m.bottom),f=c,m.bottom<h.top&&i(f,m.bottom,null,h.top)),null==r&&e==d&&(p=u),(!a||m.top<a.top||m.top==a.top&&m.left<a.left)&&(a=m),(!l||h.bottom>l.bottom||h.bottom==l.bottom&&h.right>l.right)&&(l=h),f<c+1&&(f=c),i(f,h.top,p-f,h.bottom)}),{start:a,end:l}}var o=t.display,s=t.doc,a=document.createDocumentFragment(),l=Tt(t.display),c=l.left,u=o.lineSpace.offsetWidth-l.right,h=e.from(),d=e.to();if(h.line==d.line)r(h.line,h.ch,d.ch);else{var f=Ei(s,h.line),p=Ei(s,d.line),m=Qn(f)==Qn(p),g=r(h.line,h.ch,m?f.text.length+1:null).end,v=r(d.line,m?0:null,d.ch).start;m&&(g.top<v.top-2?(i(g.right,g.top,null,g.bottom),i(c,v.top,v.left,v.bottom)):i(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&i(c,g.bottom,null,v.top)}n.appendChild(a)}function xt(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){e.cursorDiv.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function kt(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.viewTo&&t.state.highlight.set(e,gr(_t,t))}function _t(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,i=jo(e.mode,St(t,e.frontier)),r=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.viewTo+500),function(o){if(e.frontier>=t.display.viewFrom){var s=o.styles,a=fi(t,o,i,!0);o.styles=a.styles;var l=o.styleClasses,c=a.classes;c?o.styleClasses=c:l&&(o.styleClasses=null);for(var u=!s||s.length!=o.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),h=0;!u&&h<s.length;++h)u=s[h]!=o.styles[h];u&&r.push(e.frontier),o.stateAfter=jo(e.mode,i)}else mi(t,o.text,i),o.stateAfter=e.frontier%5==0?jo(e.mode,i):null;if(++e.frontier,+new Date>n)return kt(t,t.options.workDelay),!0}),r.length&&le(t,function(){for(var e=0;e<r.length;e++)me(t,r[e],"text")})}}function Ct(t,e,n){for(var i,r,o=t.doc,s=n?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>s;--a){if(a<=o.first)return o.first;var l=Ei(o,a-1);if(l.stateAfter&&(!n||a<=o.frontier))return a;var c=ys(l.text,null,t.options.tabSize);(null==r||i>c)&&(r=a-1,i=c)}return r}function St(t,e,n){var i=t.doc,r=t.display;if(!i.mode.startState)return!0;var o=Ct(t,e,n),s=o>i.first&&Ei(i,o-1).stateAfter;return s=s?jo(i.mode,s):Wo(i.mode),i.iter(o,e,function(n){mi(t,n.text,s);var a=o==e-1||o%5==0||o>=r.viewFrom&&o<r.viewTo;n.stateAfter=a?jo(i.mode,s):null,++o}),n&&(i.frontier=o),s}function Dt(t){return t.lineSpace.offsetTop}function Mt(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Tt(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=kr(t.measure,wr("pre","x")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(t.cachedPaddingH=i),i}function Lt(t,e,n){var i=t.options.lineWrapping,r=i&&t.display.scroller.clientWidth;if(!e.measure.heights||i&&e.measure.width!=r){var o=e.measure.heights=[];if(i){e.measure.width=r;for(var s=e.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Et(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(var i=0;i<t.rest.length;i++)if(Ni(t.rest[i])>n)return{map:t.measure.maps[i],cache:t.measure.caches[i],before:!0}}function At(t,e){e=Qn(e);var n=Ni(e),i=t.display.externalMeasured=new de(t.doc,e,n);i.lineN=n;var r=i.built=vi(t,i);return i.text=r.pre,kr(t.display.lineMeasure,r.pre),i}function $t(t,e,n,i){return Ot(t,Nt(t,e),n,i)}function It(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[ve(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function Nt(t,e){var n=Ni(e),i=It(t,n);i&&!i.text?i=null:i&&i.changes&&I(t,i,n,A(t)),i||(i=At(t,e));var r=Et(i,e,n);return{line:e,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Ot(t,e,n,i,r){e.before&&(n=-1);var o,s=n+(i||"");return e.cache.hasOwnProperty(s)?o=e.cache[s]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(Lt(t,e.view,e.rect),e.hasHeights=!0),o=Pt(t,e,n,i),o.bogus||(e.cache[s]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}function Pt(t,e,n,i){for(var r,o,s,a,l=e.map,c=0;c<l.length;c+=3){var u=l[c],h=l[c+1];if(n<u?(o=0,s=1,a="left"):n<h?(o=n-u,s=o+1):(c==l.length-3||n==h&&l[c+3]>n)&&(s=h-u,o=s-1,n>=h&&(a="right")),null!=o){if(r=l[c+2],u==h&&i==(r.insertLeft?"left":"right")&&(a=i),"left"==i&&0==o)for(;c&&l[c-2]==l[c-3]&&l[c-1].insertLeft;)r=l[2+(c-=3)],a="left";if("right"==i&&o==h-u)for(;c<l.length-3&&l[c+3]==l[c+4]&&!l[c+5].insertLeft;)r=l[(c+=3)+2],a="right";break}}var d;if(3==r.nodeType){for(var c=0;c<4;c++){for(;o&&br(e.line.text.charAt(u+o));)--o;for(;u+s<h&&br(e.line.text.charAt(u+s));)++s;if(Qr&&Jr<9&&0==o&&s==h-u)d=r.parentNode.getBoundingClientRect();else if(Qr&&t.options.lineWrapping){var f=xs(r,o,s).getClientRects();d=f.length?f["right"==i?f.length-1:0]:_o}else d=xs(r,o,s).getBoundingClientRect()||_o;if(d.left||d.right||0==o)break;s=o,o-=1,a="right"}Qr&&Jr<11&&(d=Ft(t.display.measure,d))}else{o>0&&(a=i="right");var f;d=t.options.lineWrapping&&(f=r.getClientRects()).length>1?f["right"==i?f.length-1:0]:r.getBoundingClientRect()}if(Qr&&Jr<9&&!o&&(!d||!d.left&&!d.right)){var p=r.parentNode.getClientRects()[0];d=p?{left:p.left,right:p.left+Qt(t.display),top:p.top,bottom:p.bottom}:_o}for(var m=d.top-e.rect.top,g=d.bottom-e.rect.top,v=(m+g)/2,y=e.view.measure.heights,c=0;c<y.length-1&&!(v<y[c]);c++);var b=c?y[c-1]:0,w=y[c],x={left:("right"==a?d.right:d.left)-e.rect.left,right:("left"==a?d.left:d.right)-e.rect.left,top:b,bottom:w};return d.left||d.right||(x.bogus=!0),t.options.singleCursorHeightPerLine||(x.rtop=m,x.rbottom=g),x}function Ft(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Or(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*i,bottom:e.bottom*i}}function Ht(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function zt(t){t.display.externalMeasure=null,xr(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Ht(t.display.view[e])}function Rt(t){zt(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function jt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Wt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Bt(t,e,n,i){if(e.widgets)for(var r=0;r<e.widgets.length;++r)if(e.widgets[r].above){var o=oi(e.widgets[r]);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=Pi(e);if("local"==i?s+=Dt(t.display):s-=t.display.viewOffset,"page"==i||"window"==i){var a=t.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==i?0:Wt());var l=a.left+("window"==i?0:jt());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function Yt(t,e,n){if("div"==n)return e;var i=e.left,r=e.top;if("page"==n)i-=jt(),r-=Wt();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var s=t.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:r-s.top}}function Ut(t,e,n,i,r){return i||(i=Ei(t.doc,e.line)),Bt(t,i,$t(t,i,e.ch,r),n)}function qt(t,e,n,i,r,o){function s(e,s){var a=Ot(t,r,e,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,Bt(t,i,a,n)}function a(t,e){var n=l[e],i=n.level%2;return t==Fr(n)&&e&&n.level<l[e-1].level?(n=l[--e],t=Hr(n)-(n.level%2?0:1),i=!0):t==Hr(n)&&e<l.length-1&&n.level<l[e+1].level&&(n=l[++e],t=Fr(n)-n.level%2,i=!1),i&&t==n.to&&t>n.from?s(t-1):s(t,i)}i=i||Ei(t.doc,e.line),r||(r=Nt(t,i));var l=Fi(i),c=e.ch;if(!l)return s(c);var u=Ur(l,c),h=a(c,u);return null!=Os&&(h.other=a(c,Os)),h}function Vt(t,e){var n=0,e=J(t.doc,e);t.options.lineWrapping||(n=Qt(t.display)*e.ch);var i=Ei(t.doc,e.line),r=Pi(i)+Dt(t.display);return{left:n,right:n,top:r,bottom:r+i.height}}function Gt(t,e,n,i){var r=yo(t,e);return r.xRel=i,n&&(r.outside=!0),r}function Kt(t,e,n){var i=t.doc;if((n+=t.display.viewOffset)<0)return Gt(i.first,0,!0,-1);var r=Oi(i,n),o=i.first+i.size-1;if(r>o)return Gt(i.first+i.size-1,Ei(i,o).text.length,!0,1);e<0&&(e=0);for(var s=Ei(i,r);;){var a=Xt(t,s,r,e,n),l=Xn(s),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;r=Ni(s=c.to.line)}}function Xt(t,e,n,i,r){function o(i){var r=qt(t,yo(n,i),"line",e,c);return a=!0,s>r.bottom?r.left-l:s<r.top?r.left+l:(a=!1,r.left)}var s=r-Pi(e),a=!1,l=2*t.display.wrapper.clientWidth,c=Nt(t,e),u=Fi(e),h=e.text.length,d=zr(e),f=Rr(e),p=o(d),m=a,g=o(f),v=a;if(i>g)return Gt(n,f,v,1);for(;;){if(u?f==d||f==Vr(e,d,1):f-d<=1){for(var y=i<p||i-p<=g-i?d:f,b=i-(y==d?p:g);br(e.text.charAt(y));)++y;return Gt(n,y,y==d?m:v,b<-1?-1:b>1?1:0)}var w=Math.ceil(h/2),x=d+w;if(u){x=d;for(var k=0;k<w;++k)x=Vr(e,x,1)}var _=o(x);_>i?(f=x,g=_,(v=a)&&(g+=1e3),h=w):(d=x,p=_,m=a,h-=w)}}function Zt(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==wo){wo=wr("pre");for(var e=0;e<49;++e)wo.appendChild(document.createTextNode("x")),wo.appendChild(wr("br"));wo.appendChild(document.createTextNode("x"))}kr(t.measure,wo);var n=wo.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),xr(t.measure),n||1}function Qt(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=wr("span","xxxxxxxxxx"),n=wr("pre",[e]);kr(t.measure,n);var i=e.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(t.cachedCharWidth=r),r||10}function Jt(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++So},Co?Co.ops.push(t.curOp):t.curOp.ownsGroup=Co={ops:[t.curOp],delayedCallbacks:[]}}function te(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n]();for(var i=0;i<t.ops.length;i++){var r=t.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++](r.cm)}}while(n<e.length)}function ee(t){var e=t.curOp,n=e.ownsGroup;if(n)try{te(n)}finally{Co=null;for(var i=0;i<n.ops.length;i++)n.ops[i].cm.curOp=null;ne(n)}}function ne(t){for(var e=t.ops,n=0;n<e.length;n++)ie(e[n]);for(var n=0;n<e.length;n++)re(e[n]);for(var n=0;n<e.length;n++)oe(e[n]);for(var n=0;n<e.length;n++)se(e[n]);for(var n=0;n<e.length;n++)ae(e[n])}function ie(t){var e=t.cm,n=e.display;t.updateMaxLine&&f(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new _(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function re(t){t.updatedDisplay=t.mustUpdate&&C(t.cm,t.update)}function oe(t){var e=t.cm,n=e.display;t.updatedDisplay&&L(e),t.barMeasure=g(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=$t(e,n.maxLine,n.maxLine.text.length).left+3,t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo+fs-n.scroller.clientWidth)),(t.updatedDisplay||t.selectionChanged)&&(t.newSelectionNodes=gt(e))}function se(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&je(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1),t.newSelectionNodes&&vt(e,t.newSelectionNodes),t.updatedDisplay&&M(e,t.barMeasure),(t.updatedDisplay||t.startHeight!=e.doc.height)&&v(e,t.barMeasure),t.selectionChanged&&xt(e),e.state.focused&&t.updateInput&&Ce(e,t.typing)}function ae(t){var e=t.cm,n=e.display,i=e.doc;if(null!=t.adjustWidthTo&&Math.abs(t.barMeasure.scrollWidth-e.display.scroller.scrollWidth)>1&&v(e),t.updatedDisplay&&S(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&(n.scroller.scrollTop!=t.scrollTop||t.forceScroll)){var r=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,t.scrollTop));n.scroller.scrollTop=n.scrollbarV.scrollTop=i.scrollTop=r}if(null!=t.scrollLeft&&(n.scroller.scrollLeft!=t.scrollLeft||t.forceScroll)){var o=Math.max(0,Math.min(n.scroller.scrollWidth-n.scroller.clientWidth,t.scrollLeft));n.scroller.scrollLeft=n.scrollbarH.scrollLeft=i.scrollLeft=o,b(e)}if(t.scrollToPos){var s=mn(e,J(i,t.scrollToPos.from),J(i,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&pn(e,s)}var a=t.maybeHiddenMarkers,l=t.maybeUnhiddenMarkers;if(a)for(var c=0;c<a.length;++c)a[c].lines.length||hs(a[c],"hide");if(l)for(var c=0;c<l.length;++c)l[c].lines.length&&hs(l[c],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=e.display.scroller.scrollTop),t.updatedDisplay&&to&&(e.options.lineWrapping&&T(e,t.barMeasure),t.barMeasure.scrollWidth>t.barMeasure.clientWidth&&t.barMeasure.scrollWidth<t.barMeasure.clientWidth+1&&!m(e)&&v(e)),t.changeObjs&&hs(e,"changes",e,t.changeObjs)}function le(t,e){if(t.curOp)return e();Jt(t);try{return e()}finally{ee(t)}}function ce(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Jt(t);try{return e.apply(t,arguments)}finally{ee(t)}}}function ue(t){return function(){if(this.curOp)return t.apply(this,arguments);Jt(this);try{return t.apply(this,arguments)}finally{ee(this)}}}function he(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Jt(e);try{return t.apply(this,arguments)}finally{ee(e)}}}function de(t,e,n){this.line=e,this.rest=Jn(e),this.size=this.rest?Ni(hr(this.rest))-n+1:1,this.node=this.text=null,this.hidden=ni(t,e)}function fe(t,e,n){for(var i,r=[],o=e;o<n;o=i){var s=new de(t.doc,Ei(t.doc,o),o);i=o+s.size,r.push(s)}return r}function pe(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),i||(i=0);var r=t.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)vo&&ti(t.doc,e)<r.viewTo&&ge(t);else if(n<=r.viewFrom)vo&&ei(t.doc,n+i)>r.viewFrom?ge(t):(r.viewFrom+=i,r.viewTo+=i);else if(e<=r.viewFrom&&n>=r.viewTo)ge(t);else if(e<=r.viewFrom){var o=ye(t,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):ge(t)}else if(n>=r.viewTo){var o=ye(t,e,e,-1);o?(r.view=r.view.slice(0,o.index),r.viewTo=o.lineN):ge(t)}else{var s=ye(t,e,e,-1),a=ye(t,n,n+i,1);s&&a?(r.view=r.view.slice(0,s.index).concat(fe(t,s.lineN,a.lineN)).concat(r.view.slice(a.index)),r.viewTo+=i):ge(t)}var l=r.externalMeasured;l&&(n<l.lineN?l.lineN+=i:e<l.lineN+l.size&&(r.externalMeasured=null))}function me(t,e,n){t.curOp.viewChanged=!0;var i=t.display,r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size&&(i.externalMeasured=null),!(e<i.viewFrom||e>=i.viewTo)){var o=i.view[ve(t,e)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==dr(s,n)&&s.push(n)}}}function ge(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function ve(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,i=0;i<n.length;i++)if((e-=n[i].size)<0)return i}function ye(t,e,n,i){var r,o=ve(t,e),s=t.display.view;if(!vo||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var a=0,l=t.display.viewFrom;a<o;a++)l+=s[a].size;if(l!=e){if(i>0){if(o==s.length-1)return null;r=l+s[o].size-e,o++}else r=l-e;e+=r,n+=r}for(;ti(t.doc,n)!=n;){if(o==(i<0?0:s.length-1))return null;n+=i*s[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function be(t,e,n){var i=t.display;0==i.view.length||e>=i.viewTo||n<=i.viewFrom?(i.view=fe(t,e,n),i.viewFrom=e):(i.viewFrom>e?i.view=fe(t,e,i.viewFrom).concat(i.view):i.viewFrom<e&&(i.view=i.view.slice(ve(t,e))),i.viewFrom=e,i.viewTo<n?i.view=i.view.concat(fe(t,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,ve(t,n)))),i.viewTo=n}function we(t){for(var e=t.display.view,n=0,i=0;i<e.length;i++){var r=e[i];r.hidden||r.node&&!r.changes||++n}return n}function xe(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){_e(t),t.state.focused&&xe(t)})}function ke(t){function e(){_e(t)||n?(t.display.pollingFast=!1,xe(t)):(n=!0,t.display.poll.set(60,e))}var n=!1;t.display.pollingFast=!0,t.display.poll.set(20,e)}function _e(t){var e=t.display.input,n=t.display.prevInput,i=t.doc;if(!t.state.focused||As(e)&&!n||Me(t)||t.options.disableInput)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(e.value=e.value.substring(0,e.value.length-1),t.state.fakedLastChar=!1);var r=e.value;if(r==n&&!t.somethingSelected())return!1;if(Qr&&Jr>=9&&t.display.inputHasSelection===r||uo&&/[\uf700-\uf7ff]/.test(r))return Ce(t),!1;var o=!t.curOp;o&&Jt(t),t.display.shift=!1,8203!=r.charCodeAt(0)||i.sel!=t.display.selForContextMenu||n||(n="\u200b");for(var s=0,a=Math.min(n.length,r.length);s<a&&n.charCodeAt(s)==r.charCodeAt(s);)++s;var l=r.slice(s),c=Es(l),u=null;t.state.pasteIncoming&&i.sel.ranges.length>1&&(Do&&Do.join("\n")==l?u=i.sel.ranges.length%Do.length==0&&fr(Do,Es):c.length==i.sel.ranges.length&&(u=fr(c,function(t){return[t]})));for(var h=i.sel.ranges.length-1;h>=0;h--){var d=i.sel.ranges[h],f=d.from(),p=d.to();s<n.length?f=yo(f.line,f.ch-(n.length-s)):t.state.overwrite&&d.empty()&&!t.state.pasteIncoming&&(p=yo(p.line,Math.min(Ei(i,p.line).text.length,p.ch+hr(c).length)));var m=t.curOp.updateInput,g={from:f,to:p,text:u?u[h%u.length]:c,
origin:t.state.pasteIncoming?"paste":t.state.cutIncoming?"cut":"+input"};if(an(t.doc,g),nr(t,"inputRead",t,g),l&&!t.state.pasteIncoming&&t.options.electricChars&&t.options.smartIndent&&d.head.ch<100&&(!h||i.sel.ranges[h-1].head.line!=d.head.line)){var v=t.getModeAt(d.head),y=$o(g);if(v.electricChars){for(var b=0;b<v.electricChars.length;b++)if(l.indexOf(v.electricChars.charAt(b))>-1){xn(t,y.line,"smart");break}}else v.electricInput&&v.electricInput.test(Ei(i,y.line).text.slice(0,y.ch))&&xn(t,y.line,"smart")}}return bn(t),t.curOp.updateInput=m,t.curOp.typing=!0,r.length>1e3||r.indexOf("\n")>-1?e.value=t.display.prevInput="":t.display.prevInput=r,o&&ee(t),t.state.pasteIncoming=t.state.cutIncoming=!1,!0}function Ce(t,e){var n,i,r=t.doc;if(t.somethingSelected()){t.display.prevInput="";var o=r.sel.primary();n=$s&&(o.to().line-o.from().line>100||(i=t.getSelection()).length>1e3);var s=n?"-":i||t.getSelection();t.display.input.value=s,t.state.focused&&ws(t.display.input),Qr&&Jr>=9&&(t.display.inputHasSelection=s)}else e||(t.display.prevInput=t.display.input.value="",Qr&&Jr>=9&&(t.display.inputHasSelection=null));t.display.inaccurateSelection=n}function Se(t){"nocursor"==t.options.readOnly||co&&Cr()==t.display.input||t.display.input.focus()}function De(t){t.state.focused||(Se(t),Ze(t))}function Me(t){return t.options.readOnly||t.doc.cantEdit}function Te(t){function e(){t.state.focused&&setTimeout(gr(Se,t),0)}function n(e){rr(t,e)||ls(e)}function i(e){if(t.somethingSelected())Do=t.getSelections(),r.inaccurateSelection&&(r.prevInput="",r.inaccurateSelection=!1,r.input.value=Do.join("\n"),ws(r.input));else{for(var n=[],i=[],o=0;o<t.doc.sel.ranges.length;o++){var s=t.doc.sel.ranges[o].head.line,a={anchor:yo(s,0),head:yo(s+1,0)};i.push(a),n.push(t.getRange(a.anchor,a.head))}"cut"==e.type?t.setSelections(i,null,ms):(r.prevInput="",r.input.value=n.join("\n"),ws(r.input)),Do=n}"cut"==e.type&&(t.state.cutIncoming=!0)}var r=t.display;cs(r.scroller,"mousedown",ce(t,$e)),Qr&&Jr<11?cs(r.scroller,"dblclick",ce(t,function(e){if(!rr(t,e)){var n=Ae(t,e);if(n&&!Fe(t,e)&&!Ee(t.display,e)){ss(e);var i=t.findWordAt(n);rt(t.doc,i.anchor,i.head)}}})):cs(r.scroller,"dblclick",function(e){rr(t,e)||ss(e)}),cs(r.lineSpace,"selectstart",function(t){Ee(r,t)||ss(t)}),mo||cs(r.scroller,"contextmenu",function(e){Je(t,e)}),cs(r.scroller,"scroll",function(){r.scroller.clientHeight&&(Re(t,r.scroller.scrollTop),je(t,r.scroller.scrollLeft,!0),hs(t,"scroll",t))}),cs(r.scrollbarV,"scroll",function(){r.scroller.clientHeight&&Re(t,r.scrollbarV.scrollTop)}),cs(r.scrollbarH,"scroll",function(){r.scroller.clientHeight&&je(t,r.scrollbarH.scrollLeft)}),cs(r.scroller,"mousewheel",function(e){We(t,e)}),cs(r.scroller,"DOMMouseScroll",function(e){We(t,e)}),cs(r.scrollbarH,"mousedown",e),cs(r.scrollbarV,"mousedown",e),cs(r.wrapper,"scroll",function(){r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),cs(r.input,"keyup",function(e){Ke.call(t,e)}),cs(r.input,"input",function(){Qr&&Jr>=9&&t.display.inputHasSelection&&(t.display.inputHasSelection=null),ke(t)}),cs(r.input,"keydown",ce(t,Ve)),cs(r.input,"keypress",ce(t,Xe)),cs(r.input,"focus",gr(Ze,t)),cs(r.input,"blur",gr(Qe,t)),t.options.dragDrop&&(cs(r.scroller,"dragstart",function(e){ze(t,e)}),cs(r.scroller,"dragenter",n),cs(r.scroller,"dragover",n),cs(r.scroller,"drop",ce(t,He))),cs(r.scroller,"paste",function(e){Ee(r,e)||(t.state.pasteIncoming=!0,Se(t),ke(t))}),cs(r.input,"paste",function(){if(to&&!t.state.fakedLastChar&&!(new Date-t.state.lastMiddleDown<200)){var e=r.input.selectionStart,n=r.input.selectionEnd;r.input.value+="$",r.input.selectionEnd=n,r.input.selectionStart=e,t.state.fakedLastChar=!0}t.state.pasteIncoming=!0,ke(t)}),cs(r.input,"cut",i),cs(r.input,"copy",i),oo&&cs(r.sizer,"mouseup",function(){Cr()==r.input&&r.input.blur(),Se(t)})}function Le(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,t.setSize()}function Ee(t,e){for(var n=tr(e);n!=t.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==t.sizer&&n!=t.mover)return!0}function Ae(t,e,n,i){var r=t.display;if(!n){var o=tr(e);if(o==r.scrollbarH||o==r.scrollbarV||o==r.scrollbarFiller||o==r.gutterFiller)return null}var s,a,l=r.lineSpace.getBoundingClientRect();try{s=e.clientX-l.left,a=e.clientY-l.top}catch(e){return null}var c,u=Kt(t,s,a);if(i&&1==u.xRel&&(c=Ei(t.doc,u.line).text).length==u.ch){var h=ys(c,c.length,t.options.tabSize)-c.length;u=yo(u.line,Math.max(0,Math.round((s-Tt(t.display).left)/Qt(t.display))-h))}return u}function $e(t){if(!rr(this,t)){var e=this,n=e.display;if(n.shift=t.shiftKey,Ee(n,t))return void(to||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100)));if(!Fe(e,t)){var i=Ae(e,t);switch(window.focus(),er(t)){case 1:i?Ie(e,t,i):tr(t)==n.scroller&&ss(t);break;case 2:to&&(e.state.lastMiddleDown=+new Date),i&&rt(e.doc,i),setTimeout(gr(Se,e),20),ss(t);break;case 3:mo&&Je(e,t)}}}}function Ie(t,e,n){setTimeout(gr(De,t),0);var i,r=+new Date;ko&&ko.time>r-400&&0==bo(ko.pos,n)?i="triple":xo&&xo.time>r-400&&0==bo(xo.pos,n)?(i="double",ko={time:r,pos:n}):(i="single",xo={time:r,pos:n});var o=t.doc.sel,s=uo?e.metaKey:e.ctrlKey;t.options.dragDrop&&Ls&&!Me(t)&&"single"==i&&o.contains(n)>-1&&o.somethingSelected()?Ne(t,e,n,s):Oe(t,e,n,i,s)}function Ne(t,e,n,i){var r=t.display,o=ce(t,function(s){to&&(r.scroller.draggable=!1),t.state.draggingText=!1,us(document,"mouseup",o),us(r.scroller,"drop",o),Math.abs(e.clientX-s.clientX)+Math.abs(e.clientY-s.clientY)<10&&(ss(s),i||rt(t.doc,n),Se(t),Qr&&9==Jr&&setTimeout(function(){document.body.focus(),Se(t)},20))});to&&(r.scroller.draggable=!0),t.state.draggingText=o,r.scroller.dragDrop&&r.scroller.dragDrop(),cs(document,"mouseup",o),cs(r.scroller,"drop",o)}function Oe(t,e,n,i,r){function o(e){if(0!=bo(m,e))if(m=e,"rect"==i){for(var r=[],o=t.options.tabSize,s=ys(Ei(c,n.line).text,n.ch,o),a=ys(Ei(c,e.line).text,e.ch,o),l=Math.min(s,a),f=Math.max(s,a),p=Math.min(n.line,e.line),g=Math.min(t.lastLine(),Math.max(n.line,e.line));p<=g;p++){var v=Ei(c,p).text,y=cr(v,l,o);l==f?r.push(new K(yo(p,y),yo(p,y))):v.length>y&&r.push(new K(yo(p,y),yo(p,cr(v,f,o))))}r.length||r.push(new K(n,n)),ut(c,X(d.ranges.slice(0,h).concat(r),h),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b=u,w=b.anchor,x=e;if("single"!=i){if("double"==i)var k=t.findWordAt(e);else var k=new K(yo(e.line,0),J(c,yo(e.line+1,0)));bo(k.anchor,w)>0?(x=k.head,w=V(b.from(),k.anchor)):(x=k.anchor,w=q(b.to(),k.head))}var r=d.ranges.slice(0);r[h]=new K(J(c,w),x),ut(c,X(r,h),gs)}}function s(e){var n=++v,r=Ae(t,e,!0,"rect"==i);if(r)if(0!=bo(r,m)){De(t),o(r);var a=y(l,c);(r.line>=a.to||r.line<a.from)&&setTimeout(ce(t,function(){v==n&&s(e)}),150)}else{var u=e.clientY<g.top?-20:e.clientY>g.bottom?20:0;u&&setTimeout(ce(t,function(){v==n&&(l.scroller.scrollTop+=u,s(e))}),50)}}function a(e){v=Infinity,ss(e),Se(t),us(document,"mousemove",b),us(document,"mouseup",w),c.history.lastSelOrigin=null}var l=t.display,c=t.doc;ss(e);var u,h,d=c.sel;if(r&&!e.shiftKey?(h=c.sel.contains(n),u=h>-1?c.sel.ranges[h]:new K(n,n)):u=c.sel.primary(),e.altKey)i="rect",r||(u=new K(n,n)),n=Ae(t,e,!0,!0),h=-1;else if("double"==i){var f=t.findWordAt(n);u=t.display.shift||c.extend?it(c,u,f.anchor,f.head):f}else if("triple"==i){var p=new K(yo(n.line,0),J(c,yo(n.line+1,0)));u=t.display.shift||c.extend?it(c,u,p.anchor,p.head):p}else u=it(c,u,n);r?h>-1?st(c,h,u,gs):(h=c.sel.ranges.length,ut(c,X(c.sel.ranges.concat([u]),h),{scroll:!1,origin:"*mouse"})):(h=0,ut(c,new G([u],0),gs),d=c.sel);var m=n,g=l.wrapper.getBoundingClientRect(),v=0,b=ce(t,function(t){er(t)?s(t):a(t)}),w=ce(t,a);cs(document,"mousemove",b),cs(document,"mouseup",w)}function Pe(t,e,n,i,r){try{var o=e.clientX,s=e.clientY}catch(e){return!1}if(o>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&ss(e);var a=t.display,l=a.lineDiv.getBoundingClientRect();if(s>l.bottom||!sr(t,n))return Ji(e);s-=l.top-a.viewOffset;for(var c=0;c<t.options.gutters.length;++c){var u=a.gutters.childNodes[c];if(u&&u.getBoundingClientRect().right>=o){return r(t,n,t,Oi(t.doc,s),t.options.gutters[c],e),Ji(e)}}}function Fe(t,e){return Pe(t,e,"gutterClick",!0,nr)}function He(t){var e=this;if(!rr(e,t)&&!Ee(e.display,t)){ss(t),Qr&&(Mo=+new Date);var n=Ae(e,t,!0),i=t.dataTransfer.files;if(n&&!Me(e))if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),s=0,a=function(t,i){var a=new FileReader;a.onload=ce(e,function(){if(o[i]=a.result,++s==r){n=J(e.doc,n);var t={from:n,to:n,text:Es(o.join("\n")),origin:"paste"};an(e.doc,t),ct(e.doc,Z(n,$o(t)))}}),a.readAsText(t)},l=0;l<r;++l)a(i[l],l);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout(gr(Se,e),20);try{var o=t.dataTransfer.getData("Text");if(o){if(e.state.draggingText&&!(uo?t.metaKey:t.ctrlKey))var c=e.listSelections();if(ht(e.doc,Z(n,n)),c)for(var l=0;l<c.length;++l)fn(e.doc,"",c[l].anchor,c[l].head,"drag");e.replaceSelection(o,"around","paste"),Se(e)}}catch(t){}}}}function ze(t,e){if(Qr&&(!t.state.draggingText||+new Date-Mo<100))return void ls(e);if(!rr(t,e)&&!Ee(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.setDragImage&&!ro)){var n=wr("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",io&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),io&&n.parentNode.removeChild(n)}}function Re(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,Kr||D(t,{top:e}),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),Kr&&D(t),kt(t,100))}function je(t,e,n){(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,b(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}function We(t,e){var n=e.wheelDeltaX,i=e.wheelDeltaY;null==n&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(n=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta);var r=t.display,o=r.scroller;if(n&&o.scrollWidth>o.clientWidth||i&&o.scrollHeight>o.clientHeight){if(i&&uo&&to)t:for(var s=e.target,a=r.view;s!=o;s=s.parentNode)for(var l=0;l<a.length;l++)if(a[l].node==s){t.display.currentWheelTarget=s;break t}if(n&&!Kr&&!io&&null!=Lo)return i&&Re(t,Math.max(0,Math.min(o.scrollTop+i*Lo,o.scrollHeight-o.clientHeight))),je(t,Math.max(0,Math.min(o.scrollLeft+n*Lo,o.scrollWidth-o.clientWidth))),ss(e),void(r.wheelStartX=null);if(i&&null!=Lo){var c=i*Lo,u=t.doc.scrollTop,h=u+r.wrapper.clientHeight;c<0?u=Math.max(0,u+c-50):h=Math.min(t.doc.height,h+c+50),D(t,{top:u,bottom:h})}To<20&&(null==r.wheelStartX?(r.wheelStartX=o.scrollLeft,r.wheelStartY=o.scrollTop,r.wheelDX=n,r.wheelDY=i,setTimeout(function(){if(null!=r.wheelStartX){var t=o.scrollLeft-r.wheelStartX,e=o.scrollTop-r.wheelStartY,n=e&&r.wheelDY&&e/r.wheelDY||t&&r.wheelDX&&t/r.wheelDX;r.wheelStartX=r.wheelStartY=null,n&&(Lo=(Lo*To+n)/(To+1),++To)}},200)):(r.wheelDX+=n,r.wheelDY+=i))}}function Be(t,e,n){if("string"==typeof e&&!(e=Bo[e]))return!1;t.display.pollingFast&&_e(t)&&(t.display.pollingFast=!1);var i=t.display.shift,r=!1;try{Me(t)&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),r=e(t)!=ps}finally{t.display.shift=i,t.state.suppressEdits=!1}return r}function Ye(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function Ue(t,e){var n=Mn(t.options.keyMap),i=n.auto;clearTimeout(Eo),i&&!qo(e)&&(Eo=setTimeout(function(){Mn(t.options.keyMap)==n&&(t.options.keyMap=i.call?i.call(null,t):i,a(t))},50));var r=Vo(e,!0),o=!1;if(!r)return!1;var s=Ye(t);return o=e.shiftKey?Uo("Shift-"+r,s,function(e){return Be(t,e,!0)})||Uo(r,s,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return Be(t,e)}):Uo(r,s,function(e){return Be(t,e)}),o&&(ss(e),xt(t),nr(t,"keyHandled",t,r,e)),o}function qe(t,e,n){var i=Uo("'"+n+"'",Ye(t),function(e){return Be(t,e,!0)});return i&&(ss(e),xt(t),nr(t,"keyHandled",t,"'"+n+"'",e)),i}function Ve(t){var e=this;if(De(e),!rr(e,t)){Qr&&Jr<11&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.display.shift=16==n||t.shiftKey;var i=Ue(e,t);io&&(Ao=i?n:null,!i&&88==n&&!$s&&(uo?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||Ge(e)}}function Ge(t){function e(t){18!=t.keyCode&&t.altKey||(Dr(n,"CodeMirror-crosshair"),us(document,"keyup",e),us(document,"mouseover",e))}var n=t.display.lineDiv;Mr(n,"CodeMirror-crosshair"),cs(document,"keyup",e),cs(document,"mouseover",e)}function Ke(t){16==t.keyCode&&(this.doc.sel.shift=!1),rr(this,t)}function Xe(t){var e=this;if(!(rr(e,t)||t.ctrlKey&&!t.altKey||uo&&t.metaKey)){var n=t.keyCode,i=t.charCode;if(io&&n==Ao)return Ao=null,void ss(t);if(!(io&&(!t.which||t.which<10)||oo)||!Ue(e,t)){qe(e,t,String.fromCharCode(null==i?n:i))||(Qr&&Jr>=9&&(e.display.inputHasSelection=null),ke(e))}}}function Ze(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(hs(t,"focus",t),t.state.focused=!0,Mr(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(Ce(t),to&&setTimeout(gr(Ce,t,!0),0))),xe(t),xt(t))}function Qe(t){t.state.focused&&(hs(t,"blur",t),t.state.focused=!1,Dr(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150)}function Je(t,e){function n(){if(null!=r.input.selectionStart){var e=t.somethingSelected(),n=r.input.value="\u200b"+(e?r.input.value:"");r.prevInput=e?"":"\u200b",r.input.selectionStart=1,r.input.selectionEnd=n.length,r.selForContextMenu=t.doc.sel}}function i(){if(r.inputDiv.style.position="relative",r.input.style.cssText=a,Qr&&Jr<9&&(r.scrollbarV.scrollTop=r.scroller.scrollTop=s),xe(t),null!=r.input.selectionStart){(!Qr||Qr&&Jr<9)&&n();var e=0,i=function(){r.selForContextMenu==t.doc.sel&&0==r.input.selectionStart?ce(t,Bo.selectAll)(t):e++<10?r.detectingSelectAll=setTimeout(i,500):Ce(t)};r.detectingSelectAll=setTimeout(i,200)}}if(!rr(t,e,"contextmenu")){var r=t.display;if(!Ee(r,e)&&!tn(t,e)){var o=Ae(t,e),s=r.scroller.scrollTop;if(o&&!io){t.options.resetSelectionOnContextMenu&&-1==t.doc.sel.contains(o)&&ce(t,ut)(t.doc,Z(o),ms);var a=r.input.style.cssText;if(r.inputDiv.style.position="absolute",r.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(Qr?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",to)var l=window.scrollY;if(Se(t),to&&window.scrollTo(null,l),Ce(t),t.somethingSelected()||(r.input.value=r.prevInput=" "),r.selForContextMenu=t.doc.sel,clearTimeout(r.detectingSelectAll),Qr&&Jr>=9&&n(),mo){ls(e);var c=function(){us(window,"mouseup",c),setTimeout(i,20)};cs(window,"mouseup",c)}else setTimeout(i,50)}}}}function tn(t,e){return!!sr(t,"gutterContextMenu")&&Pe(t,e,"gutterContextMenu",!1,hs)}function en(t,e){if(bo(t,e.from)<0)return t;if(bo(t,e.to)<=0)return $o(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=$o(e).ch-e.to.ch),yo(n,i)}function nn(t,e){for(var n=[],i=0;i<t.sel.ranges.length;i++){var r=t.sel.ranges[i];n.push(new K(en(r.anchor,e),en(r.head,e)))}return X(n,t.sel.primIndex)}function rn(t,e,n){return t.line==e.line?yo(n.line,t.ch-e.ch+n.ch):yo(n.line+(t.line-e.line),t.ch)}function on(t,e,n){for(var i=[],r=yo(t.first,0),o=r,s=0;s<e.length;s++){var a=e[s],l=rn(a.from,r,o),c=rn($o(a),r,o);if(r=a.to,o=c,"around"==n){var u=t.sel.ranges[s],h=bo(u.head,u.anchor)<0;i[s]=new K(h?c:l,h?l:c)}else i[s]=new K(l,l)}return new G(i,t.sel.primIndex)}function sn(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return n&&(i.update=function(e,n,i,r){e&&(this.from=J(t,e)),n&&(this.to=J(t,n)),i&&(this.text=i),r!==undefined&&(this.origin=r)}),hs(t,"beforeChange",t,i),t.cm&&hs(t.cm,"beforeChange",t.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function an(t,e,n){if(t.cm){if(!t.cm.curOp)return ce(t.cm,an)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(sr(t,"beforeChange")||t.cm&&sr(t.cm,"beforeChange"))||(e=sn(t,e,!0))){var i=go&&!n&&Wn(t,e.from,e.to);if(i)for(var r=i.length-1;r>=0;--r)ln(t,{from:i[r].from,to:i[r].to,text:r?[""]:e.text});else ln(t,e)}}function ln(t,e){if(1!=e.text.length||""!=e.text[0]||0!=bo(e.from,e.to)){var n=nn(t,e);Wi(t,e,n,t.cm?t.cm.curOp.id:NaN),hn(t,e,n,zn(t,e));var i=[];Ti(t,function(t,n){n||-1!=dr(i,t.history)||(Qi(t.history,e),i.push(t.history)),hn(t,e,null,zn(t,e))})}}function cn(t,e,n){if(!t.cm||!t.cm.state.suppressEdits){for(var i,r=t.history,o=t.sel,s="undo"==e?r.done:r.undone,a="undo"==e?r.undone:r.done,l=0;l<s.length&&(i=s[l],n?!i.ranges||i.equals(t.sel):i.ranges);l++);if(l!=s.length){for(r.lastOrigin=r.lastSelOrigin=null;i=s.pop(),i.ranges;){if(Ui(i,a),n&&!i.equals(t.sel))return void ut(t,i,{clearRedo:!1});o=i}var c=[];Ui(o,a),a.push({changes:c,generation:r.generation}),r.generation=i.generation||++r.maxGeneration;for(var u=sr(t,"beforeChange")||t.cm&&sr(t.cm,"beforeChange"),l=i.changes.length-1;l>=0;--l){var h=i.changes[l];if(h.origin=e,u&&!sn(t,h,!1))return void(s.length=0);c.push(zi(t,h));var d=l?nn(t,h):hr(s);hn(t,h,d,jn(t,h)),!l&&t.cm&&t.cm.scrollIntoView({from:h.from,to:$o(h)});var f=[];Ti(t,function(t,e){e||-1!=dr(f,t.history)||(Qi(t.history,h),f.push(t.history)),hn(t,h,null,jn(t,h))})}}}}function un(t,e){if(0!=e&&(t.first+=e,t.sel=new G(fr(t.sel.ranges,function(t){return new K(yo(t.anchor.line+e,t.anchor.ch),yo(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){pe(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,i=n.viewFrom;i<n.viewTo;i++)me(t.cm,i,"gutter")}}function hn(t,e,n,i){if(t.cm&&!t.cm.curOp)return ce(t.cm,hn)(t,e,n,i);if(e.to.line<t.first)return void un(t,e.text.length-1-(e.to.line-e.from.line));if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);un(t,r),e={from:yo(t.first,0),to:yo(e.to.line+r,e.to.ch),text:[hr(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:yo(o,Ei(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=Ai(t,e.from,e.to),n||(n=nn(t,e)),t.cm?dn(t.cm,e,i):Si(t,e,i),ht(t,n,ms)}}function dn(t,e,n){var i=t.doc,r=t.display,s=e.from,a=e.to,l=!1,c=s.line;t.options.lineWrapping||(c=Ni(Qn(Ei(i,s.line))),i.iter(c,a.line+1,function(t){if(t==r.maxLine)return l=!0,!0})),i.sel.contains(e.from,e.to)>-1&&or(t),Si(i,e,n,o(t)),t.options.lineWrapping||(i.iter(c,s.line+e.text.length,function(t){var e=d(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,l=!1)}),l&&(t.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,s.line),kt(t,400);var u=e.text.length-(a.line-s.line)-1;s.line!=a.line||1!=e.text.length||Ci(t.doc,e)?pe(t,s.line,a.line+1,u):me(t,s.line,"text");var h=sr(t,"changes"),f=sr(t,"change");if(f||h){var p={from:s,to:a,text:e.text,removed:e.removed,origin:e.origin};f&&nr(t,"change",t,p),h&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(p)}t.display.selForContextMenu=null}function fn(t,e,n,i,r){if(i||(i=n),bo(i,n)<0){var o=i;i=n,n=o}"string"==typeof e&&(e=Es(e)),an(t,{from:n,to:i,text:e,origin:r})}function pn(t,e){var n=t.display,i=n.sizer.getBoundingClientRect(),r=null;if(e.top+i.top<0?r=!0:e.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!ao){var o=wr("div","\u200b",null,"position: absolute; top: "+(e.top-n.viewOffset-Dt(t.display))+"px; height: "+(e.bottom-e.top+fs)+"px; left: "+e.left+"px; width: 2px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(r),t.display.lineSpace.removeChild(o)}}function mn(t,e,n,i){null==i&&(i=0);for(var r=0;r<5;r++){var o=!1,s=qt(t,e),a=n&&n!=e?qt(t,n):s,l=vn(t,Math.min(s.left,a.left),Math.min(s.top,a.top)-i,Math.max(s.left,a.left),Math.max(s.bottom,a.bottom)+i),c=t.doc.scrollTop,u=t.doc.scrollLeft;if(null!=l.scrollTop&&(Re(t,l.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(o=!0)),null!=l.scrollLeft&&(je(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-u)>1&&(o=!0)),!o)return s}}function gn(t,e,n,i,r){var o=vn(t,e,n,i,r);null!=o.scrollTop&&Re(t,o.scrollTop),null!=o.scrollLeft&&je(t,o.scrollLeft)}function vn(t,e,n,i,r){var o=t.display,s=Zt(t.display);n<0&&(n=0);var a=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:o.scroller.scrollTop,l=o.scroller.clientHeight-fs,c={};r-n>l&&(r=n+l);var u=t.doc.height+Mt(o),h=n<s,d=r>u-s;if(n<a)c.scrollTop=h?0:n;else if(r>a+l){var f=Math.min(n,(d?u:r)-l);f!=a&&(c.scrollTop=f)}var p=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:o.scroller.scrollLeft,m=o.scroller.clientWidth-fs-o.gutters.offsetWidth,g=i-e>m;return g&&(i=e+m),e<10?c.scrollLeft=0:e<p?c.scrollLeft=Math.max(0,e-(g?0:10)):i>m+p-3&&(c.scrollLeft=i+(g?0:10)-m),c}function yn(t,e,n){null==e&&null==n||wn(t),null!=e&&(t.curOp.scrollLeft=(null==t.curOp.scrollLeft?t.doc.scrollLeft:t.curOp.scrollLeft)+e),null!=n&&(t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+n)}function bn(t){wn(t);var e=t.getCursor(),n=e,i=e;t.options.lineWrapping||(n=e.ch?yo(e.line,e.ch-1):e,i=yo(e.line,e.ch+1)),t.curOp.scrollToPos={from:n,to:i,margin:t.options.cursorScrollMargin,isCursor:!0}}function wn(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var n=Vt(t,e.from),i=Vt(t,e.to),r=vn(t,Math.min(n.left,i.left),Math.min(n.top,i.top)-e.margin,Math.max(n.right,i.right),Math.max(n.bottom,i.bottom)+e.margin);t.scrollTo(r.scrollLeft,r.scrollTop)}}function xn(t,e,n,i){var r,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=St(t,e):n="prev");var s=t.options.tabSize,a=Ei(o,e),l=ys(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&((c=o.mode.indent(r,a.text.slice(u.length),a.text))==ps||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=e>o.first?ys(Ei(o,e-1).text,null,s):0:"add"==n?c=l+t.options.indentUnit:"subtract"==n?c=l-t.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var h="",d=0;if(t.options.indentWithTabs)for(var f=Math.floor(c/s);f;--f)d+=s,h+="\t";if(d<c&&(h+=ur(c-d)),h!=u)fn(o,h,yo(e,0),yo(e,u.length),"+input");else for(var f=0;f<o.sel.ranges.length;f++){var p=o.sel.ranges[f];if(p.head.line==e&&p.head.ch<u.length){var d=yo(e,u.length);st(o,f,new K(d,d));break}}a.stateAfter=null}function kn(t,e,n,i){var r=e,o=e;return"number"==typeof e?o=Ei(t,Q(t,e)):r=Ni(e),null==r?null:(i(o,r)&&t.cm&&me(t.cm,r,n),o)}function _n(t,e){for(var n=t.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=e(n[r]);i.length&&bo(o.from,hr(i).to)<=0;){var s=i.pop();if(bo(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}le(t,function(){for(var e=i.length-1;e>=0;e--)fn(t.doc,"",i[e].from,i[e].to,"+delete");bn(t)})}function Cn(t,e,n,i,r){function o(){var e=a+n;return e<t.first||e>=t.first+t.size?h=!1:(a=e,u=Ei(t,e))}function s(t){var e=(r?Vr:Gr)(u,l,n,!0);if(null==e){if(t||!o())return h=!1;l=r?(n<0?Rr:zr)(u):n<0?u.text.length:0}else l=e;return!0}var a=e.line,l=e.ch,c=n,u=Ei(t,a),h=!0;if("char"==i)s();else if("column"==i)s(!0);else if("word"==i||"group"==i)for(var d=null,f="group"==i,p=t.cm&&t.cm.getHelper(e,"wordChars"),m=!0;!(n<0)||s(!m);m=!1){var g=u.text.charAt(l)||"\n",v=vr(g,p)?"w":f&&"\n"==g?"n":!f||/\s/.test(g)?null:"p";if(!f||m||v||(v="s"),d&&d!=v){n<0&&(n=1,s());break}if(v&&(d=v),n>0&&!s(!m))break}var y=mt(t,yo(a,l),c,!0);return h||(y.hitSide=!0),y}function Sn(t,e,n,i){var r,o=t.doc,s=e.left;if("page"==i){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=e.top+n*(a-(n<0?1.5:.5)*Zt(t.display))}else"line"==i&&(r=n>0?e.bottom+3:e.top-3);for(;;){var l=Kt(t,s,r);if(!l.outside)break;if(n<0?r<=0:r>=o.height){l.hitSide=!0;break}r+=5*n}return l}function Dn(e,n,i,r){t.defaults[e]=n,i&&(No[e]=r?function(t,e,n){n!=Oo&&i(t,e,n)}:i)}function Mn(t){return"string"==typeof t?Yo[t]:t}function Tn(t,e,n,i,r){if(i&&i.shared)return Ln(t,e,n,i,r);if(t.cm&&!t.cm.curOp)return ce(t.cm,Tn)(t,e,n,i,r);var o=new Ko(t,r),s=bo(e,n);if(i&&mr(i,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=wr("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||(o.widgetNode.ignoreEvents=!0),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Zn(t,e.line,e,n,o)||e.line!=n.line&&Zn(t,n.line,e,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");vo=!0}o.addToHistory&&Wi(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var a,l=e.line,c=t.cm;if(t.iter(l,n.line+1,function(t){c&&o.collapsed&&!c.options.lineWrapping&&Qn(t)==c.display.maxLine&&(a=!0),o.collapsed&&l!=e.line&&Ii(t,0),Pn(t,new In(o,l==e.line?e.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&t.iter(e.line,n.line+1,function(e){ni(t,e)&&Ii(e,0)}),o.clearOnEnter&&cs(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(go=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++Xo,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)pe(c,e.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle)for(var u=e.line;u<=n.line;u++)me(c,u,"text");o.atomic&&ft(c.doc),nr(c,"markerAdded",c,o)}return o}function Ln(t,e,n,i,r){i=mr(i),i.shared=!1;var o=[Tn(t,e,n,i,r)],s=o[0],a=i.widgetNode;return Ti(t,function(t){a&&(i.widgetNode=a.cloneNode(!0)),o.push(Tn(t,J(t,e),J(t,n),i,r));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;s=hr(o)}),new Zo(o,s)}function En(t){return t.findMarks(yo(t.first,0),t.clipPos(yo(t.lastLine())),function(t){return t.parent})}function An(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=i.find(),o=t.clipPos(r.from),s=t.clipPos(r.to);if(bo(o,s)){var a=Tn(t,o,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}function $n(t){for(var e=0;e<t.length;e++){var n=t[e],i=[n.primary.doc];Ti(n.primary.doc,function(t){i.push(t)});for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==dr(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}}}function In(t,e,n){this.marker=t,this.from=e,this.to=n}function Nn(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function On(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function Pn(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function Fn(t,e,n){if(t)for(var i,r=0;r<t.length;++r){var o=t[r],s=o.marker,a=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);if(a||o.from==e&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);(i||(i=[])).push(new In(s,o.from,l?null:o.to))}}return i}function Hn(t,e,n){if(t)for(var i,r=0;r<t.length;++r){var o=t[r],s=o.marker,a=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);if(a||o.from==e&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);(i||(i=[])).push(new In(s,l?null:o.from-e,null==o.to?null:o.to-e))}}return i}function zn(t,e){var n=et(t,e.from.line)&&Ei(t,e.from.line).markedSpans,i=et(t,e.to.line)&&Ei(t,e.to.line).markedSpans;if(!n&&!i)return null;var r=e.from.ch,o=e.to.ch,s=0==bo(e.from,e.to),a=Fn(n,r,s),l=Hn(i,o,s),c=1==e.text.length,u=hr(e.text).length+(c?r:0);if(a)for(var h=0;h<a.length;++h){var d=a[h];if(null==d.to){var f=Nn(l,d.marker);f?c&&(d.to=null==f.to?null:f.to+u):d.to=r}}if(l)for(var h=0;h<l.length;++h){var d=l[h];if(null!=d.to&&(d.to+=u),null==d.from){var f=Nn(a,d.marker);f||(d.from=u,c&&(a||(a=[])).push(d))}else d.from+=u,c&&(a||(a=[])).push(d)}a&&(a=Rn(a)),l&&l!=a&&(l=Rn(l));var p=[a];if(!c){var m,g=e.text.length-2;if(g>0&&a)for(var h=0;h<a.length;++h)null==a[h].to&&(m||(m=[])).push(new In(a[h].marker,null,null));for(var h=0;h<g;++h)p.push(m);p.push(l)}return p}function Rn(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function jn(t,e){var n=Gi(t,e),i=zn(t,e);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],s=i[r];if(o&&s)t:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue t;o.push(l)}else s&&(n[r]=s)}return n}function Wn(t,e,n){var i=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=dr(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:e,to:n}],o=0;o<i.length;++o)for(var s=i[o],a=s.find(0),l=0;l<r.length;++l){var c=r[l];if(!(bo(c.to,a.from)<0||bo(c.from,a.to)>0)){var u=[l,1],h=bo(c.from,a.from),d=bo(c.to,a.to);(h<0||!s.inclusiveLeft&&!h)&&u.push({from:c.from,to:a.from}),(d>0||!s.inclusiveRight&&!d)&&u.push({from:a.to,to:c.to}),r.splice.apply(r,u),l+=u.length-1}}return r}function Bn(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Yn(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Un(t){return t.inclusiveLeft?-1:0}function qn(t){return t.inclusiveRight?1:0}function Vn(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var i=t.find(),r=e.find(),o=bo(i.from,r.from)||Un(t)-Un(e);if(o)return-o;var s=bo(i.to,r.to)||qn(t)-qn(e);return s||e.id-t.id}function Gn(t,e){var n,i=vo&&t.markedSpans;if(i)for(var r,o=0;o<i.length;++o)r=i[o],r.marker.collapsed&&null==(e?r.from:r.to)&&(!n||Vn(n,r.marker)<0)&&(n=r.marker);return n}function Kn(t){return Gn(t,!0)}function Xn(t){return Gn(t,!1)}function Zn(t,e,n,i,r){var o=Ei(t,e),s=vo&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=bo(c.from,n)||Un(l.marker)-Un(r),h=bo(c.to,i)||qn(l.marker)-qn(r);if(!(u>=0&&h<=0||u<=0&&h>=0)&&(u<=0&&(bo(c.to,n)>0||l.marker.inclusiveRight&&r.inclusiveLeft)||u>=0&&(bo(c.from,i)<0||l.marker.inclusiveLeft&&r.inclusiveRight)))return!0}}}function Qn(t){for(var e;e=Kn(t);)t=e.find(-1,!0).line;return t}function Jn(t){for(var e,n;e=Xn(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}function ti(t,e){var n=Ei(t,e),i=Qn(n);return n==i?e:Ni(i)}function ei(t,e){if(e>t.lastLine())return e;var n,i=Ei(t,e);if(!ni(t,i))return e;for(;n=Xn(i);)i=n.find(1,!0).line;return Ni(i)+1}function ni(t,e){var n=vo&&e.markedSpans;if(n)for(var i,r=0;r<n.length;++r)if(i=n[r],i.marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&ii(t,e,i))return!0}}function ii(t,e,n){if(null==n.to){var i=n.marker.find(1,!0);return ii(t,i.line,Nn(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var r,o=0;o<e.markedSpans.length;++o)if(r=e.markedSpans[o],r.marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&ii(t,e,r))return!0}function ri(t,e,n){Pi(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&yn(t,null,n)}function oi(t){if(null!=t.height)return t.height;if(!_r(document.body,t.node)){var e="position: relative;";t.coverGutter&&(e+="margin-left: -"+t.cm.getGutterElement().offsetWidth+"px;"),kr(t.cm.display.measure,wr("div",[t.node],null,e))}return t.height=t.node.offsetHeight}function si(t,e,n,i){var r=new Qo(t,n,i);return r.noHScroll&&(t.display.alignWidgets=!0),kn(t.doc,e,"widget",function(e){var n=e.widgets||(e.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r),r.line=e,!ni(t.doc,e)){var i=Pi(e)<t.doc.scrollTop;Ii(e,e.height+oi(r)),i&&yn(t,null,r.height),t.curOp.forceUpdate=!0}return!0}),r}function ai(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Bn(t),Yn(t,n);var r=i?i(t):1;r!=t.height&&Ii(t,r)}function li(t){t.parent=null,Bn(t)}function ci(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[i])||(e[i]+=" "+n[2])}return t}function ui(e,n){if(e.blankLine)return e.blankLine(n);if(e.innerMode){var i=t.innerMode(e,n);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function hi(t,e,n){for(var i=0;i<10;i++){var r=t.token(e,n);if(e.pos>e.start)return r}throw new Error("Mode "+t.name+" failed to advance stream.")}function di(e,n,i,r,o,s,a){var l=i.flattenSpans;null==l&&(l=e.options.flattenSpans);var c,u=0,h=null,d=new Go(n,e.options.tabSize);for(""==n&&ci(ui(i,r),s);!d.eol();){if(d.pos>e.options.maxHighlightLength?(l=!1,a&&mi(e,n,r,d.pos),d.pos=n.length,
c=null):c=ci(hi(i,d,r),s),e.options.addModeClass){var f=t.innerMode(i,r).mode.name;f&&(c="m-"+(c?f+" "+c:f))}l&&h==c||(u<d.start&&o(d.start,h),u=d.start,h=c),d.start=d.pos}for(;u<d.pos;){var p=Math.min(d.pos,u+5e4);o(p,h),u=p}}function fi(t,e,n,i){var r=[t.state.modeGen],o={};di(t,e.text,t.doc.mode,n,function(t,e){r.push(t,e)},o,i);for(var s=0;s<t.state.overlays.length;++s){var a=t.state.overlays[s],l=1,c=0;di(t,e.text,a.mode,!0,function(t,e){for(var n=l;c<t;){var i=r[l];i>t&&r.splice(l,1,t,r[l+1],i),l+=2,c=Math.min(t,i)}if(e)if(a.opaque)r.splice(n,l-n,t,"cm-overlay "+e),l=n+2;else for(;n<l;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"cm-overlay "+e}},o)}return{styles:r,classes:o.bgClass||o.textClass?o:null}}function pi(t,e){if(!e.styles||e.styles[0]!=t.state.modeGen){var n=fi(t,e,e.stateAfter=St(t,Ni(e)));e.styles=n.styles,n.classes?e.styleClasses=n.classes:e.styleClasses&&(e.styleClasses=null)}return e.styles}function mi(t,e,n,i){var r=t.doc.mode,o=new Go(e,t.options.tabSize);for(o.start=o.pos=i||0,""==e&&ui(r,n);!o.eol()&&o.pos<=t.options.maxHighlightLength;)hi(r,o,n),o.start=o.pos}function gi(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?es:ts;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function vi(t,e){var n=wr("span",null,null,to?"padding-right: .1px":null),i={pre:wr("pre",[n]),content:n,col:0,pos:0,cm:t};e.measure={};for(var r=0;r<=(e.rest?e.rest.length:0);r++){var o,s=r?e.rest[r-1]:e.line;i.pos=0,i.addToken=bi,(Qr||to)&&t.getOption("lineWrapping")&&(i.addToken=wi(i.addToken)),Nr(t.display.measure)&&(o=Fi(s))&&(i.addToken=xi(i.addToken,o)),i.map=[],_i(s,i,pi(t,s)),s.styleClasses&&(s.styleClasses.bgClass&&(i.bgClass=Tr(s.styleClasses.bgClass,i.bgClass||"")),s.styleClasses.textClass&&(i.textClass=Tr(s.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Ir(t.display.measure))),0==r?(e.measure.map=i.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(i.map),(e.measure.caches||(e.measure.caches=[])).push({}))}return hs(t,"renderLine",t,e.line,i.pre),i.pre.className&&(i.textClass=Tr(i.pre.className,i.textClass||"")),i}function yi(t){var e=wr("span","\u2022","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e}function bi(t,e,n,i,r,o){if(e){var s=t.cm.options.specialChars,a=!1;if(s.test(e))for(var l=document.createDocumentFragment(),c=0;;){s.lastIndex=c;var u=s.exec(e),h=u?u.index-c:e.length-c;if(h){var d=document.createTextNode(e.slice(c,c+h));Qr&&Jr<9?l.appendChild(wr("span",[d])):l.appendChild(d),t.map.push(t.pos,t.pos+h,d),t.col+=h,t.pos+=h}if(!u)break;if(c+=h+1,"\t"==u[0]){var f=t.cm.options.tabSize,p=f-t.col%f,d=l.appendChild(wr("span",ur(p),"cm-tab"));t.col+=p}else{var d=t.cm.options.specialCharPlaceholder(u[0]);Qr&&Jr<9?l.appendChild(wr("span",[d])):l.appendChild(d),t.col+=1}t.map.push(t.pos,t.pos+1,d),t.pos++}else{t.col+=e.length;var l=document.createTextNode(e);t.map.push(t.pos,t.pos+e.length,l),Qr&&Jr<9&&(a=!0),t.pos+=e.length}if(n||i||r||a){var m=n||"";i&&(m+=i),r&&(m+=r);var g=wr("span",[l],m);return o&&(g.title=o),t.content.appendChild(g)}t.content.appendChild(l)}}function wi(t){function e(t){for(var e=" ",n=0;n<t.length-2;++n)e+=n%2?" ":"\xa0";return e+=" "}return function(n,i,r,o,s,a){t(n,i.replace(/ {3,}/g,e),r,o,s,a)}}function xi(t,e){return function(n,i,r,o,s,a){r=r?r+" cm-force-border":"cm-force-border";for(var l=n.pos,c=l+i.length;;){for(var u=0;u<e.length;u++){var h=e[u];if(h.to>l&&h.from<=l)break}if(h.to>=c)return t(n,i,r,o,s,a);t(n,i.slice(0,h.to-l),r,o,null,a),o=null,i=i.slice(h.to-l),l=h.to}}}function ki(t,e,n,i){var r=!i&&n.widgetNode;r&&(t.map.push(t.pos,t.pos+e,r),t.content.appendChild(r)),t.pos+=e}function _i(t,e,n){var i=t.markedSpans,r=t.text,o=0;if(i)for(var s,a,l,c,u,h,d=r.length,f=0,p=1,m="",g=0;;){if(g==f){a=l=c=u="",h=null,g=Infinity;for(var v=[],y=0;y<i.length;++y){var b=i[y],w=b.marker;b.from<=f&&(null==b.to||b.to>f)?(null!=b.to&&g>b.to&&(g=b.to,l=""),w.className&&(a+=" "+w.className),w.startStyle&&b.from==f&&(c+=" "+w.startStyle),w.endStyle&&b.to==g&&(l+=" "+w.endStyle),w.title&&!u&&(u=w.title),w.collapsed&&(!h||Vn(h.marker,w)<0)&&(h=b)):b.from>f&&g>b.from&&(g=b.from),"bookmark"==w.type&&b.from==f&&w.widgetNode&&v.push(w)}if(h&&(h.from||0)==f&&(ki(e,(null==h.to?d+1:h.to)-f,h.marker,null==h.from),null==h.to))return;if(!h&&v.length)for(var y=0;y<v.length;++y)ki(e,0,v[y])}if(f>=d)break;for(var x=Math.min(d,g);;){if(m){var k=f+m.length;if(!h){var _=k>x?m.slice(0,x-f):m;e.addToken(e,_,s?s+a:a,c,f+_.length==g?l:"",u)}if(k>=x){m=m.slice(x-f),f=x;break}f=k,c=""}m=r.slice(o,o=n[p++]),s=gi(n[p++],e.cm.options)}}else for(var p=1;p<n.length;p+=2)e.addToken(e,r.slice(o,o=n[p]),gi(n[p+1],e.cm.options))}function Ci(t,e){return 0==e.from.ch&&0==e.to.ch&&""==hr(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Si(t,e,n,i){function r(t){return n?n[t]:null}function o(t,n,r){ai(t,n,r,i),nr(t,"change",t,e)}var s=e.from,a=e.to,l=e.text,c=Ei(t,s.line),u=Ei(t,a.line),h=hr(l),d=r(l.length-1),f=a.line-s.line;if(Ci(t,e)){for(var p=0,m=[];p<l.length-1;++p)m.push(new Jo(l[p],r(p),i));o(u,u.text,d),f&&t.remove(s.line,f),m.length&&t.insert(s.line,m)}else if(c==u)if(1==l.length)o(c,c.text.slice(0,s.ch)+h+c.text.slice(a.ch),d);else{for(var m=[],p=1;p<l.length-1;++p)m.push(new Jo(l[p],r(p),i));m.push(new Jo(h+c.text.slice(a.ch),d,i)),o(c,c.text.slice(0,s.ch)+l[0],r(0)),t.insert(s.line+1,m)}else if(1==l.length)o(c,c.text.slice(0,s.ch)+l[0]+u.text.slice(a.ch),r(0)),t.remove(s.line+1,f);else{o(c,c.text.slice(0,s.ch)+l[0],r(0)),o(u,h+u.text.slice(a.ch),d);for(var p=1,m=[];p<l.length-1;++p)m.push(new Jo(l[p],r(p),i));f>1&&t.remove(s.line+1,f-1),t.insert(s.line+1,m)}nr(t,"change",t,e)}function Di(t){this.lines=t,this.parent=null;for(var e=0,n=0;e<t.length;++e)t[e].parent=this,n+=t[e].height;this.height=n}function Mi(t){this.children=t;for(var e=0,n=0,i=0;i<t.length;++i){var r=t[i];e+=r.chunkSize(),n+=r.height,r.parent=this}this.size=e,this.height=n,this.parent=null}function Ti(t,e,n){function i(t,r,o){if(t.linked)for(var s=0;s<t.linked.length;++s){var a=t.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;n&&!l||(e(a.doc,l),i(a.doc,t,l))}}}i(t,null,!0)}function Li(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,s(t),n(t),t.options.lineWrapping||f(t),t.options.mode=e.modeOption,pe(t)}function Ei(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(e<o){n=r;break}e-=o}return n.lines[e]}function Ai(t,e,n){var i=[],r=e.line;return t.iter(e.line,n.line+1,function(t){var o=t.text;r==n.line&&(o=o.slice(0,n.ch)),r==e.line&&(o=o.slice(e.ch)),i.push(o),++r}),i}function $i(t,e,n){var i=[];return t.iter(e,n,function(t){i.push(t.text)}),i}function Ii(t,e){var n=e-t.height;if(n)for(var i=t;i;i=i.parent)i.height+=n}function Ni(t){if(null==t.parent)return null;for(var e=t.parent,n=dr(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var r=0;i.children[r]!=e;++r)n+=i.children[r].chunkSize();return n+e.first}function Oi(t,e){var n=t.first;t:do{for(var i=0;i<t.children.length;++i){var r=t.children[i],o=r.height;if(e<o){t=r;continue t}e-=o,n+=r.chunkSize()}return n}while(!t.lines);for(var i=0;i<t.lines.length;++i){var s=t.lines[i],a=s.height;if(e<a)break;e-=a}return n+i}function Pi(t){t=Qn(t);for(var e=0,n=t.parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==t)break;e+=r.height}for(var o=n.parent;o;n=o,o=n.parent)for(var i=0;i<o.children.length;++i){var s=o.children[i];if(s==n)break;e+=s.height}return e}function Fi(t){var e=t.order;return null==e&&(e=t.order=Ps(t.text)),e}function Hi(t){this.done=[],this.undone=[],this.undoDepth=Infinity,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function zi(t,e){var n={from:U(e.from),to:$o(e),text:Ai(t,e.from,e.to)};return qi(t,n,e.from.line,e.to.line+1),Ti(t,function(t){qi(t,n,e.from.line,e.to.line+1)},!0),n}function Ri(t){for(;t.length;){if(!hr(t).ranges)break;t.pop()}}function ji(t,e){return e?(Ri(t.done),hr(t.done)):t.done.length&&!hr(t.done).ranges?hr(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),hr(t.done)):void 0}function Wi(t,e,n,i){var r=t.history;r.undone.length=0;var o,s=+new Date;if((r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&r.lastModTime>s-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))&&(o=ji(r,r.lastOp==i))){var a=hr(o.changes);0==bo(e.from,e.to)&&0==bo(e.from,a.to)?a.to=$o(e):o.changes.push(zi(t,e))}else{var l=hr(r.done);for(l&&l.ranges||Ui(t.sel,r.done),o={changes:[zi(t,e)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=e.origin,a||hs(t,"historyAdded")}function Bi(t,e,n,i){var r=e.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function Yi(t,e,n,i){var r=t.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||Bi(t,o,hr(r.done),e))?r.done[r.done.length-1]=e:Ui(e,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&Ri(r.undone)}function Ui(t,e){var n=hr(e);n&&n.ranges&&n.equals(t)||e.push(t)}function qi(t,e,n,i){var r=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),function(n){n.markedSpans&&((r||(r=e["spans_"+t.id]={}))[o]=n.markedSpans),++o})}function Vi(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Gi(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=0,r=[];i<e.text.length;++i)r.push(Vi(n[i]));return r}function Ki(t,e,n){for(var i=0,r=[];i<t.length;++i){var o=t[i];if(o.ranges)r.push(n?G.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];r.push({changes:a});for(var l=0;l<s.length;++l){var c,u=s[l];if(a.push({from:u.from,to:u.to,text:u.text}),e)for(var h in u)(c=h.match(/^spans_(\d+)$/))&&dr(e,Number(c[1]))>-1&&(hr(a)[h]=u[h],delete u[h])}}}return r}function Xi(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function Zi(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r],s=!0;if(o.ranges){o.copied||(o=t[r]=o.deepCopy(),o.copied=!0);for(var a=0;a<o.ranges.length;a++)Xi(o.ranges[a].anchor,e,n,i),Xi(o.ranges[a].head,e,n,i)}else{for(var a=0;a<o.changes.length;++a){var l=o.changes[a];if(n<l.from.line)l.from=yo(l.from.line+i,l.from.ch),l.to=yo(l.to.line+i,l.to.ch);else if(e<=l.to.line){s=!1;break}}s||(t.splice(0,r+1),r=0)}}}function Qi(t,e){var n=e.from.line,i=e.to.line,r=e.text.length-(i-n)-1;Zi(t.done,n,i,r),Zi(t.undone,n,i,r)}function Ji(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function tr(t){return t.target||t.srcElement}function er(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),uo&&t.ctrlKey&&1==e&&(e=3),e}function nr(t,e){function n(t){return function(){t.apply(null,o)}}var i=t._handlers&&t._handlers[e];if(i){var r,o=Array.prototype.slice.call(arguments,2);Co?r=Co.delayedCallbacks:ds?r=ds:(r=ds=[],setTimeout(ir,0));for(var s=0;s<i.length;++s)r.push(n(i[s]))}}function ir(){var t=ds;ds=null;for(var e=0;e<t.length;++e)t[e]()}function rr(t,e,n){return hs(t,n||e.type,t,e),Ji(e)||e.codemirrorIgnore}function or(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),i=0;i<e.length;++i)-1==dr(n,e[i])&&n.push(e[i])}function sr(t,e){var n=t._handlers&&t._handlers[e];return n&&n.length>0}function ar(t){t.prototype.on=function(t,e){cs(this,t,e)},t.prototype.off=function(t,e){us(this,t,e)}}function lr(){this.id=null}function cr(t,e,n){for(var i=0,r=0;;){var o=t.indexOf("\t",i);-1==o&&(o=t.length);var s=o-i;if(o==t.length||r+s>=e)return i+Math.min(s,e-r);if(r+=o-i,r+=n-r%n,i=o+1,r>=e)return i}}function ur(t){for(;bs.length<=t;)bs.push(hr(bs)+" ");return bs[t]}function hr(t){return t[t.length-1]}function dr(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}function fr(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function pr(t,e){var n;if(Object.create)n=Object.create(t);else{var i=function(){};i.prototype=t,n=new i}return e&&mr(e,n),n}function mr(t,e,n){e||(e={});for(var i in t)!t.hasOwnProperty(i)||!1===n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function gr(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function vr(t,e){return e?!!(e.source.indexOf("\\w")>-1&&_s(t))||e.test(t):_s(t)}function yr(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function br(t){return t.charCodeAt(0)>=768&&Cs.test(t)}function wr(t,e,n,i){var r=document.createElement(t);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)r.appendChild(e[o]);return r}function xr(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function kr(t,e){return xr(t).appendChild(e)}function _r(t,e){if(t.contains)return t.contains(e);for(;e=e.parentNode;)if(e==t)return!0}function Cr(){return document.activeElement}function Sr(t){return new RegExp("\\b"+t+"\\b\\s*")}function Dr(t,e){var n=Sr(e);n.test(t.className)&&(t.className=t.className.replace(n,""))}function Mr(t,e){Sr(e).test(t.className)||(t.className+=" "+e)}function Tr(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)n[i]&&!Sr(n[i]).test(e)&&(e+=" "+n[i]);return e}function Lr(t){if(document.body.getElementsByClassName)for(var e=document.body.getElementsByClassName("CodeMirror"),n=0;n<e.length;n++){var i=e[n].CodeMirror;i&&t(i)}}function Er(){Ts||(Ar(),Ts=!0)}function Ar(){var t;cs(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Ss=null,Lr(Le)},100))}),cs(window,"blur",function(){Lr(Qe)})}function $r(t){if(null!=Ss)return Ss;var e=wr("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return kr(t,e),e.offsetWidth&&(Ss=e.offsetHeight-e.clientHeight),Ss||0}function Ir(t){if(null==Ds){var e=wr("span","\u200b");kr(t,wr("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Ds=e.offsetWidth<=1&&e.offsetHeight>2&&!(Qr&&Jr<8))}return Ds?wr("span","\u200b"):wr("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px")}function Nr(t){if(null!=Ms)return Ms;var e=kr(t,document.createTextNode("A\u062eA")),n=xs(e,0,1).getBoundingClientRect();if(!n||n.left==n.right)return!1;var i=xs(e,1,2).getBoundingClientRect();return Ms=i.right-n.right<3}function Or(t){if(null!=Is)return Is;var e=kr(t,wr("span","x")),n=e.getBoundingClientRect(),i=xs(e,0,1).getBoundingClientRect();return Is=Math.abs(n.left-i.left)>1}function Pr(t,e,n,i){if(!t)return i(e,n,"ltr");for(var r=!1,o=0;o<t.length;++o){var s=t[o];(s.from<n&&s.to>e||e==n&&s.to==e)&&(i(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr"),r=!0)}r||i(e,n,"ltr")}function Fr(t){return t.level%2?t.to:t.from}function Hr(t){return t.level%2?t.from:t.to}function zr(t){var e=Fi(t);return e?Fr(e[0]):0}function Rr(t){var e=Fi(t);return e?Hr(hr(e)):t.text.length}function jr(t,e){var n=Ei(t.doc,e),i=Qn(n);i!=n&&(e=Ni(i));var r=Fi(i),o=r?r[0].level%2?Rr(i):zr(i):0;return yo(e,o)}function Wr(t,e){for(var n,i=Ei(t.doc,e);n=Xn(i);)i=n.find(1,!0).line,e=null;var r=Fi(i),o=r?r[0].level%2?zr(i):Rr(i):i.text.length;return yo(null==e?Ni(i):e,o)}function Br(t,e){var n=jr(t,e.line),i=Ei(t.doc,n.line),r=Fi(i);if(!r||0==r[0].level){var o=Math.max(0,i.text.search(/\S/)),s=e.line==n.line&&e.ch<=o&&e.ch;return yo(n.line,s?0:o)}return n}function Yr(t,e,n){var i=t[0].level;return e==i||n!=i&&e<n}function Ur(t,e){Os=null;for(var n,i=0;i<t.length;++i){var r=t[i];if(r.from<e&&r.to>e)return i;if(r.from==e||r.to==e){if(null!=n)return Yr(t,r.level,t[n].level)?(r.from!=r.to&&(Os=n),i):(r.from!=r.to&&(Os=i),n);n=i}}return n}function qr(t,e,n,i){if(!i)return e+n;do{e+=n}while(e>0&&br(t.text.charAt(e)));return e}function Vr(t,e,n,i){var r=Fi(t);if(!r)return Gr(t,e,n,i);for(var o=Ur(r,e),s=r[o],a=qr(t,e,s.level%2?-n:n,i);;){if(a>s.from&&a<s.to)return a;if(a==s.from||a==s.to)return Ur(r,a)==o?a:(s=r[o+=n],n>0==s.level%2?s.to:s.from);if(!(s=r[o+=n]))return null;a=n>0==s.level%2?qr(t,s.to,-1,i):qr(t,s.from,1,i)}}function Gr(t,e,n,i){var r=e+n;if(i)for(;r>0&&br(t.text.charAt(r));)r+=n;return r<0||r>t.text.length?null:r}var Kr=/gecko\/\d/i.test(navigator.userAgent),Xr=/MSIE \d/.test(navigator.userAgent),Zr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Qr=Xr||Zr,Jr=Qr&&(Xr?document.documentMode||6:Zr[1]),to=/WebKit\//.test(navigator.userAgent),eo=to&&/Qt\/\d+\.\d+/.test(navigator.userAgent),no=/Chrome\//.test(navigator.userAgent),io=/Opera\//.test(navigator.userAgent),ro=/Apple Computer/.test(navigator.vendor),oo=/KHTML\//.test(navigator.userAgent),so=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),ao=/PhantomJS/.test(navigator.userAgent),lo=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),co=lo||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),uo=lo||/Mac/.test(navigator.platform),ho=/win/i.test(navigator.platform),fo=io&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);fo&&(fo=Number(fo[1])),fo&&fo>=15&&(io=!1,to=!0);var po=uo&&(eo||io&&(null==fo||fo<12.11)),mo=Kr||Qr&&Jr>=9,go=!1,vo=!1,yo=t.Pos=function(t,e){if(!(this instanceof yo))return new yo(t,e);this.line=t,this.ch=e},bo=t.cmpPos=function(t,e){return t.line-e.line||t.ch-e.ch};G.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],i=t.ranges[e];if(0!=bo(n.anchor,i.anchor)||0!=bo(n.head,i.head))return!1}return!0},deepCopy:function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new K(U(this.ranges[e].anchor),U(this.ranges[e].head));return new G(t,this.primIndex)},somethingSelected:function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},contains:function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(bo(e,i.from())>=0&&bo(t,i.to())<=0)return n}return-1}},K.prototype={from:function(){return V(this.anchor,this.head)},to:function(){return q(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var wo,xo,ko,_o={left:0,right:0,top:0,bottom:0},Co=null,So=0,Do=null,Mo=0,To=0,Lo=null;Qr?Lo=-.53:Kr?Lo=15:no?Lo=-.7:ro&&(Lo=-1/3);var Eo,Ao=null,$o=t.changeEnd=function(t){return t.text?yo(t.from.line+t.text.length-1,hr(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};t.prototype={constructor:t,focus:function(){window.focus(),Se(this),ke(this)},setOption:function(t,e){var n=this.options,i=n[t];n[t]==e&&"mode"!=t||(n[t]=e,No.hasOwnProperty(t)&&ce(this,No[t])(this,e,i))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||"string"!=typeof e[n]&&e[n].name==t)return e.splice(n,1),!0},addOverlay:ue(function(e,n){var i=e.token?e:t.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:e,opaque:n&&n.opaque}),this.state.modeGen++,pe(this)}),removeOverlay:ue(function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(n,1),this.state.modeGen++,void pe(this)}}),indentLine:ue(function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),et(this.doc,t)&&xn(this,t,e,n)}),indentSelection:ue(function(t){for(var e=this.doc.sel.ranges,n=-1,i=0;i<e.length;i++){var r=e[i];if(r.empty())r.head.line>n&&(xn(this,r.head.line,t,!0),n=r.head.line,i==this.doc.sel.primIndex&&bn(this));else{var o=r.from(),s=r.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;l<n;++l)xn(this,l,t);var c=this.doc.sel.ranges;0==o.ch&&e.length==c.length&&c[i].from().ch>0&&st(this.doc,i,new K(o,c[i].to()),ms)}}}),getTokenAt:function(t,e){var n=this.doc;t=J(n,t);for(var i=St(this,t.line,e),r=this.doc.mode,o=Ei(n,t.line),s=new Go(o.text,this.options.tabSize);s.pos<t.ch&&!s.eol();){s.start=s.pos;var a=hi(r,s,i)}return{start:s.start,end:s.pos,string:s.current(),type:a||null,state:i}},getTokenTypeAt:function(t){t=J(this.doc,t);var e,n=pi(this,Ei(this.doc,t.line)),i=0,r=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var s=i+r>>1;if((s?n[2*s-1]:0)>=o)r=s;else{if(!(n[2*s+1]<o)){e=n[2*s+2];break}i=s+1}}var a=e?e.indexOf("cm-overlay "):-1;return a<0?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var n=[];if(!Ro.hasOwnProperty(e))return Ro;var i=Ro[e],r=this.getModeAt(t);if("string"==typeof r[e])i[r[e]]&&n.push(i[r[e]]);else if(r[e])for(var o=0;o<r[e].length;o++){var s=i[r[e][o]];s&&n.push(s)}else r.helperType&&i[r.helperType]?n.push(i[r.helperType]):i[r.name]&&n.push(i[r.name]);for(var o=0;o<i._global.length;o++){var a=i._global[o];a.pred(r,this)&&-1==dr(n,a.val)&&n.push(a.val)}return n},getStateAfter:function(t,e){var n=this.doc;return t=Q(n,null==t?n.first+n.size-1:t),St(this,t+1,e)},cursorCoords:function(t,e){var n,i=this.doc.sel.primary();return n=null==t?i.head:"object"==typeof t?J(this.doc,t):t?i.from():i.to(),qt(this,n,e||"page")},charCoords:function(t,e){return Ut(this,J(this.doc,t),e||"page")},coordsChar:function(t,e){return t=Yt(this,t,e||"page"),Kt(this,t.left,t.top)},lineAtHeight:function(t,e){return t=Yt(this,{top:t,left:0},e||"page").top,Oi(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var n=!1,i=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>i&&(t=i,n=!0);var r=Ei(this.doc,t);return Bt(this,r,{top:0,left:0},e||"page").top+(n?this.doc.height-Pi(r):0)},defaultTextHeight:function(){return Zt(this.display)},defaultCharWidth:function(){return Qt(this.display)},setGutterMarker:ue(function(t,e,n){return kn(this.doc,t,"gutter",function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&yr(i)&&(t.gutterMarkers=null),!0})}),clearGutter:ue(function(t){var e=this,n=e.doc,i=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[t]&&(n.gutterMarkers[t]=null,me(e,i,"gutter"),yr(n.gutterMarkers)&&(n.gutterMarkers=null)),++i})}),addLineWidget:ue(function(t,e,n){return si(this,t,e,n)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!et(this.doc,t))return null;var e=t;if(!(t=Ei(this.doc,t)))return null}else{var e=Ni(t);if(null==e)return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,i,r){var o=this.display;t=qt(this,J(this.doc,t));var s=t.bottom,a=t.left;if(e.style.position="absolute",o.sizer.appendChild(e),"over"==i)s=t.top;else if("above"==i||"near"==i){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(s=t.bottom),a+e.offsetWidth>c&&(a=c-e.offsetWidth)}e.style.top=s+"px",e.style.left=e.style.right="","right"==r?(a=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),n&&gn(this,a,s,a+e.offsetWidth,s+e.offsetHeight)},triggerOnKeyDown:ue(Ve),triggerOnKeyPress:ue(Xe),triggerOnKeyUp:Ke,execCommand:function(t){if(Bo.hasOwnProperty(t))return Bo[t](this)},findPosH:function(t,e,n,i){var r=1;e<0&&(r=-1,e=-e);for(var o=0,s=J(this.doc,t);o<e&&(s=Cn(this.doc,s,r,n,i),!s.hitSide);++o);return s},moveH:ue(function(t,e){var n=this;n.extendSelectionsBy(function(i){return n.display.shift||n.doc.extend||i.empty()?Cn(n.doc,i.head,t,e,n.options.rtlMoveVisually):t<0?i.from():i.to()},vs)}),deleteH:ue(function(t,e){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):_n(this,function(n){var r=Cn(i,n.head,t,e,!1);return t<0?{from:r,to:n.head}:{from:n.head,to:r}})}),findPosV:function(t,e,n,i){var r=1,o=i;e<0&&(r=-1,e=-e);for(var s=0,a=J(this.doc,t);s<e;++s){var l=qt(this,a,"div");if(null==o?o=l.left:l.left=o,a=Sn(this,l,r,n),a.hitSide)break}return a},moveV:ue(function(t,e){var n=this,i=this.doc,r=[],o=!n.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(s){if(o)return t<0?s.from():s.to();var a=qt(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),r.push(a.left);var l=Sn(n,a,t,e);return"page"==e&&s==i.sel.primary()&&yn(n,null,Ut(n,l,"div").top-a.top),l},vs),r.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=r[s]}),findWordAt:function(t){var e=this.doc,n=Ei(e,t.line).text,i=t.ch,r=t.ch;if(n){var o=this.getHelper(t,"wordChars");(t.xRel<0||r==n.length)&&i?--i:++r;for(var s=n.charAt(i),a=vr(s,o)?function(t){return vr(t,o)}:/\s/.test(s)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!vr(t)};i>0&&a(n.charAt(i-1));)--i;for(;r<n.length&&a(n.charAt(r));)++r}return new K(yo(t.line,i),yo(t.line,r))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Mr(this.display.cursorDiv,"CodeMirror-overwrite"):Dr(this.display.cursorDiv,"CodeMirror-overwrite"),hs(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return Cr()==this.display.input},scrollTo:ue(function(t,e){null==t&&null==e||wn(this),null!=t&&(this.curOp.scrollLeft=t),null!=e&&(this.curOp.scrollTop=e)}),getScrollInfo:function(){var t=this.display.scroller,e=fs;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:ue(function(t,e){if(null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:yo(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line)wn(this),this.curOp.scrollToPos=t;else{var n=vn(this,Math.min(t.from.left,t.to.left),Math.min(t.from.top,t.to.top)-t.margin,Math.max(t.from.right,t.to.right),Math.max(t.from.bottom,t.to.bottom)+t.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:ue(function(t,e){function n(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}var i=this;null!=t&&(i.display.wrapper.style.width=n(t)),null!=e&&(i.display.wrapper.style.height=n(e)),i.options.lineWrapping&&zt(this);var r=i.display.viewFrom;i.doc.iter(r,i.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){me(i,r,"widget");break}++r}),i.curOp.forceUpdate=!0,hs(i,"refresh",this)}),operation:function(t){return le(this,t)},refresh:ue(function(){var t=this.display.cachedTextHeight;pe(this),this.curOp.forceUpdate=!0,Rt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),h(this),(null==t||Math.abs(t-Zt(this.display))>.5)&&s(this),hs(this,"refresh",this)}),swapDoc:ue(function(t){var e=this.doc;return e.cm=null,Li(this,t),Rt(this),Ce(this),this.scrollTo(t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,nr(this,"swapDoc",this,e),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ar(t);var Io=t.defaults={},No=t.optionHandlers={},Oo=t.Init={toString:function(){return"CodeMirror.Init"}};Dn("value","",function(t,e){t.setValue(e)},!0),Dn("mode",null,function(t,e){t.doc.modeOption=e,n(t)},!0),Dn("indentUnit",2,n,!0),Dn("indentWithTabs",!1),Dn("smartIndent",!0),Dn("tabSize",4,function(t){i(t),Rt(t),pe(t)},!0),Dn("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e){t.options.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),t.refresh()},!0),Dn("specialCharPlaceholder",yi,function(t){t.refresh()},!0),Dn("electricChars",!0),Dn("rtlMoveVisually",!ho),Dn("wholeLineUpdateBefore",!0),Dn("theme","default",function(t){l(t),c(t)},!0),Dn("keyMap","default",a),Dn("extraKeys",null),Dn("lineWrapping",!1,r,!0),Dn("gutters",[],function(t){p(t.options),c(t)},!0),Dn("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?k(t.display)+"px":"0",t.refresh()},!0),Dn("coverGutterNextToScrollbar",!1,v,!0),Dn("lineNumbers",!1,function(t){p(t.options),c(t)},!0),Dn("firstLineNumber",1,c,!0),Dn("lineNumberFormatter",function(t){return t},c,!0),Dn("showCursorWhenSelecting",!1,yt,!0),Dn("resetSelectionOnContextMenu",!0),Dn("readOnly",!1,function(t,e){"nocursor"==e?(Qe(t),t.display.input.blur(),t.display.disabled=!0):(t.display.disabled=!1,e||Ce(t))}),Dn("disableInput",!1,function(t,e){e||Ce(t)},!0),Dn("dragDrop",!0),Dn("cursorBlinkRate",530),Dn("cursorScrollMargin",0),Dn("cursorHeight",1,yt,!0),Dn("singleCursorHeightPerLine",!0,yt,!0),Dn("workTime",100),Dn("workDelay",100),Dn("flattenSpans",!0,i,!0),Dn("addModeClass",!1,i,!0),Dn("pollInterval",100),Dn("undoDepth",200,function(t,e){t.doc.history.undoDepth=e}),Dn("historyEventDelay",1250),Dn("viewportMargin",10,function(t){t.refresh()},!0),Dn("maxHighlightLength",1e4,i,!0),Dn("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),Dn("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),Dn("autofocus",null);var Po=t.modes={},Fo=t.mimeModes={};t.defineMode=function(e,n){t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),Po[e]=n},t.defineMIME=function(t,e){Fo[t]=e},t.resolveMode=function(e){if("string"==typeof e&&Fo.hasOwnProperty(e))e=Fo[e];else if(e&&"string"==typeof e.name&&Fo.hasOwnProperty(e.name)){var n=Fo[e.name];"string"==typeof n&&(n={name:n}),e=pr(n,e),e.name=n.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,n){var n=t.resolveMode(n),i=Po[n.name];if(!i)return t.getMode(e,"text/plain");var r=i(e,n);if(Ho.hasOwnProperty(n.name)){var o=Ho[n.name];for(var s in o)o.hasOwnProperty(s)&&(r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=o[s])}if(r.name=n.name,n.helperType&&(r.helperType=n.helperType),n.modeProps)for(var s in n.modeProps)r[s]=n.modeProps[s];return r},t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var Ho=t.modeExtensions={};t.extendMode=function(t,e){mr(e,Ho.hasOwnProperty(t)?Ho[t]:Ho[t]={})},t.defineExtension=function(e,n){t.prototype[e]=n},t.defineDocExtension=function(t,e){is.prototype[t]=e},t.defineOption=Dn;var zo=[];t.defineInitHook=function(t){zo.push(t)};var Ro=t.helpers={};t.registerHelper=function(e,n,i){Ro.hasOwnProperty(e)||(Ro[e]=t[e]={_global:[]}),Ro[e][n]=i},t.registerGlobalHelper=function(e,n,i,r){t.registerHelper(e,n,r),Ro[e]._global.push({pred:i,val:r})};var jo=t.copyState=function(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n},Wo=t.startState=function(t,e,n){return!t.startState||t.startState(e,n)};t.innerMode=function(t,e){for(;t.innerMode;){var n=t.innerMode(e);if(!n||n.mode==t)break;e=n.state,t=n.mode}return n||{mode:t,state:e}};var Bo=t.commands={selectAll:function(t){t.setSelection(yo(t.firstLine(),0),yo(t.lastLine()),ms)},singleSelection:function(t){t.setSelection(t.getCursor("anchor"),t.getCursor("head"),ms)},killLine:function(t){_n(t,function(e){if(e.empty()){var n=Ei(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:yo(e.head.line+1,0)}:{from:e.head,to:yo(e.head.line,n)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){_n(t,function(e){return{from:yo(e.from().line,0),to:J(t.doc,yo(e.to().line+1,0))}})},delLineLeft:function(t){_n(t,function(t){return{from:yo(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){_n(t,function(e){
var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}})},delWrappedLineRight:function(t){_n(t,function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:i}})},undo:function(t){t.undo()},redo:function(t){t.redo()},undoSelection:function(t){t.undoSelection()},redoSelection:function(t){t.redoSelection()},goDocStart:function(t){t.extendSelection(yo(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(yo(t.lastLine()))},goLineStart:function(t){t.extendSelectionsBy(function(e){return jr(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){t.extendSelectionsBy(function(e){return Br(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){t.extendSelectionsBy(function(e){return Wr(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")},vs)},goLineLeft:function(t){t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")},vs)},goLineLeftSmart:function(t){t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:0,top:n},"div");return i.ch<t.getLine(i.line).search(/\S/)?Br(t,e.head):i},vs)},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),i=t.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),s=ys(t.getLine(o.line),o.ch,i);e.push(new Array(i-s%i+1).join(" "))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){le(t,function(){for(var e=t.listSelections(),n=[],i=0;i<e.length;i++){var r=e[i].head,o=Ei(t.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new yo(r.line,r.ch-1)),r.ch>0)r=new yo(r.line,r.ch+1),t.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),yo(r.line,r.ch-2),r,"+transpose");else if(r.line>t.doc.first){var s=Ei(t.doc,r.line-1).text;s&&t.replaceRange(o.charAt(0)+"\n"+s.charAt(s.length-1),yo(r.line-1,s.length-1),yo(r.line,1),"+transpose")}n.push(new K(r,r))}t.setSelections(n)})},newlineAndIndent:function(t){le(t,function(){for(var e=t.listSelections().length,n=0;n<e;n++){var i=t.listSelections()[n];t.replaceRange("\n",i.anchor,i.head,"+input"),t.indentLine(i.from().line+1,null,!0),bn(t)}})},toggleOverwrite:function(t){t.toggleOverwrite()}},Yo=t.keyMap={};Yo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Yo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Yo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Yo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Yo["default"]=uo?Yo.macDefault:Yo.pcDefault;var Uo=t.lookupKey=function(t,e,n){function i(e){e=Mn(e);var r=e[t];if(!1===r)return"stop";if(null!=r&&n(r))return!0;if(e.nofallthrough)return"stop";var o=e.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return i(o);for(var s=0;s<o.length;++s){var a=i(o[s]);if(a)return a}return!1}for(var r=0;r<e.length;++r){var o=i(e[r]);if(o)return"stop"!=o}},qo=t.isModifierKey=function(t){var e=Ns[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e},Vo=t.keyName=function(t,e){if(io&&34==t.keyCode&&t["char"])return!1;var n=Ns[t.keyCode];return null!=n&&!t.altGraphKey&&(t.altKey&&(n="Alt-"+n),(po?t.metaKey:t.ctrlKey)&&(n="Ctrl-"+n),(po?t.ctrlKey:t.metaKey)&&(n="Cmd-"+n),!e&&t.shiftKey&&(n="Shift-"+n),n)};t.fromTextArea=function(e,n){function i(){e.value=l.getValue()}if(n||(n={}),n.value=e.value,!n.tabindex&&e.tabindex&&(n.tabindex=e.tabindex),!n.placeholder&&e.placeholder&&(n.placeholder=e.placeholder),null==n.autofocus){var r=Cr();n.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}if(e.form&&(cs(e.form,"submit",i),!n.leaveSubmitMethodAlone)){var o=e.form,s=o.submit;try{var a=o.submit=function(){i(),o.submit=s,o.submit(),o.submit=a}}catch(t){}}e.style.display="none";var l=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},n);return l.save=i,l.getTextArea=function(){return e},l.toTextArea=function(){l.toTextArea=isNaN,i(),e.parentNode.removeChild(l.getWrapperElement()),e.style.display="",e.form&&(us(e.form,"submit",i),"function"==typeof e.form.submit&&(e.form.submit=s))},l};var Go=t.StringStream=function(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Go.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else var n=e&&(t.test?t.test(e):t(e));if(n)return++this.pos,e},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ys(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ys(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return ys(this.string,null,this.tabSize)-(this.lineStart?ys(this.string,this.lineStart,this.tabSize):0)},match:function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}var r=function(t){return n?t.toLowerCase():t};if(r(this.string.substr(this.pos,t.length))==r(t))return!1!==e&&(this.pos+=t.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}}};var Ko=t.TextMarker=function(t,e){this.lines=[],this.type=e,this.doc=t};ar(Ko),Ko.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Jt(t),sr(this,"clear")){var n=this.find();n&&nr(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=Nn(s.markedSpans,this);t&&!this.collapsed?me(t,Ni(s),"text"):t&&(null!=a.to&&(r=Ni(s)),null!=a.from&&(i=Ni(s))),s.markedSpans=On(s.markedSpans,a),null==a.from&&this.collapsed&&!ni(this.doc,s)&&t&&Ii(s,Zt(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=Qn(this.lines[o]),c=d(l);c>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&pe(t,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&ft(t.doc)),t&&nr(t,"markerCleared",t,this),e&&ee(t),this.parent&&this.parent.clear()}},Ko.prototype.find=function(t,e){null==t&&"bookmark"==this.type&&(t=1);for(var n,i,r=0;r<this.lines.length;++r){var o=this.lines[r],s=Nn(o.markedSpans,this);if(null!=s.from&&(n=yo(e?o:Ni(o),s.from),-1==t))return n;if(null!=s.to&&(i=yo(e?o:Ni(o),s.to),1==t))return i}return n&&{from:n,to:i}},Ko.prototype.changed=function(){var t=this.find(-1,!0),e=this,n=this.doc.cm;t&&n&&le(n,function(){var i=t.line,r=Ni(t.line),o=It(n,r);if(o&&(Ht(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!ni(e.doc,i)&&null!=e.height){var s=e.height;e.height=null;var a=oi(e)-s;a&&Ii(i,i.height+a)}})},Ko.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=dr(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Ko.prototype.detachLine=function(t){if(this.lines.splice(dr(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}};var Xo=0,Zo=t.SharedTextMarker=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};ar(Zo),Zo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();nr(this,"clear")}},Zo.prototype.find=function(t,e){return this.primary.find(t,e)};var Qo=t.LineWidget=function(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.cm=t,this.node=e};ar(Qo),Qo.prototype.clear=function(){var t=this.cm,e=this.line.widgets,n=this.line,i=Ni(n);if(null!=i&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(n.widgets=null);var o=oi(this);le(t,function(){ri(t,n,-o),me(t,i,"widget"),Ii(n,Math.max(0,n.height-o))})}},Qo.prototype.changed=function(){var t=this.height,e=this.cm,n=this.line;this.height=null;var i=oi(this)-t;i&&le(e,function(){e.curOp.forceUpdate=!0,ri(e,n,i),Ii(n,n.height+i)})};var Jo=t.Line=function(t,e,n){this.text=t,Yn(this,e),this.height=n?n(this):1};ar(Jo),Jo.prototype.lineNo=function(){return Ni(this)};var ts={},es={};Di.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;n<i;++n){var r=this.lines[n];this.height-=r.height,li(r),nr(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0;i<e.length;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;t<i;++t)if(n(this.lines[t]))return!0}},Mi.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(t<r){var o=Math.min(e,r-t),s=i.height;if(i.removeInner(t,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=r}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof Di))){var a=[];this.collapse(a),this.children=[new Di(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<=o){if(r.insertInner(t,e,n),r.lines&&r.lines.length>50){for(;r.lines.length>50;){var s=r.lines.splice(r.lines.length-25,25),a=new Di(s);r.height-=a.height,this.children.splice(i+1,0,a),a.parent=this}this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new Mi(e);if(t.parent){t.size-=n.size,t.height-=n.height;var i=dr(t.parent.children,t);t.parent.children.splice(i+1,0,n)}else{var r=new Mi(t.children);r.parent=t,t.children=[r,n],t=r}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<o){var s=Math.min(e,o-t);if(r.iterN(t,s,n))return!0;if(0==(e-=s))break;t=0}else t-=o}}};var ns=0,is=t.Doc=function(t,e,n){if(!(this instanceof is))return new is(t,e,n);null==n&&(n=0),Mi.call(this,[new Di([new Jo("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var i=yo(n,0);this.sel=Z(i),this.history=new Hi(null),this.id=++ns,this.modeOption=e,"string"==typeof t&&(t=Es(t)),Si(this,{from:i,to:i,text:t}),ut(this,Z(i),ms)};is.prototype=pr(Mi.prototype,{constructor:is,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0;i<e.length;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=$i(this,this.first,this.first+this.size);return!1===t?e:e.join(t||"\n")},setValue:he(function(t){var e=yo(this.first,0),n=this.first+this.size-1;an(this,{from:e,to:yo(n,Ei(this,n).text.length),text:Es(t),origin:"setValue"},!0),ut(this,Z(e))}),replaceRange:function(t,e,n,i){e=J(this,e),n=n?J(this,n):e,fn(this,t,e,n,i)},getRange:function(t,e,n){var i=Ai(this,J(this,t),J(this,e));return!1===n?i:i.join(n||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(et(this,t))return Ei(this,t)},getLineNumber:function(t){return Ni(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Ei(this,t)),Qn(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return J(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:he(function(t,e,n){at(this,J(this,"number"==typeof t?yo(t,e||0):t),null,n)}),setSelection:he(function(t,e,n){at(this,J(this,t),J(this,e||t),n)}),extendSelection:he(function(t,e,n){rt(this,J(this,t),e&&J(this,e),n)}),extendSelections:he(function(t,e){ot(this,nt(this,t,e))}),extendSelectionsBy:he(function(t,e){ot(this,fr(this.sel.ranges,t),e)}),setSelections:he(function(t,e,n){if(t.length){for(var i=0,r=[];i<t.length;i++)r[i]=new K(J(this,t[i].anchor),J(this,t[i].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),ut(this,X(r,e),n)}}),addSelection:he(function(t,e,n){var i=this.sel.ranges.slice(0);i.push(new K(J(this,t),J(this,e||t))),ut(this,X(i,i.length-1),n)}),getSelection:function(t){for(var e,n=this.sel.ranges,i=0;i<n.length;i++){var r=Ai(this,n[i].from(),n[i].to());e=e?e.concat(r):r}return!1===t?e:e.join(t||"\n")},getSelections:function(t){for(var e=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=Ai(this,n[i].from(),n[i].to());!1!==t&&(r=r.join(t||"\n")),e[i]=r}return e},replaceSelection:function(t,e,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=t;this.replaceSelections(i,e,n||"+input")},replaceSelections:he(function(t,e,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var s=r.ranges[o];i[o]={from:s.from(),to:s.to(),text:Es(t[o]),origin:n}}for(var a=e&&"end"!=e&&on(this,i,e),o=i.length-1;o>=0;o--)an(this,i[o]);a?ct(this,a):this.cm&&bn(this.cm)}),undo:he(function(){cn(this,"undo")}),redo:he(function(){cn(this,"redo")}),undoSelection:he(function(){cn(this,"undo",!0)}),redoSelection:he(function(){cn(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(var i=0;i<t.undone.length;i++)t.undone[i].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){this.history=new Hi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Ki(this.history.done),undone:Ki(this.history.undone)}},setHistory:function(t){var e=this.history=new Hi(this.history.maxGeneration);e.done=Ki(t.done.slice(0),null,!0),e.undone=Ki(t.undone.slice(0),null,!0)},addLineClass:he(function(t,e,n){return kn(this,t,"class",function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[i]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(t[i]))return!1;t[i]+=" "+n}else t[i]=n;return!0})}),removeLineClass:he(function(t,e,n){return kn(this,t,"class",function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",r=t[i];if(!r)return!1;if(null==n)t[i]=null;else{var o=r.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!o)return!1;var s=o.index+o[0].length;t[i]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0})}),markText:function(t,e,n){return Tn(this,J(this,t),J(this,e),n,"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared};return t=J(this,t),Tn(this,t,t,n,"bookmark")},findMarksAt:function(t){t=J(this,t);var e=[],n=Ei(this,t.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(t,e,n){t=J(this,t),e=J(this,e);var i=[],r=t.line;return this.iter(t.line,e.line+1,function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];r==t.line&&t.ch>l.to||null==l.from&&r!=t.line||r==e.line&&l.from>e.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r}),i},getAllMarks:function(){var t=[];return this.iter(function(e){var n=e.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&t.push(n[i].marker)}),t},posFromIndex:function(t){var e,n=this.first;return this.iter(function(i){var r=i.text.length+1;if(r>t)return e=t,!0;t-=r,++n}),J(this,yo(n,e))},indexFromPos:function(t){t=J(this,t);var e=t.ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new is($i(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new is($i(this,e,n),t.mode||this.modeOption,e);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],An(i,En(this)),i},unlinkDoc:function(e){if(e instanceof t&&(e=e.doc),this.linked)for(var n=0;n<this.linked.length;++n){var i=this.linked[n];if(i.doc==e){this.linked.splice(n,1),e.unlinkDoc(this),$n(En(this));break}}if(e.history==this.history){var r=[e.id];Ti(e,function(t){r.push(t.id)},!0),e.history=new Hi(null),e.history.done=Ki(this.history.done,r),e.history.undone=Ki(this.history.undone,r)}},iterLinkedDocs:function(t){Ti(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),is.prototype.eachLine=is.prototype.iter;var rs="iter insert remove copy getEditor".split(" ");for(var os in is.prototype)is.prototype.hasOwnProperty(os)&&dr(rs,os)<0&&(t.prototype[os]=function(t){return function(){return t.apply(this.doc,arguments)}}(is.prototype[os]));ar(is);var ss=t.e_preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},as=t.e_stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},ls=t.e_stop=function(t){ss(t),as(t)},cs=t.on=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={}),r=i[e]||(i[e]=[]);r.push(n)}},us=t.off=function(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers&&t._handlers[e];if(!i)return;for(var r=0;r<i.length;++r)if(i[r]==n){i.splice(r,1);break}}},hs=t.signal=function(t,e){var n=t._handlers&&t._handlers[e];if(n)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)},ds=null,fs=30,ps=t.Pass={toString:function(){return"CodeMirror.Pass"}},ms={scroll:!1},gs={origin:"*mouse"},vs={origin:"+move"};lr.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var ys=t.countColumn=function(t,e,n,i,r){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=i||0,s=r||0;;){var a=t.indexOf("\t",o);if(a<0||a>=e)return s+(e-o);s+=a-o,s+=n-s%n,o=a+1}},bs=[""],ws=function(t){t.select()};lo?ws=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:Qr&&(ws=function(t){try{t.select()}catch(t){}}),[].indexOf&&(dr=function(t,e){return t.indexOf(e)}),[].map&&(fr=function(t,e){return t.map(e)});var xs,ks=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,_s=t.isWordChar=function(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||ks.test(t))},Cs=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;xs=document.createRange?function(t,e,n){var i=document.createRange();return i.setEnd(t,n),i.setStart(t,e),i}:function(t,e,n){var i=document.body.createTextRange();return i.moveToElementText(t.parentNode),i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i},Qr&&Jr<11&&(Cr=function(){try{return document.activeElement}catch(t){return document.body}});var Ss,Ds,Ms,Ts=!1,Ls=function(){if(Qr&&Jr<9)return!1;var t=wr("div");return"draggable"in t||"dragDrop"in t}(),Es=t.splitLines=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;e<=i;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),e+=s+1):(n.push(o),e=r+1)}return n}:function(t){return t.split(/\r\n?|\n/)},As=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},$s=function(){var t=wr("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),Is=null,Ns={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};t.keyNames=Ns,function(){for(var t=0;t<10;t++)Ns[t+48]=Ns[t+96]=String(t);for(var t=65;t<=90;t++)Ns[t]=String.fromCharCode(t);for(var t=1;t<=12;t++)Ns[t+111]=Ns[t+63235]="F"+t}();var Os,Ps=function(){function t(t){return t<=247?n.charAt(t):1424<=t&&t<=1524?"R":1536<=t&&t<=1773?i.charAt(t-1536):1774<=t&&t<=2220?"r":8192<=t&&t<=8203?"w":8204==t?"b":"L"}function e(t,e,n){this.level=t,this.from=e,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",i="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,s=/[LRr]/,a=/[Lb1n]/,l=/[1n]/,c="L";return function(n){if(!r.test(n))return!1;for(var i,u=n.length,h=[],d=0;d<u;++d)h.push(i=t(n.charCodeAt(d)));for(var d=0,f=c;d<u;++d){var i=h[d];"m"==i?h[d]=f:f=i}for(var d=0,p=c;d<u;++d){var i=h[d];"1"==i&&"r"==p?h[d]="n":s.test(i)&&(p=i,"r"==i&&(h[d]="R"))}for(var d=1,f=h[0];d<u-1;++d){var i=h[d];"+"==i&&"1"==f&&"1"==h[d+1]?h[d]="1":","!=i||f!=h[d+1]||"1"!=f&&"n"!=f||(h[d]=f),f=i}for(var d=0;d<u;++d){var i=h[d];if(","==i)h[d]="N";else if("%"==i){for(var m=d+1;m<u&&"%"==h[m];++m);for(var g=d&&"!"==h[d-1]||m<u&&"1"==h[m]?"1":"N",v=d;v<m;++v)h[v]=g;d=m-1}}for(var d=0,p=c;d<u;++d){var i=h[d];"L"==p&&"1"==i?h[d]="L":s.test(i)&&(p=i)}for(var d=0;d<u;++d)if(o.test(h[d])){for(var m=d+1;m<u&&o.test(h[m]);++m);for(var y="L"==(d?h[d-1]:c),b="L"==(m<u?h[m]:c),g=y||b?"L":"R",v=d;v<m;++v)h[v]=g;d=m-1}for(var w,x=[],d=0;d<u;)if(a.test(h[d])){var k=d;for(++d;d<u&&a.test(h[d]);++d);x.push(new e(0,k,d))}else{var _=d,C=x.length;for(++d;d<u&&"L"!=h[d];++d);for(var v=_;v<d;)if(l.test(h[v])){_<v&&x.splice(C,0,new e(1,_,v));var S=v;for(++v;v<d&&l.test(h[v]);++v);x.splice(C,0,new e(2,S,v)),_=v}else++v;_<d&&x.splice(C,0,new e(1,_,d))}return 1==x[0].level&&(w=n.match(/^\s+/))&&(x[0].from=w[0].length,x.unshift(new e(0,0,w[0].length))),1==hr(x).level&&(w=n.match(/\s+$/))&&(hr(x).to-=w[0].length,x.push(new e(0,u-w[0].length,u))),x[0].level!=hr(x).level&&x.push(new e(x[0].level,u,u)),x}}();return t.version="4.7.0",t}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("javascript",function(e,n){function i(t){for(var e,n=!1,i=!1;null!=(e=t.next());){if(!n){if("/"==e&&!i)return;"["==e?i=!0:i&&"]"==e&&(i=!1)}n=!n&&"\\"==e}}function r(t,e,n){return pt=t,mt=n,e}function o(t,e){var n=t.next();if('"'==n||"'"==n)return e.tokenize=s(n),e.tokenize(t,e);if("."==n&&t.match(/^\d+(?:[eE][+\-]?\d+)?/))return r("number","number");if("."==n&&t.match(".."))return r("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return r(n);if("="==n&&t.eat(">"))return r("=>","operator");if("0"==n&&t.eat(/x/i))return t.eatWhile(/[\da-f]/i),r("number","number");if(/\d/.test(n))return t.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),r("number","number");if("/"==n)return t.eat("*")?(e.tokenize=a,a(t,e)):t.eat("/")?(t.skipToEnd(),r("comment","comment")):"operator"==e.lastType||"keyword c"==e.lastType||"sof"==e.lastType||/^[\[{}\(,;:]$/.test(e.lastType)?(i(t),t.eatWhile(/[gimy]/),r("regexp","string-2")):(t.eatWhile(_t),r("operator","operator",t.current()));if("`"==n)return e.tokenize=l,l(t,e);if("#"==n)return t.skipToEnd(),r("error","error");if(_t.test(n))return t.eatWhile(_t),r("operator","operator",t.current());if(xt.test(n)){t.eatWhile(xt);var o=t.current(),c=kt.propertyIsEnumerable(o)&&kt[o];return c&&"."!=e.lastType?r(c.type,c.style,o):r("variable","variable",o)}}function s(t){return function(e,n){var i,s=!1;if(yt&&"@"==e.peek()&&e.match(Ct))return n.tokenize=o,r("jsonld-keyword","meta");for(;null!=(i=e.next())&&(i!=t||s);)s=!s&&"\\"==i;return s||(n.tokenize=o),r("string","string")}}function a(t,e){for(var n,i=!1;n=t.next();){if("/"==n&&i){e.tokenize=o;break}i="*"==n}return r("comment","comment")}function l(t,e){for(var n,i=!1;null!=(n=t.next());){if(!i&&("`"==n||"$"==n&&t.eat("{"))){e.tokenize=o;break}i=!i&&"\\"==n}return r("quasi","string-2",t.current())}function c(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var n=t.string.indexOf("=>",t.start);if(!(n<0)){for(var i=0,r=!1,o=n-1;o>=0;--o){var s=t.string.charAt(o),a=St.indexOf(s);if(a>=0&&a<3){if(!i){++o;break}if(0==--i)break}else if(a>=3&&a<6)++i;else if(xt.test(s))r=!0;else if(r&&!i){++o;break}}r&&!i&&(e.fatArrowAt=o)}}function u(t,e,n,i,r,o){this.indented=t,this.column=e,this.type=n,this.prev=r,this.info=o,null!=i&&(this.align=i)}function h(t,e){for(var n=t.localVars;n;n=n.next)if(n.name==e)return!0;for(var i=t.context;i;i=i.prev)for(var n=i.vars;n;n=n.next)if(n.name==e)return!0}function d(t,e,n,i,r){var o=t.cc;for(Mt.state=t,Mt.stream=r,Mt.marked=null,Mt.cc=o,Mt.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;){if((o.length?o.pop():bt?k:x)(n,i)){for(;o.length&&o[o.length-1].lex;)o.pop()();return Mt.marked?Mt.marked:"variable"==n&&h(t,i)?"variable-2":e}}}function f(){for(var t=arguments.length-1;t>=0;t--)Mt.cc.push(arguments[t])}function p(){return f.apply(null,arguments),!0}function m(t){function e(e){for(var n=e;n;n=n.next)if(n.name==t)return!0;return!1}var i=Mt.state;if(i.context){if(Mt.marked="def",e(i.localVars))return;i.localVars={name:t,next:i.localVars}}else{if(e(i.globalVars))return;n.globalVars&&(i.globalVars={name:t,next:i.globalVars})}}function g(){Mt.state.context={prev:Mt.state.context,vars:Mt.state.localVars
},Mt.state.localVars=Tt}function v(){Mt.state.localVars=Mt.state.context.vars,Mt.state.context=Mt.state.context.prev}function y(t,e){var n=function(){var n=Mt.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var r=n.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;n.lexical=new u(i,Mt.stream.column(),t,null,n.lexical,e)};return n.lex=!0,n}function b(){var t=Mt.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function w(t){function e(n){return n==t?p():";"==t?f():p(e)}return e}function x(t,e){return"var"==t?p(y("vardef",e.length),B,w(";"),b):"keyword a"==t?p(y("form"),k,x,b):"keyword b"==t?p(y("form"),x,b):"{"==t?p(y("}"),R,b):";"==t?p():"if"==t?("else"==Mt.state.lexical.info&&Mt.state.cc[Mt.state.cc.length-1]==b&&Mt.state.cc.pop()(),p(y("form"),k,x,b,G)):"function"==t?p(tt):"for"==t?p(y("form"),K,x,b):"variable"==t?p(y("stat"),I):"switch"==t?p(y("form"),k,y("}","switch"),w("{"),R,b,b):"case"==t?p(k,w(":")):"default"==t?p(w(":")):"catch"==t?p(y("form"),g,w("("),et,w(")"),x,b,v):"module"==t?p(y("form"),g,st,v,b):"class"==t?p(y("form"),nt,b):"export"==t?p(y("form"),at,b):"import"==t?p(y("form"),lt,b):f(y("stat"),k,w(";"),b)}function k(t){return C(t,!1)}function _(t){return C(t,!0)}function C(t,e){if(Mt.state.fatArrowAt==Mt.stream.start){var n=e?$:A;if("("==t)return p(g,y(")"),H(Y,")"),b,w("=>"),n,v);if("variable"==t)return f(g,Y,w("=>"),n,v)}var i=e?T:M;return Dt.hasOwnProperty(t)?p(i):"function"==t?p(tt,i):"keyword c"==t?p(e?D:S):"("==t?p(y(")"),S,ft,w(")"),b,i):"operator"==t||"spread"==t?p(e?_:k):"["==t?p(y("]"),ht,b,i):"{"==t?z(O,"}",null,i):"quasi"==t?f(L,i):p()}function S(t){return t.match(/[;\}\)\],]/)?f():f(k)}function D(t){return t.match(/[;\}\)\],]/)?f():f(_)}function M(t,e){return","==t?p(k):T(t,e,!1)}function T(t,e,n){var i=0==n?M:T,r=0==n?k:_;return"=>"==t?p(g,n?$:A,v):"operator"==t?/\+\+|--/.test(e)?p(i):"?"==e?p(k,w(":"),r):p(r):"quasi"==t?f(L,i):";"!=t?"("==t?z(_,")","call",i):"."==t?p(N,i):"["==t?p(y("]"),S,w("]"),b,i):void 0:void 0}function L(t,e){return"quasi"!=t?f():"${"!=e.slice(e.length-2)?p(L):p(k,E)}function E(t){if("}"==t)return Mt.marked="string-2",Mt.state.tokenize=l,p(L)}function A(t){return c(Mt.stream,Mt.state),f("{"==t?x:k)}function $(t){return c(Mt.stream,Mt.state),f("{"==t?x:_)}function I(t){return":"==t?p(b,x):f(M,w(";"),b)}function N(t){if("variable"==t)return Mt.marked="property",p()}function O(t,e){return"variable"==t||"keyword"==Mt.style?(Mt.marked="property",p("get"==e||"set"==e?P:F)):"number"==t||"string"==t?(Mt.marked=yt?"property":Mt.style+" property",p(F)):"jsonld-keyword"==t?p(F):"["==t?p(k,w("]"),F):void 0}function P(t){return"variable"!=t?f(F):(Mt.marked="property",p(tt))}function F(t){return":"==t?p(_):"("==t?f(tt):void 0}function H(t,e){function n(i){if(","==i){var r=Mt.state.lexical;return"call"==r.info&&(r.pos=(r.pos||0)+1),p(t,n)}return i==e?p():p(w(e))}return function(i){return i==e?p():f(t,n)}}function z(t,e,n){for(var i=3;i<arguments.length;i++)Mt.cc.push(arguments[i]);return p(y(e,n),H(t,e),b)}function R(t){return"}"==t?p():f(x,R)}function j(t){if(wt&&":"==t)return p(W)}function W(t){if("variable"==t)return Mt.marked="variable-3",p()}function B(){return f(Y,j,q,V)}function Y(t,e){return"variable"==t?(m(e),p()):"["==t?z(Y,"]"):"{"==t?z(U,"}"):void 0}function U(t,e){return"variable"!=t||Mt.stream.match(/^\s*:/,!1)?("variable"==t&&(Mt.marked="property"),p(w(":"),Y,q)):(m(e),p(q))}function q(t,e){if("="==e)return p(_)}function V(t){if(","==t)return p(B)}function G(t,e){if("keyword b"==t&&"else"==e)return p(y("form","else"),x,b)}function K(t){if("("==t)return p(y(")"),X,w(")"),b)}function X(t){return"var"==t?p(B,w(";"),Q):";"==t?p(Q):"variable"==t?p(Z):f(k,w(";"),Q)}function Z(t,e){return"in"==e||"of"==e?(Mt.marked="keyword",p(k)):p(M,Q)}function Q(t,e){return";"==t?p(J):"in"==e||"of"==e?(Mt.marked="keyword",p(k)):f(k,w(";"),J)}function J(t){")"!=t&&p(k)}function tt(t,e){return"*"==e?(Mt.marked="keyword",p(tt)):"variable"==t?(m(e),p(tt)):"("==t?p(g,y(")"),H(et,")"),b,x,v):void 0}function et(t){return"spread"==t?p(et):f(Y,j)}function nt(t,e){if("variable"==t)return m(e),p(it)}function it(t,e){return"extends"==e?p(k,it):"{"==t?p(y("}"),rt,b):void 0}function rt(t,e){return"variable"==t||"keyword"==Mt.style?(Mt.marked="property","get"==e||"set"==e?p(ot,tt,rt):p(tt,rt)):"*"==e?(Mt.marked="keyword",p(rt)):";"==t?p(rt):"}"==t?p():void 0}function ot(t){return"variable"!=t?f():(Mt.marked="property",p())}function st(t,e){return"string"==t?p(x):"variable"==t?(m(e),p(ut)):void 0}function at(t,e){return"*"==e?(Mt.marked="keyword",p(ut,w(";"))):"default"==e?(Mt.marked="keyword",p(k,w(";"))):f(x)}function lt(t){return"string"==t?p():f(ct,ut)}function ct(t,e){return"{"==t?z(ct,"}"):("variable"==t&&m(e),p())}function ut(t,e){if("from"==e)return Mt.marked="keyword",p(k)}function ht(t){return"]"==t?p():f(_,dt)}function dt(t){return"for"==t?f(ft,w("]")):","==t?p(H(D,"]")):f(H(_,"]"))}function ft(t){return"for"==t?p(K,ft):"if"==t?p(k,ft):void 0}var pt,mt,gt=e.indentUnit,vt=n.statementIndent,yt=n.jsonld,bt=n.json||yt,wt=n.typescript,xt=n.wordCharacters||/[\w$\xa1-\uffff]/,kt=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),n=t("keyword b"),i=t("keyword c"),r=t("operator"),o={type:"atom",style:"atom"},s={"if":t("if"),"while":e,"with":e,"else":n,"do":n,"try":n,"finally":n,"return":i,"break":i,"continue":i,"new":i,"delete":i,"throw":i,"debugger":i,"var":t("var"),"const":t("var"),"let":t("var"),"function":t("function"),"catch":t("catch"),"for":t("for"),"switch":t("switch"),"case":t("case"),"default":t("default"),"in":r,"typeof":r,"instanceof":r,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o,"this":t("this"),module:t("module"),"class":t("class"),"super":t("atom"),"yield":i,"export":t("export"),"import":t("import"),"extends":i};if(wt){var a={type:"variable",style:"variable-3"},l={"interface":t("interface"),"extends":t("extends"),constructor:t("constructor"),"public":t("public"),"private":t("private"),"protected":t("protected"),"static":t("static"),string:a,number:a,bool:a,any:a};for(var c in l)s[c]=l[c]}return s}(),_t=/[+\-*&%=<>!?|~^]/,Ct=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,St="([{}])",Dt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Mt={state:null,column:null,marked:null,cc:null},Tt={name:"this",next:{name:"arguments"}};return b.lex=!0,{startState:function(t){var e={tokenize:o,lastType:"sof",cc:[],lexical:new u((t||0)-gt,0,"block",!1),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:0};return n.globalVars&&"object"==typeof n.globalVars&&(e.globalVars=n.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),c(t,e)),e.tokenize!=a&&t.eatSpace())return null;var n=e.tokenize(t,e);return"comment"==pt?n:(e.lastType="operator"!=pt||"++"!=mt&&"--"!=mt?pt:"incdec",d(e,n,pt,mt,t))},indent:function(e,i){if(e.tokenize==a)return t.Pass;if(e.tokenize!=o)return 0;var r=i&&i.charAt(0),s=e.lexical;if(!/^\s*else\b/.test(i))for(var l=e.cc.length-1;l>=0;--l){var c=e.cc[l];if(c==b)s=s.prev;else if(c!=G)break}"stat"==s.type&&"}"==r&&(s=s.prev),vt&&")"==s.type&&"stat"==s.prev.type&&(s=s.prev);var u=s.type,h=r==u;return"vardef"==u?s.indented+("operator"==e.lastType||","==e.lastType?s.info+1:0):"form"==u&&"{"==r?s.indented:"form"==u?s.indented+gt:"stat"==u?s.indented+("operator"==e.lastType||","==e.lastType?vt||gt:0):"switch"!=s.info||h||0==n.doubleIndentSwitch?s.align?s.column+(h?0:1):s.indented+(h?0:gt):s.indented+(/^(?:case|default)\b/.test(i)?gt:2*gt)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:bt?null:"/*",blockCommentEnd:bt?null:"*/",lineComment:bt?null:"//",fold:"brace",helperType:bt?"json":"javascript",jsonldMode:yt,jsonMode:bt}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})});